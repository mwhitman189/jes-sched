{"ast":null,"code":"import moment from \"moment\";\n\nfunction validateRoom(events, room, startTime, duration, event) {\n  return events.every(evt => {\n    if (event.id === evt.id) {\n      return true;\n    }\n\n    if (testDateOverlap([evt.start, evt.end], [moment(new Date(startTime)), moment(moment(new Date(startTime)).add(duration, \"m\").toDate())])) {\n      console.log(evt);\n      return parseInt(evt.room) !== parseInt(room);\n    }\n\n    return true;\n  });\n}\n\nfunction validateTeacher(events, teacher, startTime, duration, newEvent) {\n  return events.every(event => {\n    if (testDateOverlap([event.start, event.end], [moment(new Date(startTime)), moment(moment(new Date(startTime)).add(duration, \"m\").toDate())])) {\n      console.log(event);\n      return parseInt(event.resourceId) !== parseInt(teacher);\n    }\n\n    return true;\n  });\n}\n\nfunction testDateOverlap(dateArr, testDateArr) {\n  if (testDateArr[0].isBetween(dateArr[0], dateArr[1]) || testDateArr[1].isBetween(dateArr[0], dateArr[1])) {\n    return true;\n  }\n}\n\nexport { validateRoom, validateTeacher };","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/src/validators.js"],"names":["moment","validateRoom","events","room","startTime","duration","event","every","evt","id","testDateOverlap","start","end","Date","add","toDate","console","log","parseInt","validateTeacher","teacher","newEvent","resourceId","dateArr","testDateArr","isBetween"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;;AAEA,SAASC,YAAT,CAAsBC,MAAtB,EAA8BC,IAA9B,EAAoCC,SAApC,EAA+CC,QAA/C,EAAyDC,KAAzD,EAAgE;AAC9D,SAAOJ,MAAM,CAACK,KAAP,CAAaC,GAAG,IAAI;AACzB,QAAIF,KAAK,CAACG,EAAN,KAAaD,GAAG,CAACC,EAArB,EAAyB;AACvB,aAAO,IAAP;AACD;;AACD,QACEC,eAAe,CACb,CAACF,GAAG,CAACG,KAAL,EAAYH,GAAG,CAACI,GAAhB,CADa,EAEb,CACEZ,MAAM,CAAC,IAAIa,IAAJ,CAAST,SAAT,CAAD,CADR,EAEEJ,MAAM,CACJA,MAAM,CAAC,IAAIa,IAAJ,CAAST,SAAT,CAAD,CAAN,CACGU,GADH,CACOT,QADP,EACiB,GADjB,EAEGU,MAFH,EADI,CAFR,CAFa,CADjB,EAYE;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYT,GAAZ;AACA,aAAOU,QAAQ,CAACV,GAAG,CAACL,IAAL,CAAR,KAAuBe,QAAQ,CAACf,IAAD,CAAtC;AACD;;AACD,WAAO,IAAP;AACD,GArBM,CAAP;AAsBD;;AAED,SAASgB,eAAT,CAAyBjB,MAAzB,EAAiCkB,OAAjC,EAA0ChB,SAA1C,EAAqDC,QAArD,EAA+DgB,QAA/D,EAAyE;AACvE,SAAOnB,MAAM,CAACK,KAAP,CAAaD,KAAK,IAAI;AAC3B,QACEI,eAAe,CACb,CAACJ,KAAK,CAACK,KAAP,EAAcL,KAAK,CAACM,GAApB,CADa,EAEb,CACEZ,MAAM,CAAC,IAAIa,IAAJ,CAAST,SAAT,CAAD,CADR,EAEEJ,MAAM,CACJA,MAAM,CAAC,IAAIa,IAAJ,CAAST,SAAT,CAAD,CAAN,CACGU,GADH,CACOT,QADP,EACiB,GADjB,EAEGU,MAFH,EADI,CAFR,CAFa,CADjB,EAYE;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYX,KAAZ;AACA,aAAOY,QAAQ,CAACZ,KAAK,CAACgB,UAAP,CAAR,KAA+BJ,QAAQ,CAACE,OAAD,CAA9C;AACD;;AACD,WAAO,IAAP;AACD,GAlBM,CAAP;AAmBD;;AAED,SAASV,eAAT,CAAyBa,OAAzB,EAAkCC,WAAlC,EAA+C;AAC7C,MACEA,WAAW,CAAC,CAAD,CAAX,CAAeC,SAAf,CAAyBF,OAAO,CAAC,CAAD,CAAhC,EAAqCA,OAAO,CAAC,CAAD,CAA5C,KACAC,WAAW,CAAC,CAAD,CAAX,CAAeC,SAAf,CAAyBF,OAAO,CAAC,CAAD,CAAhC,EAAqCA,OAAO,CAAC,CAAD,CAA5C,CAFF,EAGE;AACA,WAAO,IAAP;AACD;AACF;;AAED,SAAStB,YAAT,EAAuBkB,eAAvB","sourcesContent":["import moment from \"moment\";\n\nfunction validateRoom(events, room, startTime, duration, event) {\n  return events.every(evt => {\n    if (event.id === evt.id) {\n      return true;\n    }\n    if (\n      testDateOverlap(\n        [evt.start, evt.end],\n        [\n          moment(new Date(startTime)),\n          moment(\n            moment(new Date(startTime))\n              .add(duration, \"m\")\n              .toDate()\n          )\n        ]\n      )\n    ) {\n      console.log(evt);\n      return parseInt(evt.room) !== parseInt(room);\n    }\n    return true;\n  });\n}\n\nfunction validateTeacher(events, teacher, startTime, duration, newEvent) {\n  return events.every(event => {\n    if (\n      testDateOverlap(\n        [event.start, event.end],\n        [\n          moment(new Date(startTime)),\n          moment(\n            moment(new Date(startTime))\n              .add(duration, \"m\")\n              .toDate()\n          )\n        ]\n      )\n    ) {\n      console.log(event);\n      return parseInt(event.resourceId) !== parseInt(teacher);\n    }\n    return true;\n  });\n}\n\nfunction testDateOverlap(dateArr, testDateArr) {\n  if (\n    testDateArr[0].isBetween(dateArr[0], dateArr[1]) ||\n    testDateArr[1].isBetween(dateArr[0], dateArr[1])\n  ) {\n    return true;\n  }\n}\n\nexport { validateRoom, validateTeacher };\n"]},"metadata":{},"sourceType":"module"}