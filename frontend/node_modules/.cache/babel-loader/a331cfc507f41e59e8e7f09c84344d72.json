{"ast":null,"code":"var _jsxFileName = \"/home/miles/webdev/jes-sched/frontend/src/components/CustomDnDCalendar.js\";\nimport React from \"react\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\";\nimport moment from \"moment\";\nimport \"react-big-calendar/lib/sass/toolbar.scss\";\nimport { WorkWeek } from \"./CustomView\";\nimport LessonEvent from \"./LessonEvent\";\nimport CustomToolbar from \"./CustomToolbar\";\nmoment.locale(\"jp\", {\n  week: {\n    dow: 1\n  }\n});\nconst localizer = momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(Calendar);\n\nclass CustomDnDCalendar extends React.Component {\n  render() {\n    const _this$props = this.props,\n          handleMove = _this$props.handleMove,\n          handleSelect = _this$props.handleSelect,\n          handleDoubleClick = _this$props.handleDoubleClick,\n          handleBtnClick = _this$props.handleBtnClick,\n          handlePayrollBtnClick = _this$props.handlePayrollBtnClick,\n          events = _this$props.events,\n          teachers = _this$props.teachers,\n          changeEvent = _this$props.changeEvent,\n          setEvents = _this$props.setEvents; // Limit displayed hours of the day\n\n    const minTime = new Date();\n    minTime.setHours(9, 0, 0);\n    const maxTime = new Date();\n    maxTime.setHours(21, 0, 0); // Style events based on event.type\n\n    const eventStyleGetter = event => {\n      // Hide a dummy event that fixes drag and drop bug\n      if (event.hide) {\n        return {\n          style: {\n            display: \"none\"\n          }\n        };\n      }\n\n      let hexColor;\n\n      switch (event.type) {\n        case \"pl\":\n          hexColor = \"#e6ba1f\";\n          break;\n\n        case \"beg\":\n          hexColor = \"#00fca5\";\n          break;\n\n        case \"el\":\n          hexColor = \"#02bd7b\";\n          break;\n\n        case \"lint\":\n          hexColor = \"#018256\";\n          break;\n\n        case \"hint\":\n          hexColor = \"#0b8a5e\";\n          break;\n\n        case \"adv\":\n          hexColor = \"#04593c\";\n          break;\n\n        case \"lb\":\n          hexColor = \"#97dd1a\";\n          break;\n\n        case \"lg1\":\n          hexColor = \"#ca161e\";\n          break;\n\n        case \"lg2\":\n          hexColor = \"#fdc100\";\n          break;\n\n        case \"lg3\":\n          hexColor = \"#0065bd\";\n          break;\n\n        case \"lg4\":\n          hexColor = \"#00ae3e\";\n          break;\n\n        case \"lg5\":\n          hexColor = \"#ff8d2a\";\n          break;\n\n        case \"lg6\":\n          hexColor = \"#8f178e\";\n          break;\n\n        case \"gs\":\n          hexColor = \"#670084\";\n          break;\n\n        case \"ct1\":\n          hexColor = \"#d90000\";\n          break;\n\n        case \"ct2\":\n          hexColor = \"#0076d0\";\n          break;\n\n        case \"ct3\":\n          hexColor = \"#008935\";\n          break;\n\n        case \"prm\":\n          hexColor = \"#7d190b\";\n          break;\n\n        default:\n          hexColor = \"#7c9ae6\";\n          break;\n      }\n\n      let backgroundColor = hexColor;\n      let style = {\n        backgroundColor: backgroundColor,\n        color: \"white\",\n        border: 0,\n        display: \"block\",\n        boxShadow: \"\"\n      };\n\n      if (event.isNewEvent) {\n        style.boxShadow = `0 0 4px 5px ${hexColor}`;\n      }\n\n      return {\n        style: style\n      };\n    };\n\n    const handleSingleClick = event => {\n      const idx = events.findIndex(e => event.id === events.id);\n      const updatedEvent = events[idx];\n      updatedEvent.isNewEvent = false;\n      changeEvent(events, event, updatedEvent, setEvents);\n    };\n\n    return React.createElement(DragAndDropCalendar, {\n      style: {\n        width: \"100vw\",\n        maxHeight: \"100vh\"\n      },\n      localizer: localizer,\n      views: {\n        week: WorkWeek,\n        day: true\n      },\n      defaultView: \"week\",\n      events: events,\n      onEventDrop: handleMove,\n      startAccessor: \"start\",\n      endAccessor: \"end\",\n      resources: teachers,\n      resourceIdAccessor: \"resourceId\",\n      resourceTitleAccessor: \"resourceTitle\",\n      selectable: true,\n      onSelectEvent: handleSingleClick,\n      onDoubleClickEvent: handleDoubleClick,\n      eventPropGetter: eventStyleGetter,\n      step: 30,\n      timeslots: 2,\n      min: minTime,\n      max: maxTime,\n      onSelectSlot: handleSelect,\n      components: {\n        event: LessonEvent,\n        toolbar: CustomToolbar({\n          handleBtnClick,\n          handlePayrollBtnClick\n        })\n      },\n      resizableAccessor: () => false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default CustomDnDCalendar;","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/frontend/src/components/CustomDnDCalendar.js"],"names":["React","Calendar","momentLocalizer","withDragAndDrop","moment","WorkWeek","LessonEvent","CustomToolbar","locale","week","dow","localizer","DragAndDropCalendar","CustomDnDCalendar","Component","render","props","handleMove","handleSelect","handleDoubleClick","handleBtnClick","handlePayrollBtnClick","events","teachers","changeEvent","setEvents","minTime","Date","setHours","maxTime","eventStyleGetter","event","hide","style","display","hexColor","type","backgroundColor","color","border","boxShadow","isNewEvent","handleSingleClick","idx","findIndex","e","id","updatedEvent","width","maxHeight","day","toolbar"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\";\nimport moment from \"moment\";\nimport \"react-big-calendar/lib/sass/toolbar.scss\";\n\nimport { WorkWeek } from \"./CustomView\";\nimport LessonEvent from \"./LessonEvent\";\nimport CustomToolbar from \"./CustomToolbar\";\n\nmoment.locale(\"jp\", {\n  week: {\n    dow: 1\n  }\n});\nconst localizer = momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(Calendar);\n\nclass CustomDnDCalendar extends React.Component {\n  render() {\n    const {\n      handleMove,\n      handleSelect,\n      handleDoubleClick,\n      handleBtnClick,\n      handlePayrollBtnClick,\n      events,\n      teachers,\n      changeEvent,\n      setEvents\n    } = this.props;\n\n    // Limit displayed hours of the day\n    const minTime = new Date();\n    minTime.setHours(9, 0, 0);\n    const maxTime = new Date();\n    maxTime.setHours(21, 0, 0);\n\n    // Style events based on event.type\n    const eventStyleGetter = event => {\n      // Hide a dummy event that fixes drag and drop bug\n      if (event.hide) {\n        return { style: { display: \"none\" } };\n      }\n      let hexColor;\n      switch (event.type) {\n        case \"pl\":\n          hexColor = \"#e6ba1f\";\n          break;\n        case \"beg\":\n          hexColor = \"#00fca5\";\n          break;\n        case \"el\":\n          hexColor = \"#02bd7b\";\n          break;\n        case \"lint\":\n          hexColor = \"#018256\";\n          break;\n        case \"hint\":\n          hexColor = \"#0b8a5e\";\n          break;\n        case \"adv\":\n          hexColor = \"#04593c\";\n          break;\n        case \"lb\":\n          hexColor = \"#97dd1a\";\n          break;\n        case \"lg1\":\n          hexColor = \"#ca161e\";\n          break;\n        case \"lg2\":\n          hexColor = \"#fdc100\";\n          break;\n        case \"lg3\":\n          hexColor = \"#0065bd\";\n          break;\n        case \"lg4\":\n          hexColor = \"#00ae3e\";\n          break;\n        case \"lg5\":\n          hexColor = \"#ff8d2a\";\n          break;\n        case \"lg6\":\n          hexColor = \"#8f178e\";\n          break;\n        case \"gs\":\n          hexColor = \"#670084\";\n          break;\n        case \"ct1\":\n          hexColor = \"#d90000\";\n          break;\n        case \"ct2\":\n          hexColor = \"#0076d0\";\n          break;\n        case \"ct3\":\n          hexColor = \"#008935\";\n          break;\n        case \"prm\":\n          hexColor = \"#7d190b\";\n          break;\n        default:\n          hexColor = \"#7c9ae6\";\n          break;\n      }\n\n      let backgroundColor = hexColor;\n      let style = {\n        backgroundColor: backgroundColor,\n        color: \"white\",\n        border: 0,\n        display: \"block\",\n        boxShadow: \"\"\n      };\n\n      if (event.isNewEvent) {\n        style.boxShadow = `0 0 4px 5px ${hexColor}`;\n      }\n      return {\n        style: style\n      };\n    };\n\n    const handleSingleClick = event => {\n      const idx = events.findIndex(e => event.id === events.id);\n      const updatedEvent = events[idx];\n      updatedEvent.isNewEvent = false;\n      changeEvent(events, event, updatedEvent, setEvents);\n    };\n\n    return (\n      <DragAndDropCalendar\n        style={{ width: \"100vw\", maxHeight: \"100vh\" }}\n        localizer={localizer}\n        views={{ week: WorkWeek, day: true }}\n        defaultView=\"week\"\n        events={events}\n        onEventDrop={handleMove}\n        startAccessor=\"start\"\n        endAccessor=\"end\"\n        resources={teachers}\n        resourceIdAccessor=\"resourceId\"\n        resourceTitleAccessor=\"resourceTitle\"\n        selectable\n        onSelectEvent={handleSingleClick}\n        onDoubleClickEvent={handleDoubleClick}\n        eventPropGetter={eventStyleGetter}\n        step={30}\n        timeslots={2}\n        min={minTime}\n        max={maxTime}\n        onSelectSlot={handleSelect}\n        components={{\n          event: LessonEvent,\n          toolbar: CustomToolbar({ handleBtnClick, handlePayrollBtnClick })\n        }}\n        resizableAccessor={() => false}\n      />\n    );\n  }\n}\n\nexport default CustomDnDCalendar;\n"]},"metadata":{},"sourceType":"module"}