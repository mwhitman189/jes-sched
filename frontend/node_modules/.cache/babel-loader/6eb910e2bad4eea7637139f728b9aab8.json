{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar _Selection = _interopRequireWildcard(require(\"./Selection\"));\n\nvar dates = _interopRequireWildcard(require(\"./utils/dates\"));\n\nvar TimeSlotUtils = _interopRequireWildcard(require(\"./utils/TimeSlots\"));\n\nvar _selection = require(\"./utils/selection\");\n\nvar _helpers = require(\"./utils/helpers\");\n\nvar DayEventLayout = _interopRequireWildcard(require(\"./utils/DayEventLayout\"));\n\nvar _TimeSlotGroup = _interopRequireDefault(require(\"./TimeSlotGroup\"));\n\nvar _TimeGridEvent = _interopRequireDefault(require(\"./TimeGridEvent\"));\n\nvar _propTypes2 = require(\"./utils/propTypes\");\n\nvar DayColumn =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(DayColumn, _React$Component);\n\n  function DayColumn() {\n    var _this;\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(_args)) || this;\n    _this.state = {\n      selecting: false,\n      timeIndicatorPosition: null\n    };\n    _this.intervalTriggered = false;\n\n    _this.renderEvents = function () {\n      var _this$props = _this.props,\n          events = _this$props.events,\n          rtl = _this$props.rtl,\n          selected = _this$props.selected,\n          accessors = _this$props.accessors,\n          localizer = _this$props.localizer,\n          getters = _this$props.getters,\n          components = _this$props.components,\n          step = _this$props.step,\n          timeslots = _this$props.timeslots,\n          dayLayoutAlgorithm = _this$props.dayLayoutAlgorithm;\n\n      var _assertThisInitialize = (0, _assertThisInitialized2.default)(_this),\n          slotMetrics = _assertThisInitialize.slotMetrics;\n\n      var messages = localizer.messages;\n      var styledEvents = DayEventLayout.getStyledEvents({\n        events: events,\n        accessors: accessors,\n        slotMetrics: slotMetrics,\n        minimumStartDifference: Math.ceil(step * timeslots / 2),\n        dayLayoutAlgorithm: dayLayoutAlgorithm\n      });\n      return styledEvents.map(function (_ref, idx) {\n        var event = _ref.event,\n            style = _ref.style;\n        var end = accessors.end(event);\n        var start = accessors.start(event);\n        var format = 'eventTimeRangeFormat';\n        var label;\n        var startsBeforeDay = slotMetrics.startsBeforeDay(start);\n        var startsAfterDay = slotMetrics.startsAfterDay(end);\n        if (startsBeforeDay) format = 'eventTimeRangeEndFormat';else if (startsAfterDay) format = 'eventTimeRangeStartFormat';\n        if (startsBeforeDay && startsAfterDay) label = messages.allDay;else label = localizer.format({\n          start: start,\n          end: end\n        }, format);\n        var continuesEarlier = startsBeforeDay || slotMetrics.startsBefore(start);\n        var continuesLater = startsAfterDay || slotMetrics.startsAfter(end);\n        return _react.default.createElement(_TimeGridEvent.default, {\n          style: style,\n          event: event,\n          label: label,\n          key: 'evt_' + idx,\n          getters: getters,\n          rtl: rtl,\n          components: components,\n          continuesEarlier: continuesEarlier,\n          continuesLater: continuesLater,\n          accessors: accessors,\n          selected: (0, _selection.isSelected)(event, selected),\n          onClick: function onClick(e) {\n            return _this._select(event, e);\n          },\n          onDoubleClick: function onDoubleClick(e) {\n            return _this._doubleClick(event, e);\n          }\n        });\n      });\n    };\n\n    _this._selectable = function () {\n      var node = (0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this));\n      var selector = _this._selector = new _Selection.default(function () {\n        return (0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this));\n      }, {\n        longPressThreshold: _this.props.longPressThreshold\n      });\n\n      var maybeSelect = function maybeSelect(box) {\n        var onSelecting = _this.props.onSelecting;\n        var current = _this.state || {};\n        var state = selectionState(box);\n        var start = state.startDate,\n            end = state.endDate;\n\n        if (onSelecting) {\n          if (dates.eq(current.startDate, start, 'minutes') && dates.eq(current.endDate, end, 'minutes') || onSelecting({\n            start: start,\n            end: end,\n            resourceId: _this.props.resource\n          }) === false) return;\n        }\n\n        if (_this.state.start !== state.start || _this.state.end !== state.end || _this.state.selecting !== state.selecting) {\n          _this.setState(state);\n        }\n      };\n\n      var selectionState = function selectionState(point) {\n        var currentSlot = _this.slotMetrics.closestSlotFromPoint(point, (0, _Selection.getBoundsForNode)(node));\n\n        if (!_this.state.selecting) {\n          _this._initialSlot = currentSlot;\n        }\n\n        var initialSlot = _this._initialSlot;\n\n        if (dates.lte(initialSlot, currentSlot)) {\n          currentSlot = _this.slotMetrics.nextSlot(currentSlot);\n        } else if (dates.gt(initialSlot, currentSlot)) {\n          initialSlot = _this.slotMetrics.nextSlot(initialSlot);\n        }\n\n        var selectRange = _this.slotMetrics.getRange(dates.min(initialSlot, currentSlot), dates.max(initialSlot, currentSlot));\n\n        return (0, _extends2.default)({}, selectRange, {\n          selecting: true,\n          top: selectRange.top + \"%\",\n          height: selectRange.height + \"%\"\n        });\n      };\n\n      var selectorClicksHandler = function selectorClicksHandler(box, actionType) {\n        if (!(0, _Selection.isEvent)((0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this)), box)) {\n          var _selectionState = selectionState(box),\n              startDate = _selectionState.startDate,\n              endDate = _selectionState.endDate;\n\n          _this._selectSlot({\n            startDate: startDate,\n            endDate: endDate,\n            action: actionType,\n            box: box\n          });\n        }\n\n        _this.setState({\n          selecting: false\n        });\n      };\n\n      selector.on('selecting', maybeSelect);\n      selector.on('selectStart', maybeSelect);\n      selector.on('beforeSelect', function (box) {\n        if (_this.props.selectable !== 'ignoreEvents') return;\n        return !(0, _Selection.isEvent)((0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this)), box);\n      });\n      selector.on('click', function (box) {\n        return selectorClicksHandler(box, 'click');\n      });\n      selector.on('doubleClick', function (box) {\n        return selectorClicksHandler(box, 'doubleClick');\n      });\n      selector.on('select', function (bounds) {\n        if (_this.state.selecting) {\n          _this._selectSlot((0, _extends2.default)({}, _this.state, {\n            action: 'select',\n            bounds: bounds\n          }));\n\n          _this.setState({\n            selecting: false\n          });\n        }\n      });\n      selector.on('reset', function () {\n        if (_this.state.selecting) {\n          _this.setState({\n            selecting: false\n          });\n        }\n      });\n    };\n\n    _this._teardownSelectable = function () {\n      if (!_this._selector) return;\n\n      _this._selector.teardown();\n\n      _this._selector = null;\n    };\n\n    _this._selectSlot = function (_ref2) {\n      var startDate = _ref2.startDate,\n          endDate = _ref2.endDate,\n          action = _ref2.action,\n          bounds = _ref2.bounds,\n          box = _ref2.box;\n      var current = startDate,\n          slots = [];\n\n      while (dates.lte(current, endDate)) {\n        slots.push(current);\n        current = dates.add(current, _this.props.step, 'minutes');\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectSlot, {\n        slots: slots,\n        start: startDate,\n        end: endDate,\n        resourceId: _this.props.resource,\n        action: action,\n        bounds: bounds,\n        box: box\n      });\n    };\n\n    _this._select = function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectEvent, args);\n    };\n\n    _this._doubleClick = function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      (0, _helpers.notify)(_this.props.onDoubleClickEvent, args);\n    };\n\n    _this.slotMetrics = TimeSlotUtils.getSlotMetrics(_this.props);\n    return _this;\n  }\n\n  var _proto = DayColumn.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.props.selectable && this._selectable();\n\n    if (this.props.isNow) {\n      this.setTimeIndicatorPositionUpdateInterval();\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this._teardownSelectable();\n\n    this.clearTimeIndicatorInterval();\n  };\n\n  _proto.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (nextProps.selectable && !this.props.selectable) this._selectable();\n    if (!nextProps.selectable && this.props.selectable) this._teardownSelectable();\n    this.slotMetrics = this.slotMetrics.update(nextProps);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    var getNowChanged = !dates.eq(prevProps.getNow(), this.props.getNow(), 'minutes');\n\n    if (prevProps.isNow !== this.props.isNow || getNowChanged) {\n      this.clearTimeIndicatorInterval();\n\n      if (this.props.isNow) {\n        var tail = !getNowChanged && dates.eq(prevProps.date, this.props.date, 'minutes') && prevState.timeIndicatorPosition === this.state.timeIndicatorPosition;\n        this.setTimeIndicatorPositionUpdateInterval(tail);\n      }\n    } else if (this.props.isNow && (!dates.eq(prevProps.min, this.props.min, 'minutes') || !dates.eq(prevProps.max, this.props.max, 'minutes'))) {\n      this.positionTimeIndicator();\n    }\n  }\n  /**\n   * @param tail {Boolean} - whether `positionTimeIndicator` call should be\n   *   deferred or called upon setting interval (`true` - if deferred);\n   */\n  ;\n\n  _proto.setTimeIndicatorPositionUpdateInterval = function setTimeIndicatorPositionUpdateInterval(tail) {\n    var _this2 = this;\n\n    if (tail === void 0) {\n      tail = false;\n    }\n\n    if (!this.intervalTriggered && !tail) {\n      this.positionTimeIndicator();\n    }\n\n    this._timeIndicatorTimeout = window.setTimeout(function () {\n      _this2.intervalTriggered = true;\n\n      _this2.positionTimeIndicator();\n\n      _this2.setTimeIndicatorPositionUpdateInterval();\n    }, 60000);\n  };\n\n  _proto.clearTimeIndicatorInterval = function clearTimeIndicatorInterval() {\n    this.intervalTriggered = false;\n    window.clearTimeout(this._timeIndicatorTimeout);\n  };\n\n  _proto.positionTimeIndicator = function positionTimeIndicator() {\n    var _this$props2 = this.props,\n        min = _this$props2.min,\n        max = _this$props2.max,\n        getNow = _this$props2.getNow;\n    var current = getNow();\n\n    if (current >= min && current <= max) {\n      var top = this.slotMetrics.getCurrentTimePosition(current);\n      this.setState({\n        timeIndicatorPosition: top\n      });\n    } else {\n      this.clearTimeIndicatorInterval();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        max = _this$props3.max,\n        rtl = _this$props3.rtl,\n        isNow = _this$props3.isNow,\n        resource = _this$props3.resource,\n        accessors = _this$props3.accessors,\n        localizer = _this$props3.localizer,\n        _this$props3$getters = _this$props3.getters,\n        dayProp = _this$props3$getters.dayProp,\n        getters = (0, _objectWithoutPropertiesLoose2.default)(_this$props3$getters, [\"dayProp\"]),\n        _this$props3$componen = _this$props3.components,\n        EventContainer = _this$props3$componen.eventContainerWrapper,\n        components = (0, _objectWithoutPropertiesLoose2.default)(_this$props3$componen, [\"eventContainerWrapper\"]);\n    var slotMetrics = this.slotMetrics;\n    var _this$state = this.state,\n        selecting = _this$state.selecting,\n        top = _this$state.top,\n        height = _this$state.height,\n        startDate = _this$state.startDate,\n        endDate = _this$state.endDate;\n    var selectDates = {\n      start: startDate,\n      end: endDate\n    };\n\n    var _dayProp = dayProp(max),\n        className = _dayProp.className,\n        style = _dayProp.style;\n\n    return _react.default.createElement(\"div\", {\n      style: style,\n      className: (0, _clsx.default)(className, 'rbc-day-slot', 'rbc-time-column', isNow && 'rbc-now', isNow && 'rbc-today', // WHY\n      selecting && 'rbc-slot-selecting')\n    }, slotMetrics.groups.map(function (grp, idx) {\n      return _react.default.createElement(_TimeSlotGroup.default, {\n        key: idx,\n        group: grp,\n        resource: resource,\n        getters: getters,\n        components: components\n      });\n    }), _react.default.createElement(EventContainer, {\n      localizer: localizer,\n      resource: resource,\n      accessors: accessors,\n      getters: getters,\n      components: components,\n      slotMetrics: slotMetrics\n    }, _react.default.createElement(\"div\", {\n      className: (0, _clsx.default)('rbc-events-container', rtl && 'rtl')\n    }, this.renderEvents())), selecting && _react.default.createElement(\"div\", {\n      className: \"rbc-slot-selection\",\n      style: {\n        top: top,\n        height: height\n      }\n    }, _react.default.createElement(\"span\", null, localizer.format(selectDates, 'selectRangeFormat'))), isNow && _react.default.createElement(\"div\", {\n      className: \"rbc-current-time-indicator\",\n      style: {\n        top: this.state.timeIndicatorPosition + \"%\"\n      }\n    })), resources.map(function (_ref, i) {\n      var id = _ref[0],\n          resource = _ref[1];\n      console.log(resource);\n      var daysEvents = (groupedEvents.get(id) || []).filter(function (event) {\n        return dates.inRange(date, accessors.start(event), accessors.end(event), 'day');\n      });\n    });\n  };\n\n  return DayColumn;\n}(_react.default.Component);\n\nDayColumn.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  events: _propTypes.default.array.isRequired,\n  step: _propTypes.default.number.isRequired,\n  date: _propTypes.default.instanceOf(Date).isRequired,\n  min: _propTypes.default.instanceOf(Date).isRequired,\n  max: _propTypes.default.instanceOf(Date).isRequired,\n  getNow: _propTypes.default.func.isRequired,\n  isNow: _propTypes.default.bool,\n  rtl: _propTypes.default.bool,\n  accessors: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  localizer: _propTypes.default.object.isRequired,\n  showMultiDayTimes: _propTypes.default.bool,\n  culture: _propTypes.default.string,\n  timeslots: _propTypes.default.number,\n  selected: _propTypes.default.object,\n  selectable: _propTypes.default.oneOf([true, false, 'ignoreEvents']),\n  eventOffset: _propTypes.default.number,\n  longPressThreshold: _propTypes.default.number,\n  onSelecting: _propTypes.default.func,\n  onSelectSlot: _propTypes.default.func.isRequired,\n  onSelectEvent: _propTypes.default.func.isRequired,\n  onDoubleClickEvent: _propTypes.default.func.isRequired,\n  className: _propTypes.default.string,\n  dragThroughEvents: _propTypes.default.bool,\n  resource: _propTypes.default.any,\n  dayLayoutAlgorithm: _propTypes2.DayLayoutAlgorithmPropType\n} : {};\nDayColumn.defaultProps = {\n  dragThroughEvents: true,\n  timeslots: 2\n};\nvar _default = DayColumn;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/frontend/node_modules/react-big-calendar/lib/DayColumn.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","exports","__esModule","default","_objectWithoutPropertiesLoose2","_extends2","_assertThisInitialized2","_inheritsLoose2","_propTypes","_react","_reactDom","_clsx","_Selection","dates","TimeSlotUtils","_selection","_helpers","DayEventLayout","_TimeSlotGroup","_TimeGridEvent","_propTypes2","DayColumn","_React$Component","_this","_len","arguments","length","_args","Array","_key","call","apply","concat","state","selecting","timeIndicatorPosition","intervalTriggered","renderEvents","_this$props","props","events","rtl","selected","accessors","localizer","getters","components","step","timeslots","dayLayoutAlgorithm","_assertThisInitialize","slotMetrics","messages","styledEvents","getStyledEvents","minimumStartDifference","Math","ceil","map","_ref","idx","event","style","end","start","format","label","startsBeforeDay","startsAfterDay","allDay","continuesEarlier","startsBefore","continuesLater","startsAfter","createElement","key","isSelected","onClick","e","_select","onDoubleClick","_doubleClick","_selectable","node","findDOMNode","selector","_selector","longPressThreshold","maybeSelect","box","onSelecting","current","selectionState","startDate","endDate","eq","resourceId","resource","setState","point","currentSlot","closestSlotFromPoint","getBoundsForNode","_initialSlot","initialSlot","lte","nextSlot","gt","selectRange","getRange","min","max","top","height","selectorClicksHandler","actionType","isEvent","_selectionState","_selectSlot","action","on","selectable","bounds","_teardownSelectable","teardown","_ref2","slots","push","add","notify","onSelectSlot","_len2","args","_key2","onSelectEvent","_len3","_key3","onDoubleClickEvent","getSlotMetrics","_proto","prototype","componentDidMount","isNow","setTimeIndicatorPositionUpdateInterval","componentWillUnmount","clearTimeIndicatorInterval","componentWillReceiveProps","nextProps","update","componentDidUpdate","prevProps","prevState","getNowChanged","getNow","tail","date","positionTimeIndicator","_this2","_timeIndicatorTimeout","window","setTimeout","clearTimeout","_this$props2","getCurrentTimePosition","render","_this$props3","_this$props3$getters","dayProp","_this$props3$componen","EventContainer","eventContainerWrapper","_this$state","selectDates","_dayProp","className","groups","grp","group","resources","i","id","console","log","daysEvents","groupedEvents","get","filter","inRange","Component","propTypes","process","env","NODE_ENV","array","isRequired","number","instanceOf","Date","func","bool","object","showMultiDayTimes","culture","string","oneOf","eventOffset","dragThroughEvents","any","DayLayoutAlgorithmPropType","defaultProps","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar _Selection = _interopRequireWildcard(require(\"./Selection\"));\n\nvar dates = _interopRequireWildcard(require(\"./utils/dates\"));\n\nvar TimeSlotUtils = _interopRequireWildcard(require(\"./utils/TimeSlots\"));\n\nvar _selection = require(\"./utils/selection\");\n\nvar _helpers = require(\"./utils/helpers\");\n\nvar DayEventLayout = _interopRequireWildcard(require(\"./utils/DayEventLayout\"));\n\nvar _TimeSlotGroup = _interopRequireDefault(require(\"./TimeSlotGroup\"));\n\nvar _TimeGridEvent = _interopRequireDefault(require(\"./TimeGridEvent\"));\n\nvar _propTypes2 = require(\"./utils/propTypes\");\n\nvar DayColumn =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(DayColumn, _React$Component);\n\n  function DayColumn() {\n    var _this;\n\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(_args)) || this;\n    _this.state = {\n      selecting: false,\n      timeIndicatorPosition: null\n    };\n    _this.intervalTriggered = false;\n\n    _this.renderEvents = function () {\n      var _this$props = _this.props,\n          events = _this$props.events,\n          rtl = _this$props.rtl,\n          selected = _this$props.selected,\n          accessors = _this$props.accessors,\n          localizer = _this$props.localizer,\n          getters = _this$props.getters,\n          components = _this$props.components,\n          step = _this$props.step,\n          timeslots = _this$props.timeslots,\n          dayLayoutAlgorithm = _this$props.dayLayoutAlgorithm;\n\n      var _assertThisInitialize = (0, _assertThisInitialized2.default)(_this),\n          slotMetrics = _assertThisInitialize.slotMetrics;\n\n      var messages = localizer.messages;\n      var styledEvents = DayEventLayout.getStyledEvents({\n        events: events,\n        accessors: accessors,\n        slotMetrics: slotMetrics,\n        minimumStartDifference: Math.ceil(step * timeslots / 2),\n        dayLayoutAlgorithm: dayLayoutAlgorithm\n      });\n      return styledEvents.map(function (_ref, idx) {\n        var event = _ref.event,\n            style = _ref.style;\n        var end = accessors.end(event);\n        var start = accessors.start(event);\n        var format = 'eventTimeRangeFormat';\n        var label;\n        var startsBeforeDay = slotMetrics.startsBeforeDay(start);\n        var startsAfterDay = slotMetrics.startsAfterDay(end);\n        if (startsBeforeDay) format = 'eventTimeRangeEndFormat';else if (startsAfterDay) format = 'eventTimeRangeStartFormat';\n        if (startsBeforeDay && startsAfterDay) label = messages.allDay;else label = localizer.format({\n          start: start,\n          end: end\n        }, format);\n        var continuesEarlier = startsBeforeDay || slotMetrics.startsBefore(start);\n        var continuesLater = startsAfterDay || slotMetrics.startsAfter(end);\n        return _react.default.createElement(_TimeGridEvent.default, {\n          style: style,\n          event: event,\n          label: label,\n          key: 'evt_' + idx,\n          getters: getters,\n          rtl: rtl,\n          components: components,\n          continuesEarlier: continuesEarlier,\n          continuesLater: continuesLater,\n          accessors: accessors,\n          selected: (0, _selection.isSelected)(event, selected),\n          onClick: function onClick(e) {\n            return _this._select(event, e);\n          },\n          onDoubleClick: function onDoubleClick(e) {\n            return _this._doubleClick(event, e);\n          }\n        });\n      });\n    };\n\n    _this._selectable = function () {\n      var node = (0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this));\n      var selector = _this._selector = new _Selection.default(function () {\n        return (0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this));\n      }, {\n        longPressThreshold: _this.props.longPressThreshold\n      });\n\n      var maybeSelect = function maybeSelect(box) {\n        var onSelecting = _this.props.onSelecting;\n        var current = _this.state || {};\n        var state = selectionState(box);\n        var start = state.startDate,\n            end = state.endDate;\n\n        if (onSelecting) {\n          if (dates.eq(current.startDate, start, 'minutes') && dates.eq(current.endDate, end, 'minutes') || onSelecting({\n            start: start,\n            end: end,\n            resourceId: _this.props.resource\n          }) === false) return;\n        }\n\n        if (_this.state.start !== state.start || _this.state.end !== state.end || _this.state.selecting !== state.selecting) {\n          _this.setState(state);\n        }\n      };\n\n      var selectionState = function selectionState(point) {\n        var currentSlot = _this.slotMetrics.closestSlotFromPoint(point, (0, _Selection.getBoundsForNode)(node));\n\n        if (!_this.state.selecting) {\n          _this._initialSlot = currentSlot;\n        }\n\n        var initialSlot = _this._initialSlot;\n\n        if (dates.lte(initialSlot, currentSlot)) {\n          currentSlot = _this.slotMetrics.nextSlot(currentSlot);\n        } else if (dates.gt(initialSlot, currentSlot)) {\n          initialSlot = _this.slotMetrics.nextSlot(initialSlot);\n        }\n\n        var selectRange = _this.slotMetrics.getRange(dates.min(initialSlot, currentSlot), dates.max(initialSlot, currentSlot));\n\n        return (0, _extends2.default)({}, selectRange, {\n          selecting: true,\n          top: selectRange.top + \"%\",\n          height: selectRange.height + \"%\"\n        });\n      };\n\n      var selectorClicksHandler = function selectorClicksHandler(box, actionType) {\n        if (!(0, _Selection.isEvent)((0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this)), box)) {\n          var _selectionState = selectionState(box),\n              startDate = _selectionState.startDate,\n              endDate = _selectionState.endDate;\n\n          _this._selectSlot({\n            startDate: startDate,\n            endDate: endDate,\n            action: actionType,\n            box: box\n          });\n        }\n\n        _this.setState({\n          selecting: false\n        });\n      };\n\n      selector.on('selecting', maybeSelect);\n      selector.on('selectStart', maybeSelect);\n      selector.on('beforeSelect', function (box) {\n        if (_this.props.selectable !== 'ignoreEvents') return;\n        return !(0, _Selection.isEvent)((0, _reactDom.findDOMNode)((0, _assertThisInitialized2.default)(_this)), box);\n      });\n      selector.on('click', function (box) {\n        return selectorClicksHandler(box, 'click');\n      });\n      selector.on('doubleClick', function (box) {\n        return selectorClicksHandler(box, 'doubleClick');\n      });\n      selector.on('select', function (bounds) {\n        if (_this.state.selecting) {\n          _this._selectSlot((0, _extends2.default)({}, _this.state, {\n            action: 'select',\n            bounds: bounds\n          }));\n\n          _this.setState({\n            selecting: false\n          });\n        }\n      });\n      selector.on('reset', function () {\n        if (_this.state.selecting) {\n          _this.setState({\n            selecting: false\n          });\n        }\n      });\n    };\n\n    _this._teardownSelectable = function () {\n      if (!_this._selector) return;\n\n      _this._selector.teardown();\n\n      _this._selector = null;\n    };\n\n    _this._selectSlot = function (_ref2) {\n      var startDate = _ref2.startDate,\n          endDate = _ref2.endDate,\n          action = _ref2.action,\n          bounds = _ref2.bounds,\n          box = _ref2.box;\n      var current = startDate,\n          slots = [];\n\n      while (dates.lte(current, endDate)) {\n        slots.push(current);\n        current = dates.add(current, _this.props.step, 'minutes');\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectSlot, {\n        slots: slots,\n        start: startDate,\n        end: endDate,\n        resourceId: _this.props.resource,\n        action: action,\n        bounds: bounds,\n        box: box\n      });\n    };\n\n    _this._select = function () {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectEvent, args);\n    };\n\n    _this._doubleClick = function () {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      (0, _helpers.notify)(_this.props.onDoubleClickEvent, args);\n    };\n\n    _this.slotMetrics = TimeSlotUtils.getSlotMetrics(_this.props);\n    return _this;\n  }\n\n  var _proto = DayColumn.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.props.selectable && this._selectable();\n\n    if (this.props.isNow) {\n      this.setTimeIndicatorPositionUpdateInterval();\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this._teardownSelectable();\n\n    this.clearTimeIndicatorInterval();\n  };\n\n  _proto.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (nextProps.selectable && !this.props.selectable) this._selectable();\n    if (!nextProps.selectable && this.props.selectable) this._teardownSelectable();\n    this.slotMetrics = this.slotMetrics.update(nextProps);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps, prevState) {\n    var getNowChanged = !dates.eq(prevProps.getNow(), this.props.getNow(), 'minutes');\n\n    if (prevProps.isNow !== this.props.isNow || getNowChanged) {\n      this.clearTimeIndicatorInterval();\n\n      if (this.props.isNow) {\n        var tail = !getNowChanged && dates.eq(prevProps.date, this.props.date, 'minutes') && prevState.timeIndicatorPosition === this.state.timeIndicatorPosition;\n        this.setTimeIndicatorPositionUpdateInterval(tail);\n      }\n    } else if (this.props.isNow && (!dates.eq(prevProps.min, this.props.min, 'minutes') || !dates.eq(prevProps.max, this.props.max, 'minutes'))) {\n      this.positionTimeIndicator();\n    }\n  }\n  /**\n   * @param tail {Boolean} - whether `positionTimeIndicator` call should be\n   *   deferred or called upon setting interval (`true` - if deferred);\n   */\n  ;\n\n  _proto.setTimeIndicatorPositionUpdateInterval = function setTimeIndicatorPositionUpdateInterval(tail) {\n    var _this2 = this;\n\n    if (tail === void 0) {\n      tail = false;\n    }\n\n    if (!this.intervalTriggered && !tail) {\n      this.positionTimeIndicator();\n    }\n\n    this._timeIndicatorTimeout = window.setTimeout(function () {\n      _this2.intervalTriggered = true;\n\n      _this2.positionTimeIndicator();\n\n      _this2.setTimeIndicatorPositionUpdateInterval();\n    }, 60000);\n  };\n\n  _proto.clearTimeIndicatorInterval = function clearTimeIndicatorInterval() {\n    this.intervalTriggered = false;\n    window.clearTimeout(this._timeIndicatorTimeout);\n  };\n\n  _proto.positionTimeIndicator = function positionTimeIndicator() {\n    var _this$props2 = this.props,\n        min = _this$props2.min,\n        max = _this$props2.max,\n        getNow = _this$props2.getNow;\n    var current = getNow();\n\n    if (current >= min && current <= max) {\n      var top = this.slotMetrics.getCurrentTimePosition(current);\n      this.setState({\n        timeIndicatorPosition: top\n      });\n    } else {\n      this.clearTimeIndicatorInterval();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        max = _this$props3.max,\n        rtl = _this$props3.rtl,\n        isNow = _this$props3.isNow,\n        resource = _this$props3.resource,\n        accessors = _this$props3.accessors,\n        localizer = _this$props3.localizer,\n        _this$props3$getters = _this$props3.getters,\n        dayProp = _this$props3$getters.dayProp,\n        getters = (0, _objectWithoutPropertiesLoose2.default)(_this$props3$getters, [\"dayProp\"]),\n        _this$props3$componen = _this$props3.components,\n        EventContainer = _this$props3$componen.eventContainerWrapper,\n        components = (0, _objectWithoutPropertiesLoose2.default)(_this$props3$componen, [\"eventContainerWrapper\"]);\n    var slotMetrics = this.slotMetrics;\n    var _this$state = this.state,\n        selecting = _this$state.selecting,\n        top = _this$state.top,\n        height = _this$state.height,\n        startDate = _this$state.startDate,\n        endDate = _this$state.endDate;\n    var selectDates = {\n      start: startDate,\n      end: endDate\n    };\n\n    var _dayProp = dayProp(max),\n        className = _dayProp.className,\n        style = _dayProp.style;\n\n    return _react.default.createElement(\"div\", {\n      style: style,\n      className: (0, _clsx.default)(className, 'rbc-day-slot', 'rbc-time-column', isNow && 'rbc-now', isNow && 'rbc-today', // WHY\n      selecting && 'rbc-slot-selecting')\n    }, slotMetrics.groups.map(function (grp, idx) {\n      return _react.default.createElement(_TimeSlotGroup.default, {\n        key: idx,\n        group: grp,\n        resource: resource,\n        getters: getters,\n        components: components\n      });\n    }), _react.default.createElement(EventContainer, {\n      localizer: localizer,\n      resource: resource,\n      accessors: accessors,\n      getters: getters,\n      components: components,\n      slotMetrics: slotMetrics\n    }, _react.default.createElement(\"div\", {\n      className: (0, _clsx.default)('rbc-events-container', rtl && 'rtl')\n    }, this.renderEvents())), selecting && _react.default.createElement(\"div\", {\n      className: \"rbc-slot-selection\",\n      style: {\n        top: top,\n        height: height\n      }\n    }, _react.default.createElement(\"span\", null, localizer.format(selectDates, 'selectRangeFormat'))), isNow && _react.default.createElement(\"div\", {\n      className: \"rbc-current-time-indicator\",\n      style: {\n        top: this.state.timeIndicatorPosition + \"%\"\n      }\n    })),resources.map(function (_ref, i) {\n      var id = _ref[0],\n          resource = _ref[1];\n      console.log(resource)\n      var daysEvents = (groupedEvents.get(id) || []).filter(function (event) {\n        return dates.inRange(date, accessors.start(event), accessors.end(event), 'day');\n      })})\n  };\n\n  return DayColumn;\n}(_react.default.Component);\n\nDayColumn.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  events: _propTypes.default.array.isRequired,\n  step: _propTypes.default.number.isRequired,\n  date: _propTypes.default.instanceOf(Date).isRequired,\n  min: _propTypes.default.instanceOf(Date).isRequired,\n  max: _propTypes.default.instanceOf(Date).isRequired,\n  getNow: _propTypes.default.func.isRequired,\n  isNow: _propTypes.default.bool,\n  rtl: _propTypes.default.bool,\n  accessors: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  localizer: _propTypes.default.object.isRequired,\n  showMultiDayTimes: _propTypes.default.bool,\n  culture: _propTypes.default.string,\n  timeslots: _propTypes.default.number,\n  selected: _propTypes.default.object,\n  selectable: _propTypes.default.oneOf([true, false, 'ignoreEvents']),\n  eventOffset: _propTypes.default.number,\n  longPressThreshold: _propTypes.default.number,\n  onSelecting: _propTypes.default.func,\n  onSelectSlot: _propTypes.default.func.isRequired,\n  onSelectEvent: _propTypes.default.func.isRequired,\n  onDoubleClickEvent: _propTypes.default.func.isRequired,\n  className: _propTypes.default.string,\n  dragThroughEvents: _propTypes.default.bool,\n  resource: _propTypes.default.any,\n  dayLayoutAlgorithm: _propTypes2.DayLayoutAlgorithmPropType\n} : {};\nDayColumn.defaultProps = {\n  dragThroughEvents: true,\n  timeslots: 2\n};\nvar _default = DayColumn;\nexports.default = _default;\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}