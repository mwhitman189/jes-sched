{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _EventRowMixin = _interopRequireDefault(require(\"./EventRowMixin\"));\n\nvar _eventLevels = require(\"./utils/eventLevels\");\n\nvar _range = _interopRequireDefault(require(\"lodash/range\"));\n\nvar isSegmentInSlot = function isSegmentInSlot(seg, slot) {\n  return seg.left <= slot && seg.right >= slot;\n};\n\nvar eventsInSlot = function eventsInSlot(segments, slot) {\n  return segments.filter(function (seg) {\n    return isSegmentInSlot(seg, slot);\n  }).length;\n};\n\nvar EventEndingRow =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(EventEndingRow, _React$Component);\n\n  function EventEndingRow() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = EventEndingRow.prototype;\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        segments = _this$props.segments,\n        slots = _this$props.slotMetrics.slots;\n    var rowSegments = (0, _eventLevels.eventLevels)(segments).levels[0];\n    var current = 1,\n        lastEnd = 1,\n        row = [];\n\n    while (current <= slots) {\n      var key = '_lvl_' + current;\n\n      var _ref = rowSegments.filter(function (seg) {\n        return isSegmentInSlot(seg, current);\n      })[0] || {},\n          event = _ref.event,\n          left = _ref.left,\n          right = _ref.right,\n          span = _ref.span; //eslint-disable-line\n\n\n      if (!event) {\n        current++;\n        continue;\n      }\n\n      var gap = Math.max(0, left - lastEnd);\n\n      if (this.canRenderSlotEvent(left, span)) {\n        var content = _EventRowMixin.default.renderEvent(this.props, event);\n\n        if (gap) {\n          row.push(_EventRowMixin.default.renderSpan(slots, gap, key + '_gap'));\n        }\n\n        row.push(_EventRowMixin.default.renderSpan(slots, span, key, content));\n        lastEnd = current = right + 1;\n      } else {\n        if (gap) {\n          row.push(_EventRowMixin.default.renderSpan(slots, gap, key + '_gap'));\n        }\n\n        row.push(_EventRowMixin.default.renderSpan(slots, 1, key, this.renderShowMore(segments, current)));\n        lastEnd = current = current + 1;\n      }\n    }\n\n    return _react.default.createElement(\"div\", {\n      className: \"rbc-row\"\n    }, row);\n  };\n\n  _proto.canRenderSlotEvent = function canRenderSlotEvent(slot, span) {\n    var segments = this.props.segments;\n    return (0, _range.default)(slot, slot + span).every(function (s) {\n      var count = eventsInSlot(segments, s);\n      return count === 1;\n    });\n  };\n\n  _proto.renderShowMore = function renderShowMore(segments, slot) {\n    var _this = this;\n\n    var localizer = this.props.localizer;\n    var count = eventsInSlot(segments, slot);\n    return count ? _react.default.createElement(\"a\", {\n      key: 'sm_' + slot,\n      href: \"#\",\n      className: 'rbc-show-more',\n      onClick: function onClick(e) {\n        return _this.showMore(slot, e);\n      }\n    }, localizer.messages.showMore(count)) : false;\n  };\n\n  _proto.showMore = function showMore(slot, e) {\n    e.preventDefault();\n    this.props.onShowMore(slot, e.target);\n  };\n\n  return EventEndingRow;\n}(_react.default.Component);\n\nEventEndingRow.propTypes = process.env.NODE_ENV !== \"production\" ? (0, _extends2.default)({\n  segments: _propTypes.default.array,\n  slots: _propTypes.default.number,\n  onShowMore: _propTypes.default.func\n}, _EventRowMixin.default.propTypes) : {};\nEventEndingRow.defaultProps = (0, _extends2.default)({}, _EventRowMixin.default.defaultProps);\nvar _default = EventEndingRow;\nexports.default = _default;\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/frontend/node_modules/react-big-calendar/lib/EventEndingRow.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","_extends2","_inheritsLoose2","_propTypes","_react","_EventRowMixin","_eventLevels","_range","isSegmentInSlot","seg","slot","left","right","eventsInSlot","segments","filter","length","EventEndingRow","_React$Component","apply","arguments","_proto","prototype","render","_this$props","props","slots","slotMetrics","rowSegments","eventLevels","levels","current","lastEnd","row","key","_ref","event","span","gap","Math","max","canRenderSlotEvent","content","renderEvent","push","renderSpan","renderShowMore","createElement","className","every","s","count","_this","localizer","href","onClick","e","showMore","messages","preventDefault","onShowMore","target","Component","propTypes","process","env","NODE_ENV","array","number","func","defaultProps","_default","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _EventRowMixin = _interopRequireDefault(require(\"./EventRowMixin\"));\n\nvar _eventLevels = require(\"./utils/eventLevels\");\n\nvar _range = _interopRequireDefault(require(\"lodash/range\"));\n\nvar isSegmentInSlot = function isSegmentInSlot(seg, slot) {\n  return seg.left <= slot && seg.right >= slot;\n};\n\nvar eventsInSlot = function eventsInSlot(segments, slot) {\n  return segments.filter(function (seg) {\n    return isSegmentInSlot(seg, slot);\n  }).length;\n};\n\nvar EventEndingRow =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inheritsLoose2.default)(EventEndingRow, _React$Component);\n\n  function EventEndingRow() {\n    return _React$Component.apply(this, arguments) || this;\n  }\n\n  var _proto = EventEndingRow.prototype;\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        segments = _this$props.segments,\n        slots = _this$props.slotMetrics.slots;\n    var rowSegments = (0, _eventLevels.eventLevels)(segments).levels[0];\n    var current = 1,\n        lastEnd = 1,\n        row = [];\n\n    while (current <= slots) {\n      var key = '_lvl_' + current;\n\n      var _ref = rowSegments.filter(function (seg) {\n        return isSegmentInSlot(seg, current);\n      })[0] || {},\n          event = _ref.event,\n          left = _ref.left,\n          right = _ref.right,\n          span = _ref.span; //eslint-disable-line\n\n\n      if (!event) {\n        current++;\n        continue;\n      }\n\n      var gap = Math.max(0, left - lastEnd);\n\n      if (this.canRenderSlotEvent(left, span)) {\n        var content = _EventRowMixin.default.renderEvent(this.props, event);\n\n        if (gap) {\n          row.push(_EventRowMixin.default.renderSpan(slots, gap, key + '_gap'));\n        }\n\n        row.push(_EventRowMixin.default.renderSpan(slots, span, key, content));\n        lastEnd = current = right + 1;\n      } else {\n        if (gap) {\n          row.push(_EventRowMixin.default.renderSpan(slots, gap, key + '_gap'));\n        }\n\n        row.push(_EventRowMixin.default.renderSpan(slots, 1, key, this.renderShowMore(segments, current)));\n        lastEnd = current = current + 1;\n      }\n    }\n\n    return _react.default.createElement(\"div\", {\n      className: \"rbc-row\"\n    }, row);\n  };\n\n  _proto.canRenderSlotEvent = function canRenderSlotEvent(slot, span) {\n    var segments = this.props.segments;\n    return (0, _range.default)(slot, slot + span).every(function (s) {\n      var count = eventsInSlot(segments, s);\n      return count === 1;\n    });\n  };\n\n  _proto.renderShowMore = function renderShowMore(segments, slot) {\n    var _this = this;\n\n    var localizer = this.props.localizer;\n    var count = eventsInSlot(segments, slot);\n    return count ? _react.default.createElement(\"a\", {\n      key: 'sm_' + slot,\n      href: \"#\",\n      className: 'rbc-show-more',\n      onClick: function onClick(e) {\n        return _this.showMore(slot, e);\n      }\n    }, localizer.messages.showMore(count)) : false;\n  };\n\n  _proto.showMore = function showMore(slot, e) {\n    e.preventDefault();\n    this.props.onShowMore(slot, e.target);\n  };\n\n  return EventEndingRow;\n}(_react.default.Component);\n\nEventEndingRow.propTypes = process.env.NODE_ENV !== \"production\" ? (0, _extends2.default)({\n  segments: _propTypes.default.array,\n  slots: _propTypes.default.number,\n  onShowMore: _propTypes.default.func\n}, _EventRowMixin.default.propTypes) : {};\nEventEndingRow.defaultProps = (0, _extends2.default)({}, _EventRowMixin.default.defaultProps);\nvar _default = EventEndingRow;\nexports.default = _default;\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}