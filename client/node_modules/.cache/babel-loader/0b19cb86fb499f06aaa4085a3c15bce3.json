{"ast":null,"code":"import _objectSpread from\"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import axios from\"axios\";import{RRule}from\"rrule\";import moment from\"moment\";var JapaneseHolidays=require(\"japanese-holidays\");var API_URI=\"http://localhost:5000\";var getRecurrences=function getRecurrences(event){var now=new Date();// Create start and end dates for the current month to calc\n// teaching minutes\nvar month_start=new Date(now.getFullYear(),now.getMonth(),1);var month_end=new Date(now.getFullYear(),now.getMonth()+2,0);// Create an array of DateTimes for the recurrence of events.\nvar rrule=new RRule({freq:RRule.WEEKLY,count:26,interval:1,dtstart:new Date(event.start)});var twoMonthsRecurrences=rrule.between(month_start,month_end);twoMonthsRecurrences.shift();return twoMonthsRecurrences;};var calcOutsideDutyMins=function calcOutsideDutyMins(eventStart,eventEnd,duration,dhStart,dhEnd){// Set beginning of duty hours\nvar dutyHoursStart=moment(new Date(eventStart).setHours(dhStart,0,0));// Calculate difference in hours between the duty hours start time and the lesson start time\nvar startDiff=dutyHoursStart.diff(eventStart,\"minutes\");var endDiff=dutyHoursStart.diff(eventEnd,\"minutes\");// Set end of duty hours\nvar dutyHoursEnd=moment(new Date(eventStart).setHours(dhEnd,0,0));// Calculate difference in hours between the duty hours end time and the lesson end time\nvar afterDhEndDiff=-dutyHoursEnd.diff(eventEnd,\"minutes\");var afterDhStartDiff=-dutyHoursEnd.diff(eventStart,\"minutes\");var outsideDutyMins;if(startDiff<=0&&afterDhEndDiff<=0){outsideDutyMins=0;return{teachingMins:duration,outsideDutyMins:outsideDutyMins};}else if(startDiff>0&&endDiff>0||afterDhEndDiff>0&&afterDhStartDiff>0){return{teachingMins:0,outsideDutyMins:duration};}else if(startDiff>0){var regularTeachingMins=duration-startDiff;return{teachingMins:regularTeachingMins,outsideDutyMins:startDiff};}else{var _regularTeachingMins=duration-afterDhEndDiff;return{teachingMins:_regularTeachingMins,outsideDutyMins:afterDhEndDiff};}};var createPayPeriodData=function createPayPeriodData(events,teacher,monthStart,monthEnd){// Creates an object of dates containing minutes worked, by work type\nvar datesData={};teacher.teachingMins=0;teacher.outsideDutyMins=0;teacher.holidayMins=0;teacher.overThresholdOneMins=0;teacher.overThresholdTwoMins=0;events.forEach(function(e){if(moment(e.start).isBetween(monthStart,monthEnd,null,\"[]\")){if(e.resourceId===teacher.resourceId){var date=e.start.getDate();var day=e.start.getDay();// Calculate number of minutes to add to first threshold to calc second threshold. (10 hours * 60 mins)\nvar secondThreshold=10*60;var teachingMins=0;var outsideDutyMins=0;var holidayMins=0;if(JapaneseHolidays.isHoliday(e.start)||e.start.getDay()===(0||1)){holidayMins=parseInt(e.duration);teacher.holidayMins+=holidayMins;}else{var totalTeachingMins=calcOutsideDutyMins(e.start,e.end,e.duration,12,21);teachingMins=totalTeachingMins.teachingMins;teacher.teachingMins+=teachingMins;outsideDutyMins=totalTeachingMins.outsideDutyMins;teacher.outsideDutyMins+=outsideDutyMins;}if(teacher.teachingMins>=teacher.otThreshold+secondThreshold){teacher.overThresholdTwoMins+=teacher.teachingMins-(teacher.otThreshold+secondThreshold);teacher.overThresholdOneMins+=secondThreshold;}else if(teacher.teachingMins>=teacher.otThreshold){teacher.overThresholdOneMins+=teacher.teachingMins-teacher.otThreshold;}// Teaching minutes object to be added to hash table\nvar dateData={resourceId:teacher,date:date,day:day,teachingMins:teachingMins,outsideDutyMins:outsideDutyMins,overThresholdOneMins:teacher.overThresholdOneMins,overThresholdTwoMins:teacher.overThresholdTwoMins,holidayMins:holidayMins,travelAllowance:0,travelExpenses:0};// If date already in hash table, add teaching minutes to existing keys, otherwise create\n// a new date object\nif(datesData[date]){datesData[date].teachingMins+=dateData.teachingMins;datesData[date].outsideDutyMins+=dateData.outsideDutyMins;datesData[date].overThresholdOneMins+=dateData.overThresholdOneMins;datesData[date].overThresholdTwoMins+=dateData.overThresholdTwoMins;datesData[date].holidayMins+=dateData.holidayMins;datesData[date].travelAllowance+=dateData.travelAllowance;datesData[date].travelExpenses+=dateData.travelExpenses;}else{datesData[date]=dateData;}}}});return datesData;};var addTeachingMins=function addTeachingMins(events,teachers,setTeachers){var now=new Date();// Create start and end dates for the current month to calc\n// teaching minutes\nvar monthStart=new Date(now.getFullYear(),now.getMonth(),1);var monthEnd=new Date(now.getFullYear(),now.getMonth()+1,0);if(teachers.length>0){// Reset teaching minutes to \"0\", then add all teaching minutes to the corresponding instructor\nteachers.forEach(function(teacher){teacher.teachingMins=0;teacher.outsideDutyMins=0;teacher.holidayMins=0;teacher.overThresholdOneMins=0;teacher.overThresholdTwoMins=0;});teachers.forEach(function(teacher){createPayPeriodData(events,teacher,monthStart,monthEnd);updateTeacher(teacher,teachers,setTeachers);});}};var getTeachers=function getTeachers(events,teachers,setTeachers){return _regeneratorRuntime.async(function getTeachers$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(axios.get(\"\".concat(API_URI,\"/teachers/\")).then(function(res){if(res.data.length>0){setTeachers(res.data);}}).then(addTeachingMins(events,teachers,setTeachers)).catch(function(err){return console.log(err);}));case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}});};var getLessons=function getLessons(events,setEvents){return _regeneratorRuntime.async(function getLessons$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(axios.get(\"\".concat(API_URI,\"/lessons/\")).then(function(res){if(res.data.length>0){res.data.map(function(event){event.start=new Date(event.start);event.end=new Date(event.end);});setEvents([].concat(_toConsumableArray(res.data),[events[0]]));}}).catch(function(err){return console.log(err);}));case 2:return _context2.abrupt(\"return\",_context2.sent);case 3:case\"end\":return _context2.stop();}}});};var addLesson=function addLesson(events,event,setEvents){var newEvents,recurrences;return _regeneratorRuntime.async(function addLesson$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:newEvents=[];if(event.recur===true){recurrences=getRecurrences(event);recurrences.map(function(r){var newEvent=_objectSpread({},event,{start:r,end:moment(r).add(event.duration,\"m\").toDate(),isNewEvent:false});if(JapaneseHolidays.isHoliday(r)){newEvent.isHoliday=true;}newEvents.push(newEvent);});}if(JapaneseHolidays.isHoliday(event.start)){event=_objectSpread({},event,{isHoliday:true});}event=_objectSpread({},event,{isNewEvent:true});newEvents.push(event);_context3.next=7;return _regeneratorRuntime.awrap(axios.post(\"\".concat(API_URI,\"/lessons/add\"),newEvents).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);}));case 7:return _context3.abrupt(\"return\",getLessons(events,setEvents));case 8:case\"end\":return _context3.stop();}}});};var addTeacher=function addTeacher(teachers,newTeacher,setTeachers){return _regeneratorRuntime.async(function addTeacher$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return _regeneratorRuntime.awrap(axios.post(\"\".concat(API_URI,\"/teachers/add\"),newTeacher).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);}));case 2:return _context4.abrupt(\"return\",setTeachers([].concat(_toConsumableArray(teachers),[newTeacher])));case 3:case\"end\":return _context4.stop();}}});};var updateTeacher=function updateTeacher(teacher,teachers,setTeachers){var idx,updatedTeachers,updatedTeacher;return _regeneratorRuntime.async(function updateTeacher$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:idx=teachers.findIndex(function(t){return t._id===teacher._id;});updatedTeachers=_toConsumableArray(teachers);updatedTeacher=_objectSpread({},teacher,{resourceTitle:teacher.resourceTitle,name:teacher.name,familyName:teacher.familyName,teachingMins:teacher.teachingMins,holidayMins:teacher.holidayMins,outsideDutyMins:teacher.outsideDutyMins,otThreshold:teacher.otThreshold,overThresholdOneMins:teacher.overThresholdOneMins,overThresholdTwoMins:teacher.overThresholdTwoMins});updatedTeachers.splice(idx,1,updatedTeacher);setTeachers(updatedTeachers);_context5.next=7;return _regeneratorRuntime.awrap(axios.put(\"\".concat(API_URI,\"/teachers/update/\").concat(teacher._id),updatedTeacher).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);}));case 7:return _context5.abrupt(\"return\",_context5.sent);case 8:case\"end\":return _context5.stop();}}});};var deleteTeacher=function deleteTeacher(teacher){return _regeneratorRuntime.async(function deleteTeacher$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _regeneratorRuntime.awrap(axios.delete(\"\".concat(API_URI,\"/teachers/delete/\").concat(teacher._id)).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);}));case 2:return _context6.abrupt(\"return\",_context6.sent);case 3:case\"end\":return _context6.stop();}}});};var deleteEvent=function deleteEvent(events,event,setEvents){var newEvents;return _regeneratorRuntime.async(function deleteEvent$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:newEvents=events.filter(function(evt){return evt._id!==event._id;});setEvents(newEvents);_context7.next=4;return _regeneratorRuntime.awrap(axios.delete(\"\".concat(API_URI,\"/lessons/delete/\").concat(event._id)).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);}));case 4:return _context7.abrupt(\"return\",_context7.sent);case 5:case\"end\":return _context7.stop();}}});};var changeEvent=function changeEvent(events,event,editedEvent,setEvents){var idx,nextEvents;return _regeneratorRuntime.async(function changeEvent$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:idx=events.findIndex(function(e){return e._id===event._id;});nextEvents=_toConsumableArray(events);nextEvents.splice(idx,1,editedEvent);setEvents(nextEvents);_context8.next=6;return _regeneratorRuntime.awrap(axios.put(\"\".concat(API_URI,\"/lessons/update/\").concat(event._id),editedEvent).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);}));case 6:return _context8.abrupt(\"return\",_context8.sent);case 7:case\"end\":return _context8.stop();}}});};var addPayment=function addPayment(newPayment){return _regeneratorRuntime.async(function addPayment$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return _regeneratorRuntime.awrap(axios.post(\"\".concat(API_URI,\"/payments/add\"),newPayment).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);}));case 2:return _context9.abrupt(\"return\",_context9.sent);case 3:case\"end\":return _context9.stop();}}});};export{getRecurrences,addTeachingMins,getTeachers,getLessons,addLesson,addTeacher,updateTeacher,deleteTeacher,deleteEvent,changeEvent,addPayment,createPayPeriodData};","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/src/helperFunctions.js"],"names":["axios","RRule","moment","JapaneseHolidays","require","API_URI","getRecurrences","event","now","Date","month_start","getFullYear","getMonth","month_end","rrule","freq","WEEKLY","count","interval","dtstart","start","twoMonthsRecurrences","between","shift","calcOutsideDutyMins","eventStart","eventEnd","duration","dhStart","dhEnd","dutyHoursStart","setHours","startDiff","diff","endDiff","dutyHoursEnd","afterDhEndDiff","afterDhStartDiff","outsideDutyMins","teachingMins","regularTeachingMins","createPayPeriodData","events","teacher","monthStart","monthEnd","datesData","holidayMins","overThresholdOneMins","overThresholdTwoMins","forEach","e","isBetween","resourceId","date","getDate","day","getDay","secondThreshold","isHoliday","parseInt","totalTeachingMins","end","otThreshold","dateData","travelAllowance","travelExpenses","addTeachingMins","teachers","setTeachers","length","updateTeacher","getTeachers","get","then","res","data","catch","err","console","log","getLessons","setEvents","map","addLesson","newEvents","recur","recurrences","r","newEvent","add","toDate","isNewEvent","push","post","addTeacher","newTeacher","idx","findIndex","t","_id","updatedTeachers","updatedTeacher","resourceTitle","name","familyName","splice","put","deleteTeacher","delete","deleteEvent","filter","evt","changeEvent","editedEvent","nextEvents","addPayment","newPayment"],"mappings":"4cAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,KAAsB,OAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CAEA,GAAIC,CAAAA,gBAAgB,CAAGC,OAAO,CAAC,mBAAD,CAA9B,CAEA,GAAMC,CAAAA,OAAO,CAAG,uBAAhB,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,KAAK,CAAI,CAC9B,GAAMC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,IAAJ,EAAZ,CACA;AACA;AACA,GAAMC,CAAAA,WAAW,CAAG,GAAID,CAAAA,IAAJ,CAASD,GAAG,CAACG,WAAJ,EAAT,CAA4BH,GAAG,CAACI,QAAJ,EAA5B,CAA4C,CAA5C,CAApB,CACA,GAAMC,CAAAA,SAAS,CAAG,GAAIJ,CAAAA,IAAJ,CAASD,GAAG,CAACG,WAAJ,EAAT,CAA4BH,GAAG,CAACI,QAAJ,GAAiB,CAA7C,CAAgD,CAAhD,CAAlB,CACA;AACA,GAAME,CAAAA,KAAK,CAAG,GAAIb,CAAAA,KAAJ,CAAU,CACtBc,IAAI,CAAEd,KAAK,CAACe,MADU,CAEtBC,KAAK,CAAE,EAFe,CAGtBC,QAAQ,CAAE,CAHY,CAItBC,OAAO,CAAE,GAAIV,CAAAA,IAAJ,CAASF,KAAK,CAACa,KAAf,CAJa,CAAV,CAAd,CAMA,GAAMC,CAAAA,oBAAoB,CAAGP,KAAK,CAACQ,OAAN,CAAcZ,WAAd,CAA2BG,SAA3B,CAA7B,CACAQ,oBAAoB,CAACE,KAArB,GACA,MAAOF,CAAAA,oBAAP,CACD,CAhBD,CAkBA,GAAMG,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAC1BC,UAD0B,CAE1BC,QAF0B,CAG1BC,QAH0B,CAI1BC,OAJ0B,CAK1BC,KAL0B,CAMvB,CACH;AACA,GAAMC,CAAAA,cAAc,CAAG5B,MAAM,CAAC,GAAIO,CAAAA,IAAJ,CAASgB,UAAT,EAAqBM,QAArB,CAA8BH,OAA9B,CAAuC,CAAvC,CAA0C,CAA1C,CAAD,CAA7B,CACA;AACA,GAAMI,CAAAA,SAAS,CAAGF,cAAc,CAACG,IAAf,CAAoBR,UAApB,CAAgC,SAAhC,CAAlB,CACA,GAAMS,CAAAA,OAAO,CAAGJ,cAAc,CAACG,IAAf,CAAoBP,QAApB,CAA8B,SAA9B,CAAhB,CACA;AACA,GAAMS,CAAAA,YAAY,CAAGjC,MAAM,CAAC,GAAIO,CAAAA,IAAJ,CAASgB,UAAT,EAAqBM,QAArB,CAA8BF,KAA9B,CAAqC,CAArC,CAAwC,CAAxC,CAAD,CAA3B,CACA;AACA,GAAMO,CAAAA,cAAc,CAAG,CAACD,YAAY,CAACF,IAAb,CAAkBP,QAAlB,CAA4B,SAA5B,CAAxB,CACA,GAAMW,CAAAA,gBAAgB,CAAG,CAACF,YAAY,CAACF,IAAb,CAAkBR,UAAlB,CAA8B,SAA9B,CAA1B,CAEA,GAAIa,CAAAA,eAAJ,CACA,GAAIN,SAAS,EAAI,CAAb,EAAkBI,cAAc,EAAI,CAAxC,CAA2C,CACzCE,eAAe,CAAG,CAAlB,CACA,MAAO,CACLC,YAAY,CAAEZ,QADT,CAELW,eAAe,CAAEA,eAFZ,CAAP,CAID,CAND,IAMO,IACJN,SAAS,CAAG,CAAZ,EAAiBE,OAAO,CAAG,CAA5B,EACCE,cAAc,CAAG,CAAjB,EAAsBC,gBAAgB,CAAG,CAFrC,CAGL,CACA,MAAO,CACLE,YAAY,CAAE,CADT,CAELD,eAAe,CAAEX,QAFZ,CAAP,CAID,CARM,IAQA,IAAIK,SAAS,CAAG,CAAhB,CAAmB,CACxB,GAAMQ,CAAAA,mBAAmB,CAAGb,QAAQ,CAAGK,SAAvC,CACA,MAAO,CACLO,YAAY,CAAEC,mBADT,CAELF,eAAe,CAAEN,SAFZ,CAAP,CAID,CANM,IAMA,CACL,GAAMQ,CAAAA,oBAAmB,CAAGb,QAAQ,CAAGS,cAAvC,CACA,MAAO,CACLG,YAAY,CAAEC,oBADT,CAELF,eAAe,CAAEF,cAFZ,CAAP,CAID,CACF,CA9CD,CAgDA,GAAMK,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,MAAD,CAASC,OAAT,CAAkBC,UAAlB,CAA8BC,QAA9B,CAA2C,CACrE;AACA,GAAMC,CAAAA,SAAS,CAAG,EAAlB,CACAH,OAAO,CAACJ,YAAR,CAAuB,CAAvB,CACAI,OAAO,CAACL,eAAR,CAA0B,CAA1B,CACAK,OAAO,CAACI,WAAR,CAAsB,CAAtB,CACAJ,OAAO,CAACK,oBAAR,CAA+B,CAA/B,CACAL,OAAO,CAACM,oBAAR,CAA+B,CAA/B,CACAP,MAAM,CAACQ,OAAP,CAAe,SAAAC,CAAC,CAAI,CAClB,GAAIjD,MAAM,CAACiD,CAAC,CAAC/B,KAAH,CAAN,CAAgBgC,SAAhB,CAA0BR,UAA1B,CAAsCC,QAAtC,CAAgD,IAAhD,CAAsD,IAAtD,CAAJ,CAAiE,CAC/D,GAAIM,CAAC,CAACE,UAAF,GAAiBV,OAAO,CAACU,UAA7B,CAAyC,CACvC,GAAMC,CAAAA,IAAI,CAAGH,CAAC,CAAC/B,KAAF,CAAQmC,OAAR,EAAb,CACA,GAAMC,CAAAA,GAAG,CAAGL,CAAC,CAAC/B,KAAF,CAAQqC,MAAR,EAAZ,CACA;AACA,GAAMC,CAAAA,eAAe,CAAG,GAAK,EAA7B,CACA,GAAInB,CAAAA,YAAY,CAAG,CAAnB,CACA,GAAID,CAAAA,eAAe,CAAG,CAAtB,CACA,GAAIS,CAAAA,WAAW,CAAG,CAAlB,CAEA,GACE5C,gBAAgB,CAACwD,SAAjB,CAA2BR,CAAC,CAAC/B,KAA7B,GACA+B,CAAC,CAAC/B,KAAF,CAAQqC,MAAR,MAAsB,GAAK,CAA3B,CAFF,CAGE,CACAV,WAAW,CAAGa,QAAQ,CAACT,CAAC,CAACxB,QAAH,CAAtB,CACAgB,OAAO,CAACI,WAAR,EAAuBA,WAAvB,CACD,CAND,IAMO,CACL,GAAMc,CAAAA,iBAAiB,CAAGrC,mBAAmB,CAC3C2B,CAAC,CAAC/B,KADyC,CAE3C+B,CAAC,CAACW,GAFyC,CAG3CX,CAAC,CAACxB,QAHyC,CAI3C,EAJ2C,CAK3C,EAL2C,CAA7C,CAOAY,YAAY,CAAGsB,iBAAiB,CAACtB,YAAjC,CACAI,OAAO,CAACJ,YAAR,EAAwBA,YAAxB,CACAD,eAAe,CAAGuB,iBAAiB,CAACvB,eAApC,CACAK,OAAO,CAACL,eAAR,EAA2BA,eAA3B,CACD,CACD,GAAIK,OAAO,CAACJ,YAAR,EAAwBI,OAAO,CAACoB,WAAR,CAAsBL,eAAlD,CAAmE,CACjEf,OAAO,CAACM,oBAAR,EACEN,OAAO,CAACJ,YAAR,EAAwBI,OAAO,CAACoB,WAAR,CAAsBL,eAA9C,CADF,CAEAf,OAAO,CAACK,oBAAR,EAAgCU,eAAhC,CACD,CAJD,IAIO,IAAIf,OAAO,CAACJ,YAAR,EAAwBI,OAAO,CAACoB,WAApC,CAAiD,CACtDpB,OAAO,CAACK,oBAAR,EACEL,OAAO,CAACJ,YAAR,CAAuBI,OAAO,CAACoB,WADjC,CAED,CACD;AACA,GAAMC,CAAAA,QAAQ,CAAG,CACfX,UAAU,CAAEV,OADG,CAEfW,IAAI,CAAEA,IAFS,CAGfE,GAAG,CAAEA,GAHU,CAIfjB,YAAY,CAAEA,YAJC,CAKfD,eAAe,CAAEA,eALF,CAMfU,oBAAoB,CAAEL,OAAO,CAACK,oBANf,CAOfC,oBAAoB,CAAEN,OAAO,CAACM,oBAPf,CAQfF,WAAW,CAAEA,WARE,CASfkB,eAAe,CAAE,CATF,CAUfC,cAAc,CAAE,CAVD,CAAjB,CAYA;AACA;AACA,GAAIpB,SAAS,CAACQ,IAAD,CAAb,CAAqB,CACnBR,SAAS,CAACQ,IAAD,CAAT,CAAgBf,YAAhB,EAAgCyB,QAAQ,CAACzB,YAAzC,CACAO,SAAS,CAACQ,IAAD,CAAT,CAAgBhB,eAAhB,EAAmC0B,QAAQ,CAAC1B,eAA5C,CACAQ,SAAS,CAACQ,IAAD,CAAT,CAAgBN,oBAAhB,EAAwCgB,QAAQ,CAAChB,oBAAjD,CACAF,SAAS,CAACQ,IAAD,CAAT,CAAgBL,oBAAhB,EAAwCe,QAAQ,CAACf,oBAAjD,CACAH,SAAS,CAACQ,IAAD,CAAT,CAAgBP,WAAhB,EAA+BiB,QAAQ,CAACjB,WAAxC,CACAD,SAAS,CAACQ,IAAD,CAAT,CAAgBW,eAAhB,EAAmCD,QAAQ,CAACC,eAA5C,CACAnB,SAAS,CAACQ,IAAD,CAAT,CAAgBY,cAAhB,EAAkCF,QAAQ,CAACE,cAA3C,CACD,CARD,IAQO,CACLpB,SAAS,CAACQ,IAAD,CAAT,CAAkBU,QAAlB,CACD,CACF,CACF,CACF,CAlED,EAmEA,MAAOlB,CAAAA,SAAP,CACD,CA5ED,CA8EA,GAAMqB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACzB,MAAD,CAAS0B,QAAT,CAAmBC,WAAnB,CAAmC,CACzD,GAAM7D,CAAAA,GAAG,CAAG,GAAIC,CAAAA,IAAJ,EAAZ,CACA;AACA;AACA,GAAMmC,CAAAA,UAAU,CAAG,GAAInC,CAAAA,IAAJ,CAASD,GAAG,CAACG,WAAJ,EAAT,CAA4BH,GAAG,CAACI,QAAJ,EAA5B,CAA4C,CAA5C,CAAnB,CACA,GAAMiC,CAAAA,QAAQ,CAAG,GAAIpC,CAAAA,IAAJ,CAASD,GAAG,CAACG,WAAJ,EAAT,CAA4BH,GAAG,CAACI,QAAJ,GAAiB,CAA7C,CAAgD,CAAhD,CAAjB,CACA,GAAIwD,QAAQ,CAACE,MAAT,CAAkB,CAAtB,CAAyB,CACvB;AACAF,QAAQ,CAAClB,OAAT,CAAiB,SAAAP,OAAO,CAAI,CAC1BA,OAAO,CAACJ,YAAR,CAAuB,CAAvB,CACAI,OAAO,CAACL,eAAR,CAA0B,CAA1B,CACAK,OAAO,CAACI,WAAR,CAAsB,CAAtB,CACAJ,OAAO,CAACK,oBAAR,CAA+B,CAA/B,CACAL,OAAO,CAACM,oBAAR,CAA+B,CAA/B,CACD,CAND,EAOAmB,QAAQ,CAAClB,OAAT,CAAiB,SAAAP,OAAO,CAAI,CAC1BF,mBAAmB,CAACC,MAAD,CAASC,OAAT,CAAkBC,UAAlB,CAA8BC,QAA9B,CAAnB,CACA0B,aAAa,CAAC5B,OAAD,CAAUyB,QAAV,CAAoBC,WAApB,CAAb,CACD,CAHD,EAID,CACF,CApBD,CAsBA,GAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAO9B,MAAP,CAAe0B,QAAf,CAAyBC,WAAzB,wKACLrE,KAAK,CACfyE,GADU,WACHpE,OADG,gBAEVqE,IAFU,CAEL,SAAAC,GAAG,CAAI,CACX,GAAIA,GAAG,CAACC,IAAJ,CAASN,MAAT,CAAkB,CAAtB,CAAyB,CACvBD,WAAW,CAACM,GAAG,CAACC,IAAL,CAAX,CACD,CACF,CANU,EAOVF,IAPU,CAOLP,eAAe,CAACzB,MAAD,CAAS0B,QAAT,CAAmBC,WAAnB,CAPV,EAQVQ,KARU,CAQJ,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EARC,CADK,sGAApB,CAYA,GAAMG,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAOvC,MAAP,CAAewC,SAAf,2KACJlF,KAAK,CACfyE,GADU,WACHpE,OADG,eAEVqE,IAFU,CAEL,SAAAC,GAAG,CAAI,CACX,GAAIA,GAAG,CAACC,IAAJ,CAASN,MAAT,CAAkB,CAAtB,CAAyB,CACvBK,GAAG,CAACC,IAAJ,CAASO,GAAT,CAAa,SAAA5E,KAAK,CAAI,CACpBA,KAAK,CAACa,KAAN,CAAc,GAAIX,CAAAA,IAAJ,CAASF,KAAK,CAACa,KAAf,CAAd,CACAb,KAAK,CAACuD,GAAN,CAAY,GAAIrD,CAAAA,IAAJ,CAASF,KAAK,CAACuD,GAAf,CAAZ,CACD,CAHD,EAIAoB,SAAS,8BAAKP,GAAG,CAACC,IAAT,GAAelC,MAAM,CAAC,CAAD,CAArB,GAAT,CACD,CACF,CAVU,EAWVmC,KAXU,CAWJ,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAXC,CADI,yGAAnB,CAeA,GAAMM,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAAO1C,MAAP,CAAenC,KAAf,CAAsB2E,SAAtB,kJACVG,SADU,CACE,EADF,CAEhB,GAAI9E,KAAK,CAAC+E,KAAN,GAAgB,IAApB,CAA0B,CAClBC,WADkB,CACJjF,cAAc,CAACC,KAAD,CADV,CAExBgF,WAAW,CAACJ,GAAZ,CAAgB,SAAAK,CAAC,CAAI,CACnB,GAAMC,CAAAA,QAAQ,kBACTlF,KADS,EAEZa,KAAK,CAAEoE,CAFK,CAGZ1B,GAAG,CAAE5D,MAAM,CAACsF,CAAD,CAAN,CACFE,GADE,CACEnF,KAAK,CAACoB,QADR,CACkB,GADlB,EAEFgE,MAFE,EAHO,CAMZC,UAAU,CAAE,KANA,EAAd,CAQA,GAAIzF,gBAAgB,CAACwD,SAAjB,CAA2B6B,CAA3B,CAAJ,CAAmC,CACjCC,QAAQ,CAAC9B,SAAT,CAAqB,IAArB,CACD,CACD0B,SAAS,CAACQ,IAAV,CAAeJ,QAAf,EACD,CAbD,EAcD,CACD,GAAItF,gBAAgB,CAACwD,SAAjB,CAA2BpD,KAAK,CAACa,KAAjC,CAAJ,CAA6C,CAC3Cb,KAAK,kBAAQA,KAAR,EAAeoD,SAAS,CAAE,IAA1B,EAAL,CACD,CACDpD,KAAK,kBAAQA,KAAR,EAAeqF,UAAU,CAAE,IAA3B,EAAL,CACAP,SAAS,CAACQ,IAAV,CAAetF,KAAf,EAvBgB,kDAwBVP,KAAK,CACR8F,IADG,WACKzF,OADL,iBAC4BgF,SAD5B,EAEHX,IAFG,CAEE,SAAAC,GAAG,QAAII,CAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACC,IAAhB,CAAJ,EAFL,EAGHC,KAHG,CAGG,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAHN,CAxBU,0CA4BTG,UAAU,CAACvC,MAAD,CAASwC,SAAT,CA5BD,iDAAlB,CA+BA,GAAMa,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAO3B,QAAP,CAAiB4B,UAAjB,CAA6B3B,WAA7B,2KACXrE,KAAK,CACR8F,IADG,WACKzF,OADL,kBAC6B2F,UAD7B,EAEHtB,IAFG,CAEE,SAAAC,GAAG,QAAII,CAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACC,IAAhB,CAAJ,EAFL,EAGHC,KAHG,CAGG,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAHN,CADW,0CAKVT,WAAW,8BAAKD,QAAL,GAAe4B,UAAf,GALD,iDAAnB,CAQA,GAAMzB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAO5B,OAAP,CAAgByB,QAAhB,CAA0BC,WAA1B,mKACd4B,GADc,CACR7B,QAAQ,CAAC8B,SAAT,CAAmB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,GAAF,GAAUzD,OAAO,CAACyD,GAAtB,EAApB,CADQ,CAEdC,eAFc,oBAEQjC,QAFR,EAIdkC,cAJc,kBAKf3D,OALe,EAMlB4D,aAAa,CAAE5D,OAAO,CAAC4D,aANL,CAOlBC,IAAI,CAAE7D,OAAO,CAAC6D,IAPI,CAQlBC,UAAU,CAAE9D,OAAO,CAAC8D,UARF,CASlBlE,YAAY,CAAEI,OAAO,CAACJ,YATJ,CAUlBQ,WAAW,CAAEJ,OAAO,CAACI,WAVH,CAWlBT,eAAe,CAAEK,OAAO,CAACL,eAXP,CAYlByB,WAAW,CAAEpB,OAAO,CAACoB,WAZH,CAalBf,oBAAoB,CAAEL,OAAO,CAACK,oBAbZ,CAclBC,oBAAoB,CAAEN,OAAO,CAACM,oBAdZ,GAgBpBoD,eAAe,CAACK,MAAhB,CAAuBT,GAAvB,CAA4B,CAA5B,CAA+BK,cAA/B,EAEAjC,WAAW,CAACgC,eAAD,CAAX,CAlBoB,kDAmBPrG,KAAK,CACf2G,GADU,WACHtG,OADG,6BACwBsC,OAAO,CAACyD,GADhC,EACuCE,cADvC,EAEV5B,IAFU,CAEL,SAAAC,GAAG,QAAII,CAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACC,IAAhB,CAAJ,EAFE,EAGVC,KAHU,CAGJ,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAHC,CAnBO,yGAAtB,CAyBA,GAAM8B,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAMjE,OAAN,8KACP3C,KAAK,CACf6G,MADU,WACAxG,OADA,6BAC2BsC,OAAO,CAACyD,GADnC,GAEV1B,IAFU,CAEL,SAAAC,GAAG,QAAII,CAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACC,IAAhB,CAAJ,EAFE,EAGVC,KAHU,CAGJ,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAHC,CADO,yGAAtB,CAOA,GAAMgC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAOpE,MAAP,CAAenC,KAAf,CAAsB2E,SAAtB,wIACZG,SADY,CACA3C,MAAM,CAACqE,MAAP,CAAc,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACZ,GAAJ,GAAY7F,KAAK,CAAC6F,GAAtB,EAAjB,CADA,CAElBlB,SAAS,CAACG,SAAD,CAAT,CAFkB,kDAGLrF,KAAK,CACf6G,MADU,WACAxG,OADA,4BAC0BE,KAAK,CAAC6F,GADhC,GAEV1B,IAFU,CAEL,SAAAC,GAAG,QAAII,CAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACC,IAAhB,CAAJ,EAFE,EAGVC,KAHU,CAGJ,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAHC,CAHK,yGAApB,CASA,GAAMmC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAOvE,MAAP,CAAenC,KAAf,CAAsB2G,WAAtB,CAAmChC,SAAnC,6IACZe,GADY,CACNvD,MAAM,CAACwD,SAAP,CAAiB,SAAA/C,CAAC,QAAIA,CAAAA,CAAC,CAACiD,GAAF,GAAU7F,KAAK,CAAC6F,GAApB,EAAlB,CADM,CAEZe,UAFY,oBAEKzE,MAFL,EAIlByE,UAAU,CAACT,MAAX,CAAkBT,GAAlB,CAAuB,CAAvB,CAA0BiB,WAA1B,EACAhC,SAAS,CAACiC,UAAD,CAAT,CALkB,kDAOLnH,KAAK,CACf2G,GADU,WACHtG,OADG,4BACuBE,KAAK,CAAC6F,GAD7B,EACoCc,WADpC,EAEVxC,IAFU,CAEL,SAAAC,GAAG,QAAII,CAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACC,IAAhB,CAAJ,EAFE,EAGVC,KAHU,CAGJ,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAHC,CAPK,yGAApB,CAaA,GAAMsC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAMC,UAAN,2KACJrH,KAAK,CACf8F,IADU,WACFzF,OADE,kBACsBgH,UADtB,EAEV3C,IAFU,CAEL,SAAAC,GAAG,QAAII,CAAAA,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACC,IAAhB,CAAJ,EAFE,EAGVC,KAHU,CAGJ,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAHC,CADI,yGAAnB,CAOA,OACExE,cADF,CAEE6D,eAFF,CAGEK,WAHF,CAIES,UAJF,CAKEG,SALF,CAMEW,UANF,CAOExB,aAPF,CAQEqC,aARF,CASEE,WATF,CAUEG,WAVF,CAWEG,UAXF,CAYE3E,mBAZF","sourcesContent":["import axios from \"axios\";\nimport { RRule } from \"rrule\";\nimport moment from \"moment\";\n\nvar JapaneseHolidays = require(\"japanese-holidays\");\n\nconst API_URI = \"http://localhost:5000\";\n\nconst getRecurrences = event => {\n  const now = new Date();\n  // Create start and end dates for the current month to calc\n  // teaching minutes\n  const month_start = new Date(now.getFullYear(), now.getMonth(), 1);\n  const month_end = new Date(now.getFullYear(), now.getMonth() + 2, 0);\n  // Create an array of DateTimes for the recurrence of events.\n  const rrule = new RRule({\n    freq: RRule.WEEKLY,\n    count: 26,\n    interval: 1,\n    dtstart: new Date(event.start)\n  });\n  const twoMonthsRecurrences = rrule.between(month_start, month_end);\n  twoMonthsRecurrences.shift();\n  return twoMonthsRecurrences;\n};\n\nconst calcOutsideDutyMins = (\n  eventStart,\n  eventEnd,\n  duration,\n  dhStart,\n  dhEnd\n) => {\n  // Set beginning of duty hours\n  const dutyHoursStart = moment(new Date(eventStart).setHours(dhStart, 0, 0));\n  // Calculate difference in hours between the duty hours start time and the lesson start time\n  const startDiff = dutyHoursStart.diff(eventStart, \"minutes\");\n  const endDiff = dutyHoursStart.diff(eventEnd, \"minutes\");\n  // Set end of duty hours\n  const dutyHoursEnd = moment(new Date(eventStart).setHours(dhEnd, 0, 0));\n  // Calculate difference in hours between the duty hours end time and the lesson end time\n  const afterDhEndDiff = -dutyHoursEnd.diff(eventEnd, \"minutes\");\n  const afterDhStartDiff = -dutyHoursEnd.diff(eventStart, \"minutes\");\n\n  let outsideDutyMins;\n  if (startDiff <= 0 && afterDhEndDiff <= 0) {\n    outsideDutyMins = 0;\n    return {\n      teachingMins: duration,\n      outsideDutyMins: outsideDutyMins\n    };\n  } else if (\n    (startDiff > 0 && endDiff > 0) ||\n    (afterDhEndDiff > 0 && afterDhStartDiff > 0)\n  ) {\n    return {\n      teachingMins: 0,\n      outsideDutyMins: duration\n    };\n  } else if (startDiff > 0) {\n    const regularTeachingMins = duration - startDiff;\n    return {\n      teachingMins: regularTeachingMins,\n      outsideDutyMins: startDiff\n    };\n  } else {\n    const regularTeachingMins = duration - afterDhEndDiff;\n    return {\n      teachingMins: regularTeachingMins,\n      outsideDutyMins: afterDhEndDiff\n    };\n  }\n};\n\nconst createPayPeriodData = (events, teacher, monthStart, monthEnd) => {\n  // Creates an object of dates containing minutes worked, by work type\n  const datesData = {};\n  teacher.teachingMins = 0;\n  teacher.outsideDutyMins = 0;\n  teacher.holidayMins = 0;\n  teacher.overThresholdOneMins = 0;\n  teacher.overThresholdTwoMins = 0;\n  events.forEach(e => {\n    if (moment(e.start).isBetween(monthStart, monthEnd, null, \"[]\")) {\n      if (e.resourceId === teacher.resourceId) {\n        const date = e.start.getDate();\n        const day = e.start.getDay();\n        // Calculate number of minutes to add to first threshold to calc second threshold. (10 hours * 60 mins)\n        const secondThreshold = 10 * 60;\n        let teachingMins = 0;\n        let outsideDutyMins = 0;\n        let holidayMins = 0;\n\n        if (\n          JapaneseHolidays.isHoliday(e.start) ||\n          e.start.getDay() === (0 || 1)\n        ) {\n          holidayMins = parseInt(e.duration);\n          teacher.holidayMins += holidayMins;\n        } else {\n          const totalTeachingMins = calcOutsideDutyMins(\n            e.start,\n            e.end,\n            e.duration,\n            12,\n            21\n          );\n          teachingMins = totalTeachingMins.teachingMins;\n          teacher.teachingMins += teachingMins;\n          outsideDutyMins = totalTeachingMins.outsideDutyMins;\n          teacher.outsideDutyMins += outsideDutyMins;\n        }\n        if (teacher.teachingMins >= teacher.otThreshold + secondThreshold) {\n          teacher.overThresholdTwoMins +=\n            teacher.teachingMins - (teacher.otThreshold + secondThreshold);\n          teacher.overThresholdOneMins += secondThreshold;\n        } else if (teacher.teachingMins >= teacher.otThreshold) {\n          teacher.overThresholdOneMins +=\n            teacher.teachingMins - teacher.otThreshold;\n        }\n        // Teaching minutes object to be added to hash table\n        const dateData = {\n          resourceId: teacher,\n          date: date,\n          day: day,\n          teachingMins: teachingMins,\n          outsideDutyMins: outsideDutyMins,\n          overThresholdOneMins: teacher.overThresholdOneMins,\n          overThresholdTwoMins: teacher.overThresholdTwoMins,\n          holidayMins: holidayMins,\n          travelAllowance: 0,\n          travelExpenses: 0\n        };\n        // If date already in hash table, add teaching minutes to existing keys, otherwise create\n        // a new date object\n        if (datesData[date]) {\n          datesData[date].teachingMins += dateData.teachingMins;\n          datesData[date].outsideDutyMins += dateData.outsideDutyMins;\n          datesData[date].overThresholdOneMins += dateData.overThresholdOneMins;\n          datesData[date].overThresholdTwoMins += dateData.overThresholdTwoMins;\n          datesData[date].holidayMins += dateData.holidayMins;\n          datesData[date].travelAllowance += dateData.travelAllowance;\n          datesData[date].travelExpenses += dateData.travelExpenses;\n        } else {\n          datesData[date] = dateData;\n        }\n      }\n    }\n  });\n  return datesData;\n};\n\nconst addTeachingMins = (events, teachers, setTeachers) => {\n  const now = new Date();\n  // Create start and end dates for the current month to calc\n  // teaching minutes\n  const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);\n  const monthEnd = new Date(now.getFullYear(), now.getMonth() + 1, 0);\n  if (teachers.length > 0) {\n    // Reset teaching minutes to \"0\", then add all teaching minutes to the corresponding instructor\n    teachers.forEach(teacher => {\n      teacher.teachingMins = 0;\n      teacher.outsideDutyMins = 0;\n      teacher.holidayMins = 0;\n      teacher.overThresholdOneMins = 0;\n      teacher.overThresholdTwoMins = 0;\n    });\n    teachers.forEach(teacher => {\n      createPayPeriodData(events, teacher, monthStart, monthEnd);\n      updateTeacher(teacher, teachers, setTeachers);\n    });\n  }\n};\n\nconst getTeachers = async (events, teachers, setTeachers) => {\n  return await axios\n    .get(`${API_URI}/teachers/`)\n    .then(res => {\n      if (res.data.length > 0) {\n        setTeachers(res.data);\n      }\n    })\n    .then(addTeachingMins(events, teachers, setTeachers))\n    .catch(err => console.log(err));\n};\n\nconst getLessons = async (events, setEvents) => {\n  return await axios\n    .get(`${API_URI}/lessons/`)\n    .then(res => {\n      if (res.data.length > 0) {\n        res.data.map(event => {\n          event.start = new Date(event.start);\n          event.end = new Date(event.end);\n        });\n        setEvents([...res.data, events[0]]);\n      }\n    })\n    .catch(err => console.log(err));\n};\n\nconst addLesson = async (events, event, setEvents) => {\n  const newEvents = [];\n  if (event.recur === true) {\n    const recurrences = getRecurrences(event);\n    recurrences.map(r => {\n      const newEvent = {\n        ...event,\n        start: r,\n        end: moment(r)\n          .add(event.duration, \"m\")\n          .toDate(),\n        isNewEvent: false\n      };\n      if (JapaneseHolidays.isHoliday(r)) {\n        newEvent.isHoliday = true;\n      }\n      newEvents.push(newEvent);\n    });\n  }\n  if (JapaneseHolidays.isHoliday(event.start)) {\n    event = { ...event, isHoliday: true };\n  }\n  event = { ...event, isNewEvent: true };\n  newEvents.push(event);\n  await axios\n    .post(`${API_URI}/lessons/add`, newEvents)\n    .then(res => console.log(res.data))\n    .catch(err => console.log(err));\n  return getLessons(events, setEvents);\n};\n\nconst addTeacher = async (teachers, newTeacher, setTeachers) => {\n  await axios\n    .post(`${API_URI}/teachers/add`, newTeacher)\n    .then(res => console.log(res.data))\n    .catch(err => console.log(err));\n  return setTeachers([...teachers, newTeacher]);\n};\n\nconst updateTeacher = async (teacher, teachers, setTeachers) => {\n  const idx = teachers.findIndex(t => t._id === teacher._id);\n  const updatedTeachers = [...teachers];\n\n  const updatedTeacher = {\n    ...teacher,\n    resourceTitle: teacher.resourceTitle,\n    name: teacher.name,\n    familyName: teacher.familyName,\n    teachingMins: teacher.teachingMins,\n    holidayMins: teacher.holidayMins,\n    outsideDutyMins: teacher.outsideDutyMins,\n    otThreshold: teacher.otThreshold,\n    overThresholdOneMins: teacher.overThresholdOneMins,\n    overThresholdTwoMins: teacher.overThresholdTwoMins\n  };\n  updatedTeachers.splice(idx, 1, updatedTeacher);\n\n  setTeachers(updatedTeachers);\n  return await axios\n    .put(`${API_URI}/teachers/update/${teacher._id}`, updatedTeacher)\n    .then(res => console.log(res.data))\n    .catch(err => console.log(err));\n};\n\nconst deleteTeacher = async teacher => {\n  return await axios\n    .delete(`${API_URI}/teachers/delete/${teacher._id}`)\n    .then(res => console.log(res.data))\n    .catch(err => console.log(err));\n};\n\nconst deleteEvent = async (events, event, setEvents) => {\n  const newEvents = events.filter(evt => evt._id !== event._id);\n  setEvents(newEvents);\n  return await axios\n    .delete(`${API_URI}/lessons/delete/${event._id}`)\n    .then(res => console.log(res.data))\n    .catch(err => console.log(err));\n};\n\nconst changeEvent = async (events, event, editedEvent, setEvents) => {\n  const idx = events.findIndex(e => e._id === event._id);\n  const nextEvents = [...events];\n\n  nextEvents.splice(idx, 1, editedEvent);\n  setEvents(nextEvents);\n\n  return await axios\n    .put(`${API_URI}/lessons/update/${event._id}`, editedEvent)\n    .then(res => console.log(res.data))\n    .catch(err => console.log(err));\n};\n\nconst addPayment = async newPayment => {\n  return await axios\n    .post(`${API_URI}/payments/add`, newPayment)\n    .then(res => console.log(res.data))\n    .catch(err => console.log(err));\n};\n\nexport {\n  getRecurrences,\n  addTeachingMins,\n  getTeachers,\n  getLessons,\n  addLesson,\n  addTeacher,\n  updateTeacher,\n  deleteTeacher,\n  deleteEvent,\n  changeEvent,\n  addPayment,\n  createPayPeriodData\n};\n"]},"metadata":{},"sourceType":"module"}