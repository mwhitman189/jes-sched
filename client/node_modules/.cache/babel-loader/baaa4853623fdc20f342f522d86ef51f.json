{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = TimeDropdown;\n\nvar _core = require(\"@emotion/core\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar styles = _interopRequireWildcard(require(\"./styles/time-dropdown\"));\n\nvar _configContext = _interopRequireDefault(require(\"../hooks/config-context\"));\n\nvar _dom = require(\"../helpers/dom\");\n\nvar _utils = require(\"../helpers/utils\");\n\nvar _constants = require(\"../helpers/constants\");\n\nvar _stateContext = _interopRequireDefault(require(\"../hooks/state-context\"));\n\nvar scrollbarWidth = null;\n\nfunction TimeDropdown(_ref) {\n  var close = _ref.close;\n\n  var _useConfig = (0, _configContext.default)(),\n      hour24Mode = _useConfig.hour24Mode;\n\n  var _useTimekeeperState = (0, _stateContext.default)(),\n      updateTime = _useTimekeeperState.updateTime,\n      mode = _useTimekeeperState.mode,\n      time = _useTimekeeperState.time;\n\n  var container = (0, _react.useRef)(null);\n  var selectedOption = (0, _react.useRef)(null);\n  var options = _constants.CLOCK_VALUES[mode].dropdown;\n  var selected = (0, _utils.getTimeValue)(mode, time).toString();\n\n  function disableBodyScroll() {\n    document.documentElement.style.paddingRight = scrollbarWidth + 'px';\n    document.documentElement.classList.add('react-timekeeper-noscroll');\n  }\n\n  function enableBodyScroll() {\n    document.documentElement.style.paddingRight = 0;\n    document.documentElement.classList.remove('react-timekeeper-noscroll');\n  }\n\n  var elsewhereClick = (0, _react.useCallback)(function (e) {\n    if (!container.current || !e.target) {\n      return;\n    }\n\n    if (!container.current.contains(e.target)) {\n      close();\n    }\n  }, [close]);\n  (0, _react.useEffect)(function () {\n    // measure scroll bar width for first time\n    if (scrollbarWidth == null) {\n      scrollbarWidth = (0, _dom.getScrollBarWidth)();\n    } // initial scroll in list\n\n\n    if (selectedOption.current && container.current) {\n      container.current.scrollTop = selectedOption.current.offsetTop;\n    } // listener to close if click outside dropdown\n\n\n    document.addEventListener('click', elsewhereClick, false);\n    return function () {\n      document.removeEventListener('click', elsewhereClick, false);\n      enableBodyScroll();\n    };\n  }, [elsewhereClick]); // select a value\n\n  function select(val) {\n    var parsed = parseInt(val, 10);\n\n    if (mode === _constants.MODE.HOURS_12 && parsed === 12) {\n      parsed = 0;\n    }\n\n    updateTime(parsed);\n    close();\n  }\n\n  return (0, _core.jsx)(\"div\", {\n    css: styles.wrapper(hour24Mode, mode),\n    ref: container,\n    onMouseEnter: disableBodyScroll,\n    onMouseLeave: enableBodyScroll,\n    className: \"react-timekeeper__time-dropdown\"\n  }, (0, _core.jsx)(\"ul\", {\n    css: styles.options,\n    className: \"react-timekeeper__dropdown-numbers\"\n  }, options.map(function (o) {\n    return (0, _core.jsx)(\"li\", {\n      ref: function ref(el) {\n        return selected === o ? selectedOption.current = el : '';\n      },\n      css: styles.option(selected === o),\n      key: o,\n      onClick: function onClick() {\n        return select(o);\n      }\n    }, o);\n  })));\n}","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/node_modules/react-timekeeper/lib/components/TimeDropdown.js"],"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","TimeDropdown","_core","_react","styles","_configContext","_dom","_utils","_constants","_stateContext","scrollbarWidth","_ref","close","_useConfig","hour24Mode","_useTimekeeperState","updateTime","mode","time","container","useRef","selectedOption","options","CLOCK_VALUES","dropdown","selected","getTimeValue","toString","disableBodyScroll","document","documentElement","style","paddingRight","classList","add","enableBodyScroll","remove","elsewhereClick","useCallback","e","current","target","contains","useEffect","getScrollBarWidth","scrollTop","offsetTop","addEventListener","removeEventListener","select","val","parsed","parseInt","MODE","HOURS_12","jsx","css","wrapper","ref","onMouseEnter","onMouseLeave","className","map","o","el","option","key","onClick"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = TimeDropdown;\n\nvar _core = require(\"@emotion/core\");\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar styles = _interopRequireWildcard(require(\"./styles/time-dropdown\"));\n\nvar _configContext = _interopRequireDefault(require(\"../hooks/config-context\"));\n\nvar _dom = require(\"../helpers/dom\");\n\nvar _utils = require(\"../helpers/utils\");\n\nvar _constants = require(\"../helpers/constants\");\n\nvar _stateContext = _interopRequireDefault(require(\"../hooks/state-context\"));\n\nvar scrollbarWidth = null;\n\nfunction TimeDropdown(_ref) {\n  var close = _ref.close;\n\n  var _useConfig = (0, _configContext.default)(),\n      hour24Mode = _useConfig.hour24Mode;\n\n  var _useTimekeeperState = (0, _stateContext.default)(),\n      updateTime = _useTimekeeperState.updateTime,\n      mode = _useTimekeeperState.mode,\n      time = _useTimekeeperState.time;\n\n  var container = (0, _react.useRef)(null);\n  var selectedOption = (0, _react.useRef)(null);\n  var options = _constants.CLOCK_VALUES[mode].dropdown;\n  var selected = (0, _utils.getTimeValue)(mode, time).toString();\n\n  function disableBodyScroll() {\n    document.documentElement.style.paddingRight = scrollbarWidth + 'px';\n    document.documentElement.classList.add('react-timekeeper-noscroll');\n  }\n\n  function enableBodyScroll() {\n    document.documentElement.style.paddingRight = 0;\n    document.documentElement.classList.remove('react-timekeeper-noscroll');\n  }\n\n  var elsewhereClick = (0, _react.useCallback)(function (e) {\n    if (!container.current || !e.target) {\n      return;\n    }\n\n    if (!container.current.contains(e.target)) {\n      close();\n    }\n  }, [close]);\n  (0, _react.useEffect)(function () {\n    // measure scroll bar width for first time\n    if (scrollbarWidth == null) {\n      scrollbarWidth = (0, _dom.getScrollBarWidth)();\n    } // initial scroll in list\n\n\n    if (selectedOption.current && container.current) {\n      container.current.scrollTop = selectedOption.current.offsetTop;\n    } // listener to close if click outside dropdown\n\n\n    document.addEventListener('click', elsewhereClick, false);\n    return function () {\n      document.removeEventListener('click', elsewhereClick, false);\n      enableBodyScroll();\n    };\n  }, [elsewhereClick]); // select a value\n\n  function select(val) {\n    var parsed = parseInt(val, 10);\n\n    if (mode === _constants.MODE.HOURS_12 && parsed === 12) {\n      parsed = 0;\n    }\n\n    updateTime(parsed);\n    close();\n  }\n\n  return (0, _core.jsx)(\"div\", {\n    css: styles.wrapper(hour24Mode, mode),\n    ref: container,\n    onMouseEnter: disableBodyScroll,\n    onMouseLeave: enableBodyScroll,\n    className: \"react-timekeeper__time-dropdown\"\n  }, (0, _core.jsx)(\"ul\", {\n    css: styles.options,\n    className: \"react-timekeeper__dropdown-numbers\"\n  }, options.map(function (o) {\n    return (0, _core.jsx)(\"li\", {\n      ref: function ref(el) {\n        return selected === o ? selectedOption.current = el : '';\n      },\n      css: styles.option(selected === o),\n      key: o,\n      onClick: function onClick() {\n        return select(o);\n      }\n    }, o);\n  })));\n}"]},"metadata":{},"sourceType":"script"}