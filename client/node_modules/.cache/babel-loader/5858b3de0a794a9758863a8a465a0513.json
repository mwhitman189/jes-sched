{"ast":null,"code":"import axios from \"axios\";\n\nconst authReducer = async (dispatch, getState) => {\n  dispatch({\n    type: \"USER_LOADING\"\n  });\n  const token = getState().auth.token;\n  const config = {\n    headers: {\n      \"Content-type\": \"application/json\"\n    }\n  }; // If token, add to headers\n\n  if (token) config.headers[\"x-auth-token\"] = token;\n  await axios.post(\"/api/auth/user\", config).then(res => {\n    // Cookies.set(\"token\", res.data.token);\n    dispatch({\n      type: \"USER_LOADED\",\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: \"AUTH_ERROR\"\n    });\n  });\n};\n\nexport default authReducer;","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/src/reducers/loadUserReducer.js"],"names":["axios","authReducer","dispatch","getState","type","token","auth","config","headers","post","then","res","payload","data","catch","err"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,WAAW,GAAG,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AAChDD,EAAAA,QAAQ,CAAC;AAAEE,IAAAA,IAAI,EAAE;AAAR,GAAD,CAAR;AAEA,QAAMC,KAAK,GAAGF,QAAQ,GAAGG,IAAX,CAAgBD,KAA9B;AAEA,QAAME,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AADI,GAAf,CALgD,CAWhD;;AACA,MAAIH,KAAJ,EAAWE,MAAM,CAACC,OAAP,CAAe,cAAf,IAAiCH,KAAjC;AAEX,QAAML,KAAK,CACRS,IADG,CACE,gBADF,EACoBF,MADpB,EAEHG,IAFG,CAEGC,GAAD,IAAS;AACb;AACAT,IAAAA,QAAQ,CAAC;AACPE,MAAAA,IAAI,EAAE,aADC;AAEPQ,MAAAA,OAAO,EAAED,GAAG,CAACE;AAFN,KAAD,CAAR;AAID,GARG,EASHC,KATG,CASIC,GAAD,IAAS;AACdb,IAAAA,QAAQ,CAAC;AAAEE,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACD,GAXG,CAAN;AAYD,CA1BD;;AA2BA,eAAeH,WAAf","sourcesContent":["import axios from \"axios\";\n\nconst authReducer = async (dispatch, getState) => {\n  dispatch({ type: \"USER_LOADING\" });\n\n  const token = getState().auth.token;\n\n  const config = {\n    headers: {\n      \"Content-type\": \"application/json\",\n    },\n  };\n\n  // If token, add to headers\n  if (token) config.headers[\"x-auth-token\"] = token;\n\n  await axios\n    .post(\"/api/auth/user\", config)\n    .then((res) => {\n      // Cookies.set(\"token\", res.data.token);\n      dispatch({\n        type: \"USER_LOADED\",\n        payload: res.data,\n      });\n    })\n    .catch((err) => {\n      dispatch({ type: \"AUTH_ERROR\" });\n    });\n};\nexport default authReducer;\n"]},"metadata":{},"sourceType":"module"}