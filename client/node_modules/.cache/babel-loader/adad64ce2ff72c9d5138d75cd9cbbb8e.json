{"ast":null,"code":"import _slicedToArray from \"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/miles/webdev/jes-sched/client/src/context/UserContext.js\";\nimport React, { useReducer, createContext } from \"react\";\nimport axios from \"axios\";\nimport authReducer from \"../reducers/authReducer\";\nimport { tokenConfig } from \"../reducers/loadUserReducer\";\nconst initialState = {\n  token: localStorage.getItem(\"token\"),\n  isAuthenticated: null,\n  isLoading: false,\n  user: null\n};\nexport const UserContext = createContext();\nexport function UserProvider(props) {\n  const _useReducer = useReducer(authReducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        user = _useReducer2[0],\n        dispatch = _useReducer2[1];\n\n  async () => {\n    return await axios.get(\"/api/auth/user\", tokenConfig({\n      token: localStorage.getItem(\"token\")\n    })).then(res => {\n      dispatch({\n        type: \"USER_LOADED\",\n        payload: res.data\n      });\n    }).catch(err => {\n      dispatch({\n        type: \"AUTH_ERROR\"\n      });\n    });\n  };\n\n  return React.createElement(UserContext.Provider, {\n    value: {\n      user,\n      dispatch\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, props.children);\n}","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/src/context/UserContext.js"],"names":["React","useReducer","createContext","axios","authReducer","tokenConfig","initialState","token","localStorage","getItem","isAuthenticated","isLoading","user","UserContext","UserProvider","props","dispatch","get","then","res","type","payload","data","catch","err","children"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,aAA5B,QAAiD,OAAjD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,SAASC,WAAT,QAA4B,6BAA5B;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADY;AAEnBC,EAAAA,eAAe,EAAE,IAFE;AAGnBC,EAAAA,SAAS,EAAE,KAHQ;AAInBC,EAAAA,IAAI,EAAE;AAJa,CAArB;AAOA,OAAO,MAAMC,WAAW,GAAGX,aAAa,EAAjC;AAEP,OAAO,SAASY,YAAT,CAAsBC,KAAtB,EAA6B;AAAA,sBACTd,UAAU,CAACG,WAAD,EAAcE,YAAd,CADD;AAAA;AAAA,QAC3BM,IAD2B;AAAA,QACrBI,QADqB;;AAGlC,cAAY;AACV,WAAO,MAAMb,KAAK,CACfc,GADU,CAET,gBAFS,EAGTZ,WAAW,CAAC;AAAEE,MAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB;AAAT,KAAD,CAHF,EAKVS,IALU,CAKJC,GAAD,IAAS;AACbH,MAAAA,QAAQ,CAAC;AACPI,QAAAA,IAAI,EAAE,aADC;AAEPC,QAAAA,OAAO,EAAEF,GAAG,CAACG;AAFN,OAAD,CAAR;AAID,KAVU,EAWVC,KAXU,CAWHC,GAAD,IAAS;AACdR,MAAAA,QAAQ,CAAC;AAAEI,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAR;AACD,KAbU,CAAb;AAcD,GAfD;;AAiBA,SACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAER,MAAAA,IAAF;AAAQI,MAAAA;AAAR,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,KAAK,CAACU,QADT,CADF;AAKD","sourcesContent":["import React, { useReducer, createContext } from \"react\";\nimport axios from \"axios\";\nimport authReducer from \"../reducers/authReducer\";\nimport { tokenConfig } from \"../reducers/loadUserReducer\";\n\nconst initialState = {\n  token: localStorage.getItem(\"token\"),\n  isAuthenticated: null,\n  isLoading: false,\n  user: null,\n};\n\nexport const UserContext = createContext();\n\nexport function UserProvider(props) {\n  const [user, dispatch] = useReducer(authReducer, initialState);\n\n  async () => {\n    return await axios\n      .get(\n        \"/api/auth/user\",\n        tokenConfig({ token: localStorage.getItem(\"token\") })\n      )\n      .then((res) => {\n        dispatch({\n          type: \"USER_LOADED\",\n          payload: res.data,\n        });\n      })\n      .catch((err) => {\n        dispatch({ type: \"AUTH_ERROR\" });\n      });\n  };\n\n  return (\n    <UserContext.Provider value={{ user, dispatch }}>\n      {props.children}\n    </UserContext.Provider>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}