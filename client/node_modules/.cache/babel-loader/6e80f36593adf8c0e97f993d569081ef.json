{"ast":null,"code":"import _slicedToArray from \"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/miles/webdev/jes-sched/client/src/components/SignUpForm.js\";\nimport React, { useContext, useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nimport loadUser from \"../reducers/loadUserReducer\";\nimport useInputState from \"../hooks/useInputState\";\nimport useToggleState from \"../hooks/useToggleState\";\nimport { UserContext } from \"../context/UserContext\";\nimport { ErrorsContext } from \"../context/ErrorsContext\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Container from \"@material-ui/core/Container\";\nimport Link from \"@material-ui/core/Link\";\nimport Typography from \"@material-ui/core/Typography\";\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\"\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: \"100%\",\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(3)\n  },\n  formGreeting: {\n    fontSize: \"1.5rem\",\n    margin: 0,\n    padding: \".2rem\"\n  },\n  formErrors: {\n    color: \"red\",\n    fontSize: \"1rem\",\n    margin: 0,\n    padding: \".2rem\"\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}));\nexport default function SignUpForm() {\n  const classes = useStyles();\n\n  const _useContext = useContext(UserContext),\n        user = _useContext.user,\n        dispatch = _useContext.dispatch;\n\n  const _useContext2 = useContext(ErrorsContext),\n        errors = _useContext2.errors,\n        errorsDispatch = _useContext2.errorsDispatch;\n\n  const _useInputState = useInputState(\"\"),\n        _useInputState2 = _slicedToArray(_useInputState, 2),\n        givenName = _useInputState2[0],\n        updateGivenName = _useInputState2[1];\n\n  const _useInputState3 = useInputState(\"\"),\n        _useInputState4 = _slicedToArray(_useInputState3, 2),\n        familyName = _useInputState4[0],\n        updateFamilyName = _useInputState4[1];\n\n  const _useInputState5 = useInputState(\"\"),\n        _useInputState6 = _slicedToArray(_useInputState5, 2),\n        email = _useInputState6[0],\n        updateEmail = _useInputState6[1];\n\n  const _useInputState7 = useInputState(\"\"),\n        _useInputState8 = _slicedToArray(_useInputState7, 2),\n        password = _useInputState8[0],\n        updatePassword = _useInputState8[1];\n\n  const _useToggleState = useToggleState(false),\n        _useToggleState2 = _slicedToArray(_useToggleState, 2),\n        isLoading = _useToggleState2[0],\n        toggleIsLoading = _useToggleState2[1];\n\n  useEffect(() => {\n    loadUser(user, dispatch);\n  }, [user]);\n\n  const handleSignup = async e => {\n    e.preventDefault();\n    toggleIsLoading(true);\n    const user = {\n      givenName: givenName,\n      familyName: familyName,\n      email: email,\n      password: password\n    };\n    await axios.post(\"/api/users/signup\", user).then(res => {\n      dispatch({\n        type: \"REGISTER_SUCCESS\",\n        payload: res.data\n      });\n      axios.post(\"/api/auth\", user).then(res => {\n        dispatch({\n          type: \"USER_LOADED\",\n          payload: res.data\n        });\n      }).catch(err => {\n        dispatch({\n          type: \"LOGIN_FAILURE\"\n        });\n        errorsDispatch({\n          type: \"GET_ERRORS\",\n          msg: err.response.data.msg\n        });\n      });\n      return console.log(\"Success! Logged In\");\n    }).catch(err => {\n      dispatch({\n        type: \"REGISTER_FAIL\"\n      });\n      errorsDispatch({\n        type: \"GET_ERRORS\",\n        msg: err.response.data.msg\n      });\n      return console.log(err.response.data.msg);\n    });\n    toggleIsLoading(false);\n    return false;\n  };\n\n  return React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(CssBaseline, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, React.createElement(Avatar, {\n    className: classes.avatar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(LockOutlinedIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  })), errors.msg ? React.createElement(Typography, {\n    className: classes.formErrors,\n    component: \"h1\",\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, errors.msg) : React.createElement(Typography, {\n    className: classes.formGreeting,\n    component: \"h1\",\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"Sign up\"), React.createElement(\"form\", {\n    className: classes.form,\n    noValidate: true,\n    onSubmit: handleSignup,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    autoComplete: \"fname\",\n    name: \"givenName\",\n    value: givenName,\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    id: \"givenName\",\n    label: \"Given Name\",\n    onChange: updateGivenName,\n    autoFocus: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    name: \"familyName\",\n    value: familyName,\n    variant: \"outlined\",\n    required: true,\n    fullWidth: true,\n    id: \"familyName\",\n    label: \"Family Name\",\n    autoComplete: \"lname\",\n    onChange: updateFamilyName,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    variant: \"outlined\",\n    value: email,\n    required: true,\n    fullWidth: true,\n    id: \"email\",\n    label: \"Email Address\",\n    name: \"email\",\n    autoComplete: \"email\",\n    onChange: updateEmail,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  })), React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    variant: \"outlined\",\n    value: password,\n    required: true,\n    fullWidth: true,\n    name: \"password\",\n    label: \"Password\",\n    type: \"password\",\n    id: \"password\",\n    autoComplete: \"current-password\",\n    onChange: updatePassword,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }))), React.createElement(Button, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.submit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, \"Sign Up\"), React.createElement(Grid, {\n    container: true,\n    justify: \"flex-end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, React.createElement(Link, {\n    href: \"/login\",\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, \"Already have an account? Log in\"))))));\n}","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/src/components/SignUpForm.js"],"names":["React","useContext","useEffect","Redirect","axios","loadUser","useInputState","useToggleState","UserContext","ErrorsContext","makeStyles","Avatar","Button","CssBaseline","TextField","Grid","LockOutlinedIcon","Container","Link","Typography","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","formGreeting","fontSize","padding","formErrors","color","submit","SignUpForm","classes","user","dispatch","errors","errorsDispatch","givenName","updateGivenName","familyName","updateFamilyName","email","updateEmail","password","updatePassword","isLoading","toggleIsLoading","handleSignup","e","preventDefault","post","then","res","type","payload","data","catch","err","msg","response","console","log"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nimport loadUser from \"../reducers/loadUserReducer\";\nimport useInputState from \"../hooks/useInputState\";\nimport useToggleState from \"../hooks/useToggleState\";\nimport { UserContext } from \"../context/UserContext\";\nimport { ErrorsContext } from \"../context/ErrorsContext\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport Container from \"@material-ui/core/Container\";\nimport Link from \"@material-ui/core/Link\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(3),\n  },\n  formGreeting: {\n    fontSize: \"1.5rem\",\n    margin: 0,\n    padding: \".2rem\",\n  },\n  formErrors: {\n    color: \"red\",\n    fontSize: \"1rem\",\n    margin: 0,\n    padding: \".2rem\",\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignUpForm() {\n  const classes = useStyles();\n  const { user, dispatch } = useContext(UserContext);\n  const { errors, errorsDispatch } = useContext(ErrorsContext);\n\n  const [givenName, updateGivenName] = useInputState(\"\");\n  const [familyName, updateFamilyName] = useInputState(\"\");\n  const [email, updateEmail] = useInputState(\"\");\n  const [password, updatePassword] = useInputState(\"\");\n  const [isLoading, toggleIsLoading] = useToggleState(false);\n\n  useEffect(() => {\n    loadUser(user, dispatch);\n  }, [user]);\n\n  const handleSignup = async (e) => {\n    e.preventDefault();\n    toggleIsLoading(true);\n    const user = {\n      givenName: givenName,\n      familyName: familyName,\n      email: email,\n      password: password,\n    };\n    await axios\n      .post(\"/api/users/signup\", user)\n      .then((res) => {\n        dispatch({\n          type: \"REGISTER_SUCCESS\",\n          payload: res.data,\n        });\n        axios\n          .post(\"/api/auth\", user)\n          .then((res) => {\n            dispatch({\n              type: \"USER_LOADED\",\n              payload: res.data,\n            });\n          })\n          .catch((err) => {\n            dispatch({ type: \"LOGIN_FAILURE\" });\n            errorsDispatch({\n              type: \"GET_ERRORS\",\n              msg: err.response.data.msg,\n            });\n          });\n        return console.log(\"Success! Logged In\");\n      })\n      .catch((err) => {\n        dispatch({ type: \"REGISTER_FAIL\" });\n        errorsDispatch({\n          type: \"GET_ERRORS\",\n          msg: err.response.data.msg,\n        });\n        return console.log(err.response.data.msg);\n      });\n    toggleIsLoading(false);\n    return false;\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        {errors.msg ? (\n          <Typography\n            className={classes.formErrors}\n            component=\"h1\"\n            variant=\"h5\"\n          >\n            {errors.msg}\n          </Typography>\n        ) : (\n          <Typography\n            className={classes.formGreeting}\n            component=\"h1\"\n            variant=\"h5\"\n          >\n            Sign up\n          </Typography>\n        )}\n\n        <form className={classes.form} noValidate onSubmit={handleSignup}>\n          <Grid container spacing={2}>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                autoComplete=\"fname\"\n                name=\"givenName\"\n                value={givenName}\n                variant=\"outlined\"\n                required\n                fullWidth\n                id=\"givenName\"\n                label=\"Given Name\"\n                onChange={updateGivenName}\n                autoFocus\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                name=\"familyName\"\n                value={familyName}\n                variant=\"outlined\"\n                required\n                fullWidth\n                id=\"familyName\"\n                label=\"Family Name\"\n                autoComplete=\"lname\"\n                onChange={updateFamilyName}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                value={email}\n                required\n                fullWidth\n                id=\"email\"\n                label=\"Email Address\"\n                name=\"email\"\n                autoComplete=\"email\"\n                onChange={updateEmail}\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                variant=\"outlined\"\n                value={password}\n                required\n                fullWidth\n                name=\"password\"\n                label=\"Password\"\n                type=\"password\"\n                id=\"password\"\n                autoComplete=\"current-password\"\n                onChange={updatePassword}\n              />\n            </Grid>\n          </Grid>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            Sign Up\n          </Button>\n          <Grid container justify=\"flex-end\">\n            <Grid item>\n              <Link href=\"/login\" variant=\"body2\">\n                Already have an account? Log in\n              </Link>\n            </Grid>\n          </Grid>\n        </form>\n      </div>\n    </Container>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}