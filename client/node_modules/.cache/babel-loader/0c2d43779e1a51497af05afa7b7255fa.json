{"ast":null,"code":"import _objectSpread from \"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport axios from \"axios\";\nimport { createPayPeriodData } from \"../helperFunctions\";\nimport { tokenConfig } from \"../reducers/loadUserReducer\";\nimport uuid from \"uuid/v4\";\n\nconst updateTeacher = async (state, teacher) => {\n  await axios.put(`/api/teachers/update/${teacher._id}`, teacher).then(res => console.log(res.data)).catch(err => console.log(err));\n  return state.map(t => t.id === teacher.id ? _objectSpread({}, t, {\n    resourceTitle: teacher.resourceTitle,\n    name: teacher.name,\n    familyName: teacher.familyName,\n    teachingMins: teacher.teachingMins,\n    holidayMins: teacher.holidayMins,\n    outsideDutyMins: teacher.outsideDutyMins,\n    otThreshold: teacher.otThreshold,\n    overThresholdOneMins: teacher.overThresholdOneMins,\n    overThresholdTwoMins: teacher.overThresholdTwoMins\n  }) : t);\n};\n\nconst addTeachingMins = (teachers, events) => {\n  const now = new Date(); // Create start and end dates for the current month to calc\n  // teaching minutes\n\n  const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);\n  const monthEnd = new Date(now.getFullYear(), now.getMonth() + 1, 0);\n\n  if (teachers.length > 0) {\n    // Reset teaching minutes to \"0\", then add all teaching minutes to the corresponding instructor\n    teachers.forEach(teacher => {\n      teacher.teachingMins = 0;\n      teacher.outsideDutyMins = 0;\n      teacher.holidayMins = 0;\n      teacher.overThresholdOneMins = 0;\n      teacher.overThresholdTwoMins = 0;\n    });\n    teachers.forEach(teacher => {\n      createPayPeriodData(events, teacher, monthStart, monthEnd);\n      updateTeacher(teacher);\n    });\n  }\n};\n\nconst teachersReducer = async (state, action) => {\n  switch (action.type) {\n    case \"GET_TEACHERS\":\n      let teachersArr;\n      await axios.get(\"/api/teachers\", tokenConfig(action.user)).then(res => {\n        teachersArr = res.data;\n        console.log(teachersArr);\n      }).catch(err => console.log(err));\n      return [...state, teachersArr];\n\n    case \"ADD_TEACHER\":\n      const teacher = action.teacher && action.teacher;\n\n      if (action.teacher) {}\n\n      await axios.post(\"/api/teachers/add\", action.teacher, tokenConfig(action.user)).then(res => console.log(res.data)).catch(err => console.log(err));\n      return [...state, {\n        id: uuid(),\n        teacher\n      }];\n\n    case \"DELETE_TEACHER\":\n      await axios.delete(`/api/teachers/delete/${teacher._id}`, tokenConfig(action.user)).then(res => console.log(res.data)).catch(err => console.log(err));\n      return state.filter(t => t.id !== action.id);\n\n    case \"UPDATE_TEACHER\":\n      return updateTeacher(state, teacher);\n\n    case \"ADD_TEACHING_MINS\":\n      return addTeachingMins(state, action.events);\n\n    default:\n      return state;\n  }\n};\n\nexport default teachersReducer;","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/src/reducers/teachersReducer.js"],"names":["axios","createPayPeriodData","tokenConfig","uuid","updateTeacher","state","teacher","put","_id","then","res","console","log","data","catch","err","map","t","id","resourceTitle","name","familyName","teachingMins","holidayMins","outsideDutyMins","otThreshold","overThresholdOneMins","overThresholdTwoMins","addTeachingMins","teachers","events","now","Date","monthStart","getFullYear","getMonth","monthEnd","length","forEach","teachersReducer","action","type","teachersArr","get","user","post","delete","filter"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { createPayPeriodData } from \"../helperFunctions\";\nimport { tokenConfig } from \"../reducers/loadUserReducer\";\nimport uuid from \"uuid/v4\";\n\nconst updateTeacher = async (state, teacher) => {\n  await axios\n    .put(`/api/teachers/update/${teacher._id}`, teacher)\n    .then((res) => console.log(res.data))\n    .catch((err) => console.log(err));\n  return state.map((t) =>\n    t.id === teacher.id\n      ? {\n          ...t,\n          resourceTitle: teacher.resourceTitle,\n          name: teacher.name,\n          familyName: teacher.familyName,\n          teachingMins: teacher.teachingMins,\n          holidayMins: teacher.holidayMins,\n          outsideDutyMins: teacher.outsideDutyMins,\n          otThreshold: teacher.otThreshold,\n          overThresholdOneMins: teacher.overThresholdOneMins,\n          overThresholdTwoMins: teacher.overThresholdTwoMins,\n        }\n      : t\n  );\n};\n\nconst addTeachingMins = (teachers, events) => {\n  const now = new Date();\n  // Create start and end dates for the current month to calc\n  // teaching minutes\n  const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);\n  const monthEnd = new Date(now.getFullYear(), now.getMonth() + 1, 0);\n  if (teachers.length > 0) {\n    // Reset teaching minutes to \"0\", then add all teaching minutes to the corresponding instructor\n    teachers.forEach((teacher) => {\n      teacher.teachingMins = 0;\n      teacher.outsideDutyMins = 0;\n      teacher.holidayMins = 0;\n      teacher.overThresholdOneMins = 0;\n      teacher.overThresholdTwoMins = 0;\n    });\n\n    teachers.forEach((teacher) => {\n      createPayPeriodData(events, teacher, monthStart, monthEnd);\n      updateTeacher(teacher);\n    });\n  }\n};\n\nconst teachersReducer = async (state, action) => {\n  switch (action.type) {\n    case \"GET_TEACHERS\":\n      let teachersArr;\n      await axios\n        .get(\"/api/teachers\", tokenConfig(action.user))\n        .then((res) => {\n          teachersArr = res.data;\n          console.log(teachersArr);\n        })\n        .catch((err) => console.log(err));\n      return [...state, teachersArr];\n\n    case \"ADD_TEACHER\":\n      const teacher = action.teacher && action.teacher;\n      if (action.teacher) {\n      }\n      await axios\n        .post(\"/api/teachers/add\", action.teacher, tokenConfig(action.user))\n        .then((res) => console.log(res.data))\n        .catch((err) => console.log(err));\n      return [...state, { id: uuid(), teacher }];\n\n    case \"DELETE_TEACHER\":\n      await axios\n        .delete(`/api/teachers/delete/${teacher._id}`, tokenConfig(action.user))\n        .then((res) => console.log(res.data))\n        .catch((err) => console.log(err));\n      return state.filter((t) => t.id !== action.id);\n\n    case \"UPDATE_TEACHER\":\n      return updateTeacher(state, teacher);\n\n    case \"ADD_TEACHING_MINS\":\n      return addTeachingMins(state, action.events);\n\n    default:\n      return state;\n  }\n};\nexport default teachersReducer;\n"]},"metadata":{},"sourceType":"module"}