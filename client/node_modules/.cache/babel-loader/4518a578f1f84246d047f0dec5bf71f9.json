{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = ClockWrapper;\n\nvar _core = require(\"@emotion/core\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _configContext = _interopRequireDefault(require(\"../hooks/config-context\"));\n\nvar _Clock = _interopRequireDefault(require(\"./Clock\"));\n\nvar _Meridiems = _interopRequireDefault(require(\"./Meridiems\"));\n\nvar _clockWrapper = _interopRequireDefault(require(\"./styles/clock-wrapper\"));\n\nvar _clockEvents = _interopRequireDefault(require(\"../hooks/clock-events\"));\n\nvar _constants = require(\"../helpers/constants\");\n\nvar _utils = require(\"../helpers/utils\");\n\nvar _stateContext = _interopRequireDefault(require(\"../hooks/state-context\"));\n\nfunction ClockWrapper() {\n  var config = (0, _configContext.default)(); // clock events\n\n  var clock = (0, _react.useRef)(null);\n\n  var _useClockEvents = (0, _clockEvents.default)(clock, calculateTimeValue),\n      bind = _useClockEvents.bind;\n\n  var _useTimekeeperState = (0, _stateContext.default)(),\n      mode = _useTimekeeperState.mode,\n      updateTime = _useTimekeeperState.updateTime,\n      setMode = _useTimekeeperState.setMode,\n      getComposedTime = _useTimekeeperState.getComposedTime;\n  /*\n  \tLOGIC AROUND COARSE\n  \t- on drag, if count < 2, do not force coarse\n  \t- on mouseup, if count < 2 do not force coarse\n  \t- handlepoint\n  \t\t- if `wasTapped` OR `forceCoarse` config, then coarse it\n  \t- coarse is just rounding number to an increment before setting unit\n  \t\tLOGIC AROUND CAN CHANGE UNIT\n  \t- on drag, CAN NOT change unit\n  \t- on mouseup, can change unit\n  \t- AFTER time has been set, then determine if need to change unit\n  \t\t- based on this and user input\n  */\n\n  /*\n  \tconverts angle into time, also factors in any rounding to the closest increment\n  */\n\n\n  function calculateTimeValue(angle, _ref) {\n    var _ref$canAutoChangeUni = _ref.canAutoChangeUnit,\n        canAutoChangeUnit = _ref$canAutoChangeUni === void 0 ? false : _ref$canAutoChangeUni,\n        _ref$wasTapped = _ref.wasTapped,\n        wasTapped = _ref$wasTapped === void 0 ? false : _ref$wasTapped,\n        _ref$isInnerClick = _ref.isInnerClick,\n        isInnerClick = _ref$isInnerClick === void 0 ? false : _ref$isInnerClick; // total number of allowable increments, 12/24 for hours, 60 for min\n\n    var totalIncrements = _constants.CLOCK_VALUES[mode].increments; // minimum increment used for rounding\n\n    var minIncrement = 1; // coarse minutes\n\n    if ((0, _utils.isMinuteMode)(mode) && (wasTapped || config.forceCoarseMinutes)) {\n      minIncrement = config.coarseMinutes;\n    }\n\n    var val = angle / 360 * totalIncrements;\n    var selected = Math.round(val / minIncrement) * minIncrement;\n\n    if (mode === _constants.MODE.HOURS_24 && config.hour24Mode) {\n      // fixes 12pm and midnight, both angle -> selected return 0\n      // for midnight need a final selected of 0, and for noon need 12\n      if (!isInnerClick && selected !== 0) {\n        selected += 12;\n      } else if (isInnerClick && selected === 0) {\n        selected += 12;\n      }\n    } // update time officially on timekeeper\n\n\n    updateTime(selected); // handle any unit autochanges on done click\n\n    if (canAutoChangeUnit) {\n      if (config.switchToMinuteOnHourSelect && (0, _utils.isHourMode)(mode)) {\n        setMode(_constants.MODE.MINUTES);\n      } else if (config.closeOnMinuteSelect && (0, _utils.isMinuteMode)(mode)) {\n        config.onDoneClick && config.onDoneClick(getComposedTime());\n      }\n    }\n  }\n\n  return (0, _core.jsx)(\"div\", (0, _extends2.default)({}, bind, {\n    className: \"react-timekeeper__clock-wrapper\",\n    css: _clockWrapper.default\n  }), (0, _core.jsx)(_Clock.default, {\n    clockEl: clock\n  }), !config.hour24Mode && (0, _core.jsx)(_Meridiems.default, null));\n}","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/node_modules/react-timekeeper/lib/components/ClockWrapper.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","Object","defineProperty","exports","value","default","ClockWrapper","_core","_extends2","_react","_configContext","_Clock","_Meridiems","_clockWrapper","_clockEvents","_constants","_utils","_stateContext","config","clock","useRef","_useClockEvents","calculateTimeValue","bind","_useTimekeeperState","mode","updateTime","setMode","getComposedTime","angle","_ref","_ref$canAutoChangeUni","canAutoChangeUnit","_ref$wasTapped","wasTapped","_ref$isInnerClick","isInnerClick","totalIncrements","CLOCK_VALUES","increments","minIncrement","isMinuteMode","forceCoarseMinutes","coarseMinutes","val","selected","Math","round","MODE","HOURS_24","hour24Mode","switchToMinuteOnHourSelect","isHourMode","MINUTES","closeOnMinuteSelect","onDoneClick","jsx","className","css","clockEl"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = ClockWrapper;\n\nvar _core = require(\"@emotion/core\");\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _configContext = _interopRequireDefault(require(\"../hooks/config-context\"));\n\nvar _Clock = _interopRequireDefault(require(\"./Clock\"));\n\nvar _Meridiems = _interopRequireDefault(require(\"./Meridiems\"));\n\nvar _clockWrapper = _interopRequireDefault(require(\"./styles/clock-wrapper\"));\n\nvar _clockEvents = _interopRequireDefault(require(\"../hooks/clock-events\"));\n\nvar _constants = require(\"../helpers/constants\");\n\nvar _utils = require(\"../helpers/utils\");\n\nvar _stateContext = _interopRequireDefault(require(\"../hooks/state-context\"));\n\nfunction ClockWrapper() {\n  var config = (0, _configContext.default)(); // clock events\n\n  var clock = (0, _react.useRef)(null);\n\n  var _useClockEvents = (0, _clockEvents.default)(clock, calculateTimeValue),\n      bind = _useClockEvents.bind;\n\n  var _useTimekeeperState = (0, _stateContext.default)(),\n      mode = _useTimekeeperState.mode,\n      updateTime = _useTimekeeperState.updateTime,\n      setMode = _useTimekeeperState.setMode,\n      getComposedTime = _useTimekeeperState.getComposedTime;\n  /*\n  \tLOGIC AROUND COARSE\n  \t- on drag, if count < 2, do not force coarse\n  \t- on mouseup, if count < 2 do not force coarse\n  \t- handlepoint\n  \t\t- if `wasTapped` OR `forceCoarse` config, then coarse it\n  \t- coarse is just rounding number to an increment before setting unit\n  \t\tLOGIC AROUND CAN CHANGE UNIT\n  \t- on drag, CAN NOT change unit\n  \t- on mouseup, can change unit\n  \t- AFTER time has been set, then determine if need to change unit\n  \t\t- based on this and user input\n  */\n\n  /*\n  \tconverts angle into time, also factors in any rounding to the closest increment\n  */\n\n\n  function calculateTimeValue(angle, _ref) {\n    var _ref$canAutoChangeUni = _ref.canAutoChangeUnit,\n        canAutoChangeUnit = _ref$canAutoChangeUni === void 0 ? false : _ref$canAutoChangeUni,\n        _ref$wasTapped = _ref.wasTapped,\n        wasTapped = _ref$wasTapped === void 0 ? false : _ref$wasTapped,\n        _ref$isInnerClick = _ref.isInnerClick,\n        isInnerClick = _ref$isInnerClick === void 0 ? false : _ref$isInnerClick;\n    // total number of allowable increments, 12/24 for hours, 60 for min\n    var totalIncrements = _constants.CLOCK_VALUES[mode].increments; // minimum increment used for rounding\n\n    var minIncrement = 1; // coarse minutes\n\n    if ((0, _utils.isMinuteMode)(mode) && (wasTapped || config.forceCoarseMinutes)) {\n      minIncrement = config.coarseMinutes;\n    }\n\n    var val = angle / 360 * totalIncrements;\n    var selected = Math.round(val / minIncrement) * minIncrement;\n\n    if (mode === _constants.MODE.HOURS_24 && config.hour24Mode) {\n      // fixes 12pm and midnight, both angle -> selected return 0\n      // for midnight need a final selected of 0, and for noon need 12\n      if (!isInnerClick && selected !== 0) {\n        selected += 12;\n      } else if (isInnerClick && selected === 0) {\n        selected += 12;\n      }\n    } // update time officially on timekeeper\n\n\n    updateTime(selected); // handle any unit autochanges on done click\n\n    if (canAutoChangeUnit) {\n      if (config.switchToMinuteOnHourSelect && (0, _utils.isHourMode)(mode)) {\n        setMode(_constants.MODE.MINUTES);\n      } else if (config.closeOnMinuteSelect && (0, _utils.isMinuteMode)(mode)) {\n        config.onDoneClick && config.onDoneClick(getComposedTime());\n      }\n    }\n  }\n\n  return (0, _core.jsx)(\"div\", (0, _extends2.default)({}, bind, {\n    className: \"react-timekeeper__clock-wrapper\",\n    css: _clockWrapper.default\n  }), (0, _core.jsx)(_Clock.default, {\n    clockEl: clock\n  }), !config.hour24Mode && (0, _core.jsx)(_Meridiems.default, null));\n}"]},"metadata":{},"sourceType":"script"}