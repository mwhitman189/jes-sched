{"ast":null,"code":"import _objectSpread from \"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/miles/webdev/jes-sched/client/src/components/Schedule.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport CustomDnDCalendar from \"./CustomDnDCalendar\";\nimport EventForm from \"./EventForm\";\nimport TeacherForm from \"./TeacherForm\";\nimport CustomizedSnackbars from \"./CustomizedSnackbars\";\nimport Payroll from \"./Payroll\";\nimport useFormState from \"../hooks/useInputState\";\nimport { TeachersContext } from \"../context/TeachersContext\";\nimport { validateRoomAndResource } from \"../validators\";\nimport { EventsContext } from \"../context/EventsContext\";\nimport \"react-big-calendar/lib/sass/styles.scss\";\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.scss\";\n\nconst Schedule = () => {\n  const _useContext = useContext(TeachersContext),\n        teachers = _useContext.teachers,\n        setTeachers = _useContext.setTeachers,\n        getTeachers = _useContext.getTeachers,\n        addTeacher = _useContext.addTeacher,\n        addTeachingMins = _useContext.addTeachingMins;\n\n  const _useContext2 = useContext(EventsContext),\n        events = _useContext2.events,\n        setEvents = _useContext2.setEvents,\n        addEvent = _useContext2.addEvent,\n        getEvents = _useContext2.getEvents;\n\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        formType = _useState2[0],\n        setFormType = _useState2[1];\n\n  const _useFormState = useFormState(new Date()),\n        _useFormState2 = _slicedToArray(_useFormState, 3),\n        startTime = _useFormState2[0],\n        updateStartTime = _useFormState2[1],\n        resetStartTime = _useFormState2[2];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        selectedEvent = _useState4[0],\n        setSelectedEvent = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isOpen = _useState6[0],\n        setIsOpen = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        message = _useState8[0],\n        setMessage = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        selectedTeacher = _useState10[0],\n        setSelectedTeacher = _useState10[1];\n\n  useEffect(() => {\n    getEvents(new Date().getTime());\n    getTeachers(events);\n    addTeachingMins(events);\n  }, []);\n  useEffect(() => {\n    addTeachingMins(events);\n  }, [events, setTeachers]);\n\n  const moveEvent = ({\n    event,\n    resourceId,\n    start,\n    end\n  }) => {\n    const updatedEvent = _objectSpread({}, event, {\n      resourceId,\n      start,\n      end\n    });\n\n    handleDoubleClick(updatedEvent);\n  }; // Add validation to a move upon dropping an event with drag and drop\n  // If there is a conflict, prevent the move and flash a conflict snackbar\n\n\n  const handleMove = ({\n    event,\n    resourceId,\n    start,\n    end\n  }) => {\n    validateRoomAndResource(events, event, start, setSelectedEvent, handleToggleSnackbar);\n    moveEvent({\n      event,\n      resourceId,\n      start,\n      end\n    });\n    return 0;\n  };\n\n  const handleAddEvent = newEvent => {\n    addEvent(newEvent);\n    setEvents(getEvents());\n    setFormType(\"\");\n  };\n\n  const handleSelect = ({\n    start,\n    resourceId\n  }) => {\n    updateStartTime(start);\n    setSelectedTeacher(resourceId);\n    setFormType(\"event\");\n  };\n\n  const handleDoubleClick = event => {\n    updateStartTime(event.start);\n    setSelectedEvent(event);\n    setFormType(\"event\");\n  };\n\n  const handleAddTeacher = newTeacher => {\n    addTeacher(teachers, newTeacher, setTeachers);\n    setFormType(\"\");\n  };\n\n  const handleBtnClick = () => {\n    setFormType(\"teacher\");\n  };\n\n  const handleToggleSnackbar = msg => {\n    setMessage(msg);\n    setIsOpen(true);\n  };\n\n  const handlePayrollBtnClick = () => {\n    setFormType(\"payroll\");\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, formType === \"event\" && React.createElement(EventForm, {\n    formType: formType,\n    setFormType: setFormType,\n    addEvent: handleAddEvent,\n    events: events,\n    teachers: teachers,\n    startTime: startTime,\n    updateStartTime: updateStartTime,\n    resetStartTime: resetStartTime,\n    event: selectedEvent,\n    setSelectedEvent: setSelectedEvent,\n    selectedTeacher: selectedTeacher,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }), formType === \"teacher\" && React.createElement(TeacherForm, {\n    formType: formType,\n    setFormType: setFormType,\n    addTeacher: handleAddTeacher,\n    setTeachers: setTeachers,\n    teachers: teachers,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }), formType === \"payroll\" && React.createElement(Payroll, {\n    events: events,\n    setFormType: setFormType,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }), React.createElement(CustomizedSnackbars, {\n    isOpen: isOpen,\n    setIsOpen: setIsOpen,\n    variant: \"error\",\n    msg: message,\n    events: events,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }), React.createElement(CustomDnDCalendar, {\n    handleMove: handleMove,\n    handleSelect: handleSelect,\n    handleDoubleClick: handleDoubleClick,\n    events: events,\n    setEvents: setEvents,\n    teachers: teachers,\n    handleBtnClick: handleBtnClick,\n    handlePayrollBtnClick: handlePayrollBtnClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }));\n};\n\nexport default Schedule;","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/src/components/Schedule.js"],"names":["React","useState","useEffect","useContext","CustomDnDCalendar","EventForm","TeacherForm","CustomizedSnackbars","Payroll","useFormState","TeachersContext","validateRoomAndResource","EventsContext","Schedule","teachers","setTeachers","getTeachers","addTeacher","addTeachingMins","events","setEvents","addEvent","getEvents","formType","setFormType","Date","startTime","updateStartTime","resetStartTime","selectedEvent","setSelectedEvent","isOpen","setIsOpen","message","setMessage","selectedTeacher","setSelectedTeacher","getTime","moveEvent","event","resourceId","start","end","updatedEvent","handleDoubleClick","handleMove","handleToggleSnackbar","handleAddEvent","newEvent","handleSelect","handleAddTeacher","newTeacher","handleBtnClick","msg","handlePayrollBtnClick"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport CustomDnDCalendar from \"./CustomDnDCalendar\";\nimport EventForm from \"./EventForm\";\nimport TeacherForm from \"./TeacherForm\";\nimport CustomizedSnackbars from \"./CustomizedSnackbars\";\nimport Payroll from \"./Payroll\";\nimport useFormState from \"../hooks/useInputState\";\nimport { TeachersContext } from \"../context/TeachersContext\";\nimport { validateRoomAndResource } from \"../validators\";\nimport { EventsContext } from \"../context/EventsContext\";\nimport \"react-big-calendar/lib/sass/styles.scss\";\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.scss\";\n\nconst Schedule = () => {\n  const {\n    teachers,\n    setTeachers,\n    getTeachers,\n    addTeacher,\n    addTeachingMins\n  } = useContext(TeachersContext);\n  const { events, setEvents, addEvent, getEvents } = useContext(EventsContext);\n\n  const [formType, setFormType] = useState(\"\");\n  const [startTime, updateStartTime, resetStartTime] = useFormState(new Date());\n  const [selectedEvent, setSelectedEvent] = useState(\"\");\n  const [isOpen, setIsOpen] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [selectedTeacher, setSelectedTeacher] = useState(\"\");\n\n  useEffect(() => {\n    getEvents(new Date().getTime());\n    getTeachers(events);\n    addTeachingMins(events);\n  }, []);\n\n  useEffect(() => {\n    addTeachingMins(events);\n  }, [events, setTeachers]);\n\n  const moveEvent = ({ event, resourceId, start, end }) => {\n    const updatedEvent = { ...event, resourceId, start, end };\n    handleDoubleClick(updatedEvent);\n  };\n\n  // Add validation to a move upon dropping an event with drag and drop\n  // If there is a conflict, prevent the move and flash a conflict snackbar\n  const handleMove = ({ event, resourceId, start, end }) => {\n    validateRoomAndResource(\n      events,\n      event,\n      start,\n      setSelectedEvent,\n      handleToggleSnackbar\n    );\n    moveEvent({\n      event,\n      resourceId,\n      start,\n      end\n    });\n    return 0;\n  };\n\n  const handleAddEvent = newEvent => {\n    addEvent(newEvent);\n    setEvents(getEvents());\n    setFormType(\"\");\n  };\n\n  const handleSelect = ({ start, resourceId }) => {\n    updateStartTime(start);\n    setSelectedTeacher(resourceId);\n    setFormType(\"event\");\n  };\n\n  const handleDoubleClick = event => {\n    updateStartTime(event.start);\n    setSelectedEvent(event);\n    setFormType(\"event\");\n  };\n\n  const handleAddTeacher = newTeacher => {\n    addTeacher(teachers, newTeacher, setTeachers);\n    setFormType(\"\");\n  };\n\n  const handleBtnClick = () => {\n    setFormType(\"teacher\");\n  };\n\n  const handleToggleSnackbar = msg => {\n    setMessage(msg);\n    setIsOpen(true);\n  };\n\n  const handlePayrollBtnClick = () => {\n    setFormType(\"payroll\");\n  };\n\n  return (\n    <div>\n      {formType === \"event\" && (\n        <EventForm\n          formType={formType}\n          setFormType={setFormType}\n          addEvent={handleAddEvent}\n          events={events}\n          teachers={teachers}\n          startTime={startTime}\n          updateStartTime={updateStartTime}\n          resetStartTime={resetStartTime}\n          event={selectedEvent}\n          setSelectedEvent={setSelectedEvent}\n          selectedTeacher={selectedTeacher}\n        />\n      )}\n      {formType === \"teacher\" && (\n        <TeacherForm\n          formType={formType}\n          setFormType={setFormType}\n          addTeacher={handleAddTeacher}\n          setTeachers={setTeachers}\n          teachers={teachers}\n        />\n      )}\n      {formType === \"payroll\" && (\n        <Payroll events={events} setFormType={setFormType} />\n      )}\n      <CustomizedSnackbars\n        isOpen={isOpen}\n        setIsOpen={setIsOpen}\n        variant={\"error\"}\n        msg={message}\n        events={events}\n      />\n      <CustomDnDCalendar\n        handleMove={handleMove}\n        handleSelect={handleSelect}\n        handleDoubleClick={handleDoubleClick}\n        events={events}\n        setEvents={setEvents}\n        teachers={teachers}\n        handleBtnClick={handleBtnClick}\n        handlePayrollBtnClick={handlePayrollBtnClick}\n      />\n    </div>\n  );\n};\nexport default Schedule;\n"]},"metadata":{},"sourceType":"module"}