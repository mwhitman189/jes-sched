{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar animationFrame = _interopRequireWildcard(require(\"dom-helpers/animationFrame\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _memoizeOne = _interopRequireDefault(require(\"memoize-one\"));\n\nvar dates = _interopRequireWildcard(require(\"./utils/dates\"));\n\nvar _DayColumn = _interopRequireDefault(require(\"./DayColumn\"));\n\nvar _TimeGutter = _interopRequireDefault(require(\"./TimeGutter\"));\n\nvar _width = _interopRequireDefault(require(\"dom-helpers/width\"));\n\nvar _TimeGridHeader = _interopRequireDefault(require(\"./TimeGridHeader\"));\n\nvar _helpers = require(\"./utils/helpers\");\n\nvar _eventLevels = require(\"./utils/eventLevels\");\n\nvar _Resources = _interopRequireDefault(require(\"./utils/Resources\"));\n\nvar _propTypes2 = require(\"./utils/propTypes\");\n\nvar TimeGrid =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(TimeGrid, _Component);\n\n  function TimeGrid(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.handleScroll = function (e) {\n      if (_this.scrollRef.current) {\n        _this.scrollRef.current.scrollLeft = e.target.scrollLeft;\n      }\n    };\n\n    _this.handleResize = function () {\n      animationFrame.cancel(_this.rafHandle);\n      _this.rafHandle = animationFrame.request(_this.checkOverflow);\n    };\n\n    _this.gutterRef = function (ref) {\n      _this.gutter = ref && (0, _reactDom.findDOMNode)(ref);\n    };\n\n    _this.handleSelectAlldayEvent = function () {\n      //cancel any pending selections so only the event click goes through.\n      _this.clearSelection();\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectEvent, args);\n    };\n\n    _this.handleSelectAllDaySlot = function (slots, slotInfo) {\n      var onSelectSlot = _this.props.onSelectSlot;\n      (0, _helpers.notify)(onSelectSlot, {\n        slots: slots,\n        start: slots[0],\n        end: slots[slots.length - 1],\n        action: slotInfo.action\n      });\n    };\n\n    _this.checkOverflow = function () {\n      if (_this._updatingOverflow) return;\n      var content = _this.contentRef.current;\n      var isOverflowing = content.scrollHeight > content.clientHeight;\n\n      if (_this.state.isOverflowing !== isOverflowing) {\n        _this._updatingOverflow = true;\n\n        _this.setState({\n          isOverflowing: isOverflowing\n        }, function () {\n          _this._updatingOverflow = false;\n        });\n      }\n    };\n\n    _this.memoizedResources = (0, _memoizeOne.default)(function (resources, accessors) {\n      return (0, _Resources.default)(resources, accessors);\n    });\n    _this.state = {\n      gutterWidth: undefined,\n      isOverflowing: null\n    };\n    _this.scrollRef = _react.default.createRef();\n    _this.contentRef = _react.default.createRef();\n    _this._scrollRatio = null;\n    return _this;\n  }\n\n  var _proto = TimeGrid.prototype;\n\n  _proto.componentWillMount = function componentWillMount() {\n    this.calculateScroll();\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.checkOverflow();\n\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll();\n    window.addEventListener('resize', this.handleResize);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n    animationFrame.cancel(this.rafHandle);\n\n    if (this.measureGutterAnimationFrameRequest) {\n      window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest);\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll(); //this.checkOverflow()\n  };\n\n  _proto.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _this$props = this.props,\n        range = _this$props.range,\n        scrollToTime = _this$props.scrollToTime; // When paginating, reset scroll\n\n    if (!dates.eq(nextProps.range[0], range[0], 'minute') || !dates.eq(nextProps.scrollToTime, scrollToTime, 'minute')) {\n      this.calculateScroll(nextProps);\n    }\n  };\n\n  _proto.renderEvents = function renderEvents(range, events, now) {\n    var _this2 = this;\n\n    var _this$props2 = this.props,\n        min = _this$props2.min,\n        max = _this$props2.max,\n        components = _this$props2.components,\n        accessors = _this$props2.accessors,\n        localizer = _this$props2.localizer,\n        dayLayoutAlgorithm = _this$props2.dayLayoutAlgorithm;\n    var resources = this.memoizedResources(this.props.resources, accessors);\n    var groupedEvents = resources.groupEvents(events);\n    return range.map(function (date, jj) {\n      var partTimeResources = [];\n      var mappedResources = resources.map(function (_ref, i) {\n        var id = _ref[0],\n            resource = _ref[1];\n\n        if (resource.isPartTime) {\n          partTimeResources.push({\n            id: _ref[0],\n            resource: _ref[1]\n          });\n        } else {\n          var daysEvents = (groupedEvents.get(id) || []).filter(function (event) {\n            return dates.inRange(date, accessors.start(event), accessors.end(event), 'day');\n          });\n          return _react.default.createElement(\"div\", {\n            style: style,\n            className: \"last-column\"\n          }, _react.default.createElement(_DayColumn.default, (0, _extends2.default)({}, _this2.props, {\n            localizer: localizer,\n            min: dates.merge(date, min),\n            max: dates.merge(date, max),\n            resource: resource && id,\n            components: components,\n            isNow: dates.eq(date, now, 'day'),\n            key: i + '-' + jj,\n            date: date,\n            events: daysEvents,\n            dayLayoutAlgorithm: dayLayoutAlgorithm\n          })));\n        }\n      });\n\n      if (partTimeResources.length > 0) {\n        var daysEvents = (groupedEvents.get(partTimeResources[0].id) || []).filter(function (event) {\n          return dates.inRange(date, accessors.start(event), accessors.end(event), 'day');\n        });\n        mappedResources.push(_react.default.createElement(_DayColumn.default, (0, _extends2.default)({}, _this2.props, {\n          localizer: localizer,\n          min: dates.merge(date, min),\n          max: dates.merge(date, max),\n          resource: partTimeResources[0] && partTimeResources[0].id,\n          components: components,\n          isNow: dates.eq(date, now, 'day'),\n          key: \"other-part-time\",\n          date: date,\n          events: daysEvents,\n          dayLayoutAlgorithm: dayLayoutAlgorithm\n        })));\n        return mappedResources;\n      }\n\n      return mappedResources;\n    });\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        events = _this$props3.events,\n        range = _this$props3.range,\n        width = _this$props3.width,\n        rtl = _this$props3.rtl,\n        selected = _this$props3.selected,\n        getNow = _this$props3.getNow,\n        resources = _this$props3.resources,\n        components = _this$props3.components,\n        accessors = _this$props3.accessors,\n        getters = _this$props3.getters,\n        localizer = _this$props3.localizer,\n        min = _this$props3.min,\n        max = _this$props3.max,\n        showMultiDayTimes = _this$props3.showMultiDayTimes,\n        longPressThreshold = _this$props3.longPressThreshold;\n    width = width || this.state.gutterWidth;\n    var start = range[0],\n        end = range[range.length - 1];\n    this.slots = range.length;\n    var allDayEvents = [],\n        rangeEvents = [];\n    events.forEach(function (event) {\n      if ((0, _eventLevels.inRange)(event, start, end, accessors)) {\n        var eStart = accessors.start(event),\n            eEnd = accessors.end(event);\n\n        if (accessors.allDay(event) || dates.isJustDate(eStart) && dates.isJustDate(eEnd) || !showMultiDayTimes && !dates.eq(eStart, eEnd, 'day')) {\n          allDayEvents.push(event);\n        } else {\n          rangeEvents.push(event);\n        }\n      }\n    });\n    allDayEvents.sort(function (a, b) {\n      return (0, _eventLevels.sortEvents)(a, b, accessors);\n    });\n    return _react.default.createElement(\"div\", {\n      className: (0, _clsx.default)('rbc-time-view', resources && 'rbc-time-view-resources')\n    }, _react.default.createElement(_TimeGridHeader.default, {\n      range: range,\n      events: allDayEvents,\n      width: width,\n      rtl: rtl,\n      getNow: getNow,\n      localizer: localizer,\n      selected: selected,\n      resources: this.memoizedResources(resources, accessors),\n      selectable: this.props.selectable,\n      accessors: accessors,\n      getters: getters,\n      components: components,\n      scrollRef: this.scrollRef,\n      isOverflowing: this.state.isOverflowing,\n      longPressThreshold: longPressThreshold,\n      onSelectSlot: this.handleSelectAllDaySlot,\n      onSelectEvent: this.handleSelectAlldayEvent,\n      onDoubleClickEvent: this.props.onDoubleClickEvent,\n      onDrillDown: this.props.onDrillDown,\n      getDrilldownView: this.props.getDrilldownView\n    }), _react.default.createElement(\"div\", {\n      ref: this.contentRef,\n      className: \"rbc-time-content\",\n      onScroll: this.handleScroll\n    }, _react.default.createElement(_TimeGutter.default, {\n      date: start,\n      ref: this.gutterRef,\n      localizer: localizer,\n      min: dates.merge(start, min),\n      max: dates.merge(start, max),\n      step: this.props.step,\n      getNow: this.props.getNow,\n      timeslots: this.props.timeslots,\n      components: components,\n      className: \"rbc-time-gutter\"\n    }), this.renderEvents(range, rangeEvents, getNow())));\n  };\n\n  _proto.clearSelection = function clearSelection() {\n    clearTimeout(this._selectTimer);\n    this._pendingSelection = [];\n  };\n\n  _proto.measureGutter = function measureGutter() {\n    var _this3 = this;\n\n    if (this.measureGutterAnimationFrameRequest) {\n      window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest);\n    }\n\n    this.measureGutterAnimationFrameRequest = window.requestAnimationFrame(function () {\n      var width = (0, _width.default)(_this3.gutter);\n\n      if (width && _this3.state.gutterWidth !== width) {\n        _this3.setState({\n          gutterWidth: width\n        });\n      }\n    });\n  };\n\n  _proto.applyScroll = function applyScroll() {\n    if (this._scrollRatio != null) {\n      var content = this.contentRef.current;\n      content.scrollTop = content.scrollHeight * this._scrollRatio; // Only do this once\n\n      this._scrollRatio = null;\n    }\n  };\n\n  _proto.calculateScroll = function calculateScroll(props) {\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var _props = props,\n        min = _props.min,\n        max = _props.max,\n        scrollToTime = _props.scrollToTime;\n    var diffMillis = scrollToTime - dates.startOf(scrollToTime, 'day');\n    var totalMillis = dates.diff(max, min);\n    this._scrollRatio = diffMillis / totalMillis;\n  };\n\n  return TimeGrid;\n}(_react.Component);\n\nexports.default = TimeGrid;\nTimeGrid.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  events: _propTypes.default.array.isRequired,\n  resources: _propTypes.default.array,\n  step: _propTypes.default.number,\n  timeslots: _propTypes.default.number,\n  range: _propTypes.default.arrayOf(_propTypes.default.instanceOf(Date)),\n  min: _propTypes.default.instanceOf(Date),\n  max: _propTypes.default.instanceOf(Date),\n  getNow: _propTypes.default.func.isRequired,\n  scrollToTime: _propTypes.default.instanceOf(Date),\n  showMultiDayTimes: _propTypes.default.bool,\n  rtl: _propTypes.default.bool,\n  width: _propTypes.default.number,\n  accessors: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  localizer: _propTypes.default.object.isRequired,\n  selected: _propTypes.default.object,\n  selectable: _propTypes.default.oneOf([true, false, 'ignoreEvents']),\n  longPressThreshold: _propTypes.default.number,\n  onNavigate: _propTypes.default.func,\n  onSelectSlot: _propTypes.default.func,\n  onSelectEnd: _propTypes.default.func,\n  onSelectStart: _propTypes.default.func,\n  onSelectEvent: _propTypes.default.func,\n  onDoubleClickEvent: _propTypes.default.func,\n  onDrillDown: _propTypes.default.func,\n  getDrilldownView: _propTypes.default.func.isRequired,\n  dayLayoutAlgorithm: _propTypes2.DayLayoutAlgorithmPropType\n} : {};\nTimeGrid.defaultProps = {\n  step: 30,\n  timeslots: 2,\n  min: dates.startOf(new Date(), 'day'),\n  max: dates.endOf(new Date(), 'day'),\n  scrollToTime: dates.startOf(new Date(), 'day')\n};\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/node_modules/react-big-calendar/lib/TimeGrid.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","exports","__esModule","default","_extends2","_inheritsLoose2","_propTypes","_clsx","animationFrame","_react","_reactDom","_memoizeOne","dates","_DayColumn","_TimeGutter","_width","_TimeGridHeader","_helpers","_eventLevels","_Resources","_propTypes2","TimeGrid","_Component","props","_this","call","handleScroll","e","scrollRef","current","scrollLeft","target","handleResize","cancel","rafHandle","request","checkOverflow","gutterRef","ref","gutter","findDOMNode","handleSelectAlldayEvent","clearSelection","_len","arguments","length","args","Array","_key","notify","onSelectEvent","handleSelectAllDaySlot","slots","slotInfo","onSelectSlot","start","end","action","_updatingOverflow","content","contentRef","isOverflowing","scrollHeight","clientHeight","state","setState","memoizedResources","resources","accessors","gutterWidth","undefined","createRef","_scrollRatio","_proto","prototype","componentWillMount","calculateScroll","componentDidMount","width","measureGutter","applyScroll","window","addEventListener","componentWillUnmount","removeEventListener","measureGutterAnimationFrameRequest","cancelAnimationFrame","componentDidUpdate","componentWillReceiveProps","nextProps","_this$props","range","scrollToTime","eq","renderEvents","events","now","_this2","_this$props2","min","max","components","localizer","dayLayoutAlgorithm","groupedEvents","groupEvents","map","date","jj","partTimeResources","mappedResources","_ref","i","id","resource","isPartTime","push","daysEvents","get","filter","event","inRange","createElement","style","className","merge","isNow","key","render","_this$props3","rtl","selected","getNow","getters","showMultiDayTimes","longPressThreshold","allDayEvents","rangeEvents","forEach","eStart","eEnd","allDay","isJustDate","sort","a","b","sortEvents","selectable","onDoubleClickEvent","onDrillDown","getDrilldownView","onScroll","step","timeslots","clearTimeout","_selectTimer","_pendingSelection","_this3","requestAnimationFrame","scrollTop","_props","diffMillis","startOf","totalMillis","diff","Component","propTypes","process","env","NODE_ENV","array","isRequired","number","arrayOf","instanceOf","Date","func","bool","object","oneOf","onNavigate","onSelectEnd","onSelectStart","DayLayoutAlgorithmPropType","defaultProps","endOf","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _inheritsLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inheritsLoose\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _clsx = _interopRequireDefault(require(\"clsx\"));\n\nvar animationFrame = _interopRequireWildcard(require(\"dom-helpers/animationFrame\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactDom = require(\"react-dom\");\n\nvar _memoizeOne = _interopRequireDefault(require(\"memoize-one\"));\n\nvar dates = _interopRequireWildcard(require(\"./utils/dates\"));\n\nvar _DayColumn = _interopRequireDefault(require(\"./DayColumn\"));\n\nvar _TimeGutter = _interopRequireDefault(require(\"./TimeGutter\"));\n\nvar _width = _interopRequireDefault(require(\"dom-helpers/width\"));\n\nvar _TimeGridHeader = _interopRequireDefault(require(\"./TimeGridHeader\"));\n\nvar _helpers = require(\"./utils/helpers\");\n\nvar _eventLevels = require(\"./utils/eventLevels\");\n\nvar _Resources = _interopRequireDefault(require(\"./utils/Resources\"));\n\nvar _propTypes2 = require(\"./utils/propTypes\");\n\nvar TimeGrid =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inheritsLoose2.default)(TimeGrid, _Component);\n\n  function TimeGrid(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n\n    _this.handleScroll = function (e) {\n      if (_this.scrollRef.current) {\n        _this.scrollRef.current.scrollLeft = e.target.scrollLeft;\n      }\n    };\n\n    _this.handleResize = function () {\n      animationFrame.cancel(_this.rafHandle);\n      _this.rafHandle = animationFrame.request(_this.checkOverflow);\n    };\n\n    _this.gutterRef = function (ref) {\n      _this.gutter = ref && (0, _reactDom.findDOMNode)(ref);\n    };\n\n    _this.handleSelectAlldayEvent = function () {\n      //cancel any pending selections so only the event click goes through.\n      _this.clearSelection();\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      (0, _helpers.notify)(_this.props.onSelectEvent, args);\n    };\n\n    _this.handleSelectAllDaySlot = function (slots, slotInfo) {\n      var onSelectSlot = _this.props.onSelectSlot;\n      (0, _helpers.notify)(onSelectSlot, {\n        slots: slots,\n        start: slots[0],\n        end: slots[slots.length - 1],\n        action: slotInfo.action\n      });\n    };\n\n    _this.checkOverflow = function () {\n      if (_this._updatingOverflow) return;\n      var content = _this.contentRef.current;\n      var isOverflowing = content.scrollHeight > content.clientHeight;\n\n      if (_this.state.isOverflowing !== isOverflowing) {\n        _this._updatingOverflow = true;\n\n        _this.setState({\n          isOverflowing: isOverflowing\n        }, function () {\n          _this._updatingOverflow = false;\n        });\n      }\n    };\n\n    _this.memoizedResources = (0, _memoizeOne.default)(function (resources, accessors) {\n      return (0, _Resources.default)(resources, accessors);\n    });\n    _this.state = {\n      gutterWidth: undefined,\n      isOverflowing: null\n    };\n    _this.scrollRef = _react.default.createRef();\n    _this.contentRef = _react.default.createRef();\n    _this._scrollRatio = null;\n    return _this;\n  }\n\n  var _proto = TimeGrid.prototype;\n\n  _proto.componentWillMount = function componentWillMount() {\n    this.calculateScroll();\n  };\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.checkOverflow();\n\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll();\n    window.addEventListener('resize', this.handleResize);\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    window.removeEventListener('resize', this.handleResize);\n    animationFrame.cancel(this.rafHandle);\n\n    if (this.measureGutterAnimationFrameRequest) {\n      window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest);\n    }\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    if (this.props.width == null) {\n      this.measureGutter();\n    }\n\n    this.applyScroll(); //this.checkOverflow()\n  };\n\n  _proto.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _this$props = this.props,\n        range = _this$props.range,\n        scrollToTime = _this$props.scrollToTime; // When paginating, reset scroll\n\n    if (!dates.eq(nextProps.range[0], range[0], 'minute') || !dates.eq(nextProps.scrollToTime, scrollToTime, 'minute')) {\n      this.calculateScroll(nextProps);\n    }\n  };\n\n  _proto.renderEvents = function renderEvents(range, events, now) {\n    var _this2 = this;\n\n    var _this$props2 = this.props,\n        min = _this$props2.min,\n        max = _this$props2.max,\n        components = _this$props2.components,\n        accessors = _this$props2.accessors,\n        localizer = _this$props2.localizer,\n        dayLayoutAlgorithm = _this$props2.dayLayoutAlgorithm;\n    var resources = this.memoizedResources(this.props.resources, accessors);\n    var groupedEvents = resources.groupEvents(events);\n\n    return range.map(function (date, jj) {\n      var partTimeResources = [];\n  \n      var mappedResources = resources.map(function (_ref, i) {\n        var id = _ref[0],\n            resource = _ref[1];\n        \n        if (resource.isPartTime) {\n          partTimeResources.push({id: _ref[0], resource: _ref[1]})\n        } else {\n          var daysEvents = (groupedEvents.get(id) || []).filter(function (event) {\n            return dates.inRange(date, accessors.start(event), accessors.end(event), 'day');\n          });\n          return _react.default.createElement(\"div\", {\n            style: style,\n            className: \"last-column\"\n          }, _react.default.createElement(_DayColumn.default, (0, _extends2.default)({}, _this2.props, {\n            localizer: localizer,\n            min: dates.merge(date, min),\n            max: dates.merge(date, max),\n            resource: resource && id,\n            components: components,\n            isNow: dates.eq(date, now, 'day'),\n            key: i + '-' + jj,\n            date: date,\n            events: daysEvents,\n            dayLayoutAlgorithm: dayLayoutAlgorithm\n          })))\n        }\n      });\n      \n      if (partTimeResources.length > 0) {\n        var daysEvents = (groupedEvents.get(partTimeResources[0].id) || []).filter(function (event) {\n          return dates.inRange(date, accessors.start(event), accessors.end(event), 'day');\n        });\n  \n        mappedResources.push(_react.default.createElement(_DayColumn.default, (0, _extends2.default)({}, _this2.props, {\n          localizer: localizer,\n          min: dates.merge(date, min),\n          max: dates.merge(date, max),\n          resource: partTimeResources[0] && partTimeResources[0].id,\n          components: components,\n          isNow: dates.eq(date, now, 'day'),\n          key: \"other-part-time\",\n          date: date,\n          events: daysEvents,\n          dayLayoutAlgorithm: dayLayoutAlgorithm\n        })));\n        return mappedResources\n      }\n\n      return mappedResources\n    });\n  };\n\n  _proto.render = function render() {\n    var _this$props3 = this.props,\n        events = _this$props3.events,\n        range = _this$props3.range,\n        width = _this$props3.width,\n        rtl = _this$props3.rtl,\n        selected = _this$props3.selected,\n        getNow = _this$props3.getNow,\n        resources = _this$props3.resources,\n        components = _this$props3.components,\n        accessors = _this$props3.accessors,\n        getters = _this$props3.getters,\n        localizer = _this$props3.localizer,\n        min = _this$props3.min,\n        max = _this$props3.max,\n        showMultiDayTimes = _this$props3.showMultiDayTimes,\n        longPressThreshold = _this$props3.longPressThreshold;\n    width = width || this.state.gutterWidth;\n    var start = range[0],\n        end = range[range.length - 1];\n    this.slots = range.length;\n    var allDayEvents = [],\n        rangeEvents = [];\n    events.forEach(function (event) {\n      if ((0, _eventLevels.inRange)(event, start, end, accessors)) {\n        var eStart = accessors.start(event),\n            eEnd = accessors.end(event);\n\n        if (accessors.allDay(event) || dates.isJustDate(eStart) && dates.isJustDate(eEnd) || !showMultiDayTimes && !dates.eq(eStart, eEnd, 'day')) {\n          allDayEvents.push(event);\n        } else {\n          rangeEvents.push(event);\n        }\n      }\n    });\n    allDayEvents.sort(function (a, b) {\n      return (0, _eventLevels.sortEvents)(a, b, accessors);\n    });\n    return _react.default.createElement(\"div\", {\n      className: (0, _clsx.default)('rbc-time-view', resources && 'rbc-time-view-resources')\n    }, _react.default.createElement(_TimeGridHeader.default, {\n      range: range,\n      events: allDayEvents,\n      width: width,\n      rtl: rtl,\n      getNow: getNow,\n      localizer: localizer,\n      selected: selected,\n      resources: this.memoizedResources(resources, accessors),\n      selectable: this.props.selectable,\n      accessors: accessors,\n      getters: getters,\n      components: components,\n      scrollRef: this.scrollRef,\n      isOverflowing: this.state.isOverflowing,\n      longPressThreshold: longPressThreshold,\n      onSelectSlot: this.handleSelectAllDaySlot,\n      onSelectEvent: this.handleSelectAlldayEvent,\n      onDoubleClickEvent: this.props.onDoubleClickEvent,\n      onDrillDown: this.props.onDrillDown,\n      getDrilldownView: this.props.getDrilldownView\n    }), _react.default.createElement(\"div\", {\n      ref: this.contentRef,\n      className: \"rbc-time-content\",\n      onScroll: this.handleScroll\n    }, _react.default.createElement(_TimeGutter.default, {\n      date: start,\n      ref: this.gutterRef,\n      localizer: localizer,\n      min: dates.merge(start, min),\n      max: dates.merge(start, max),\n      step: this.props.step,\n      getNow: this.props.getNow,\n      timeslots: this.props.timeslots,\n      components: components,\n      className: \"rbc-time-gutter\"\n    }), this.renderEvents(range, rangeEvents, getNow())));\n  };\n\n  _proto.clearSelection = function clearSelection() {\n    clearTimeout(this._selectTimer);\n    this._pendingSelection = [];\n  };\n\n  _proto.measureGutter = function measureGutter() {\n    var _this3 = this;\n\n    if (this.measureGutterAnimationFrameRequest) {\n      window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest);\n    }\n\n    this.measureGutterAnimationFrameRequest = window.requestAnimationFrame(function () {\n      var width = (0, _width.default)(_this3.gutter);\n\n      if (width && _this3.state.gutterWidth !== width) {\n        _this3.setState({\n          gutterWidth: width\n        });\n      }\n    });\n  };\n\n  _proto.applyScroll = function applyScroll() {\n    if (this._scrollRatio != null) {\n      var content = this.contentRef.current;\n      content.scrollTop = content.scrollHeight * this._scrollRatio; // Only do this once\n\n      this._scrollRatio = null;\n    }\n  };\n\n  _proto.calculateScroll = function calculateScroll(props) {\n    if (props === void 0) {\n      props = this.props;\n    }\n\n    var _props = props,\n        min = _props.min,\n        max = _props.max,\n        scrollToTime = _props.scrollToTime;\n    var diffMillis = scrollToTime - dates.startOf(scrollToTime, 'day');\n    var totalMillis = dates.diff(max, min);\n    this._scrollRatio = diffMillis / totalMillis;\n  };\n\n  return TimeGrid;\n}(_react.Component);\n\nexports.default = TimeGrid;\nTimeGrid.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  events: _propTypes.default.array.isRequired,\n  resources: _propTypes.default.array,\n  step: _propTypes.default.number,\n  timeslots: _propTypes.default.number,\n  range: _propTypes.default.arrayOf(_propTypes.default.instanceOf(Date)),\n  min: _propTypes.default.instanceOf(Date),\n  max: _propTypes.default.instanceOf(Date),\n  getNow: _propTypes.default.func.isRequired,\n  scrollToTime: _propTypes.default.instanceOf(Date),\n  showMultiDayTimes: _propTypes.default.bool,\n  rtl: _propTypes.default.bool,\n  width: _propTypes.default.number,\n  accessors: _propTypes.default.object.isRequired,\n  components: _propTypes.default.object.isRequired,\n  getters: _propTypes.default.object.isRequired,\n  localizer: _propTypes.default.object.isRequired,\n  selected: _propTypes.default.object,\n  selectable: _propTypes.default.oneOf([true, false, 'ignoreEvents']),\n  longPressThreshold: _propTypes.default.number,\n  onNavigate: _propTypes.default.func,\n  onSelectSlot: _propTypes.default.func,\n  onSelectEnd: _propTypes.default.func,\n  onSelectStart: _propTypes.default.func,\n  onSelectEvent: _propTypes.default.func,\n  onDoubleClickEvent: _propTypes.default.func,\n  onDrillDown: _propTypes.default.func,\n  getDrilldownView: _propTypes.default.func.isRequired,\n  dayLayoutAlgorithm: _propTypes2.DayLayoutAlgorithmPropType\n} : {};\nTimeGrid.defaultProps = {\n  step: 30,\n  timeslots: 2,\n  min: dates.startOf(new Date(), 'day'),\n  max: dates.endOf(new Date(), 'day'),\n  scrollToTime: dates.startOf(new Date(), 'day')\n};\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}