{"ast":null,"code":"import _objectSpread from\"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Calendar,momentLocalizer}from\"react-big-calendar\";import withDragAndDrop from\"react-big-calendar/lib/addons/dragAndDrop\";import moment from\"moment\";import\"react-big-calendar/lib/sass/toolbar.scss\";import{changeEvent}from\"../helperFunctions\";import{WorkWeek}from\"./CustomView\";import LessonEvent from\"./LessonEvent\";import CustomToolbar from\"./CustomToolbar\";moment.locale(\"jp\",{week:{dow:1}});var localizer=momentLocalizer(moment);var DragAndDropCalendar=withDragAndDrop(Calendar);var CustomDnDCalendar=/*#__PURE__*/function(_Component){_inherits(CustomDnDCalendar,_Component);function CustomDnDCalendar(){_classCallCheck(this,CustomDnDCalendar);return _possibleConstructorReturn(this,_getPrototypeOf(CustomDnDCalendar).apply(this,arguments));}_createClass(CustomDnDCalendar,[{key:\"render\",value:function render(){var _this$props=this.props,handleMove=_this$props.handleMove,handleSelect=_this$props.handleSelect,handleDoubleClick=_this$props.handleDoubleClick,handleBtnClick=_this$props.handleBtnClick,handlePayrollBtnClick=_this$props.handlePayrollBtnClick,events=_this$props.events,teachers=_this$props.teachers,setEvents=_this$props.setEvents;// Limit displayed hours of the day\nvar minTime=new Date();minTime.setHours(9,0,0);var maxTime=new Date();maxTime.setHours(20,59,59);// Style events based on event.type\nvar eventStyleGetter=function eventStyleGetter(event){// Hide a dummy event that fixes drag and drop bug\nif(event.hide){return{style:{display:\"none\"}};}var hexColor;switch(event.type){case\"pl\":hexColor=\"#e6ba1f\";break;case\"beg\":hexColor=\"#00fca5\";break;case\"el\":hexColor=\"#02bd7b\";break;case\"lint\":hexColor=\"#018256\";break;case\"hint\":hexColor=\"#0b8a5e\";break;case\"adv\":hexColor=\"#04593c\";break;case\"lb\":hexColor=\"#97dd1a\";break;case\"lg1\":hexColor=\"#ca161e\";break;case\"lg2\":hexColor=\"#fdc100\";break;case\"lg3\":hexColor=\"#0065bd\";break;case\"lg4\":hexColor=\"#00ae3e\";break;case\"lg5\":hexColor=\"#ff8d2a\";break;case\"lg6\":hexColor=\"#8f178e\";break;case\"gs\":hexColor=\"#670084\";break;case\"ct1\":hexColor=\"#d90000\";break;case\"ct2\":hexColor=\"#0076d0\";break;case\"ct3\":hexColor=\"#008935\";break;case\"prm\":hexColor=\"#7d190b\";break;default:hexColor=\"#7c9ae6\";break;}var backgroundColor=hexColor;var style={backgroundColor:backgroundColor,color:\"white\",border:0,display:\"block\",boxShadow:\"\"};if(event.isNewEvent){style.boxShadow=\"0 0 4px 5px \".concat(hexColor);}return{style:style};};var handleSingleClick=function handleSingleClick(event){var updatedEvent=_objectSpread({},event,{isNewEvent:false});changeEvent(events,event,updatedEvent,setEvents);};return React.createElement(DragAndDropCalendar,{style:{width:\"100vw\",maxHeight:\"100vh\"},localizer:localizer,views:{week:WorkWeek,day:true},defaultView:\"week\",events:events,onEventDrop:handleMove,startAccessor:\"start\",endAccessor:\"end\",resources:teachers,resourceIdAccessor:\"resourceId\",resourceTitleAccessor:\"resourceTitle\",selectable:true,onSelectEvent:handleSingleClick,onDoubleClickEvent:handleDoubleClick,eventPropGetter:eventStyleGetter,step:5,timeslots:12,min:minTime,max:maxTime,onSelectSlot:handleSelect,components:{event:LessonEvent,toolbar:CustomToolbar({handleBtnClick:handleBtnClick,handlePayrollBtnClick:handlePayrollBtnClick})},resizableAccessor:function resizableAccessor(){return false;}});}}]);return CustomDnDCalendar;}(Component);export default CustomDnDCalendar;","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/src/components/CustomDnDCalendar.js"],"names":["React","Component","Calendar","momentLocalizer","withDragAndDrop","moment","changeEvent","WorkWeek","LessonEvent","CustomToolbar","locale","week","dow","localizer","DragAndDropCalendar","CustomDnDCalendar","props","handleMove","handleSelect","handleDoubleClick","handleBtnClick","handlePayrollBtnClick","events","teachers","setEvents","minTime","Date","setHours","maxTime","eventStyleGetter","event","hide","style","display","hexColor","type","backgroundColor","color","border","boxShadow","isNewEvent","handleSingleClick","updatedEvent","width","maxHeight","day","toolbar"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\";\nimport moment from \"moment\";\nimport \"react-big-calendar/lib/sass/toolbar.scss\";\nimport { changeEvent } from \"../helperFunctions\";\n\nimport { WorkWeek } from \"./CustomView\";\nimport LessonEvent from \"./LessonEvent\";\nimport CustomToolbar from \"./CustomToolbar\";\n\nmoment.locale(\"jp\", {\n  week: {\n    dow: 1\n  }\n});\nconst localizer = momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(Calendar);\n\nclass CustomDnDCalendar extends Component {\n  render() {\n    const {\n      handleMove,\n      handleSelect,\n      handleDoubleClick,\n      handleBtnClick,\n      handlePayrollBtnClick,\n      events,\n      teachers,\n      setEvents\n    } = this.props;\n\n    // Limit displayed hours of the day\n    const minTime = new Date();\n    minTime.setHours(9, 0, 0);\n    const maxTime = new Date();\n    maxTime.setHours(20, 59, 59);\n\n    // Style events based on event.type\n    const eventStyleGetter = event => {\n      // Hide a dummy event that fixes drag and drop bug\n      if (event.hide) {\n        return { style: { display: \"none\" } };\n      }\n      let hexColor;\n      switch (event.type) {\n        case \"pl\":\n          hexColor = \"#e6ba1f\";\n          break;\n        case \"beg\":\n          hexColor = \"#00fca5\";\n          break;\n        case \"el\":\n          hexColor = \"#02bd7b\";\n          break;\n        case \"lint\":\n          hexColor = \"#018256\";\n          break;\n        case \"hint\":\n          hexColor = \"#0b8a5e\";\n          break;\n        case \"adv\":\n          hexColor = \"#04593c\";\n          break;\n        case \"lb\":\n          hexColor = \"#97dd1a\";\n          break;\n        case \"lg1\":\n          hexColor = \"#ca161e\";\n          break;\n        case \"lg2\":\n          hexColor = \"#fdc100\";\n          break;\n        case \"lg3\":\n          hexColor = \"#0065bd\";\n          break;\n        case \"lg4\":\n          hexColor = \"#00ae3e\";\n          break;\n        case \"lg5\":\n          hexColor = \"#ff8d2a\";\n          break;\n        case \"lg6\":\n          hexColor = \"#8f178e\";\n          break;\n        case \"gs\":\n          hexColor = \"#670084\";\n          break;\n        case \"ct1\":\n          hexColor = \"#d90000\";\n          break;\n        case \"ct2\":\n          hexColor = \"#0076d0\";\n          break;\n        case \"ct3\":\n          hexColor = \"#008935\";\n          break;\n        case \"prm\":\n          hexColor = \"#7d190b\";\n          break;\n        default:\n          hexColor = \"#7c9ae6\";\n          break;\n      }\n\n      let backgroundColor = hexColor;\n      let style = {\n        backgroundColor: backgroundColor,\n        color: \"white\",\n        border: 0,\n        display: \"block\",\n        boxShadow: \"\"\n      };\n\n      if (event.isNewEvent) {\n        style.boxShadow = `0 0 4px 5px ${hexColor}`;\n      }\n      return {\n        style: style\n      };\n    };\n\n    const handleSingleClick = event => {\n      const updatedEvent = { ...event, isNewEvent: false };\n      changeEvent(events, event, updatedEvent, setEvents);\n    };\n\n    return (\n      <DragAndDropCalendar\n        style={{ width: \"100vw\", maxHeight: \"100vh\" }}\n        localizer={localizer}\n        views={{ week: WorkWeek, day: true }}\n        defaultView=\"week\"\n        events={events}\n        onEventDrop={handleMove}\n        startAccessor=\"start\"\n        endAccessor=\"end\"\n        resources={teachers}\n        resourceIdAccessor=\"resourceId\"\n        resourceTitleAccessor=\"resourceTitle\"\n        selectable\n        onSelectEvent={handleSingleClick}\n        onDoubleClickEvent={handleDoubleClick}\n        eventPropGetter={eventStyleGetter}\n        step={5}\n        timeslots={12}\n        min={minTime}\n        max={maxTime}\n        onSelectSlot={handleSelect}\n        components={{\n          event: LessonEvent,\n          toolbar: CustomToolbar({ handleBtnClick, handlePayrollBtnClick })\n        }}\n        resizableAccessor={() => false}\n      />\n    );\n  }\n}\n\nexport default CustomDnDCalendar;\n"]},"metadata":{},"sourceType":"module"}