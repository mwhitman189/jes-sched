{"ast":null,"code":"import axios from \"axios\";\n\nconst loadUser = () => async (state, dispatch) => {\n  dispatch({\n    type: \"USER_LOADING\"\n  });\n  await axios.get(\"/api/auth/user\", tokenConfig(state)).then(res => {\n    dispatch({\n      type: \"USER_LOADED\",\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: \"AUTH_ERROR\"\n    });\n  });\n};\n\nconst tokenConfig = state => {\n  const token = state.token;\n  const config = {\n    headers: {\n      \"Content-type\": \"application/json\"\n    }\n  }; // If token, add to headers\n\n  if (token) config.headers[\"x-auth-token\"] = token;\n  console.log(config);\n  return config;\n};\n\nexport default loadUser;","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/src/reducers/loadUserReducer.js"],"names":["axios","loadUser","state","dispatch","type","get","tokenConfig","then","res","payload","data","catch","err","token","config","headers","console","log"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,QAAQ,GAAG,MAAM,OAAOC,KAAP,EAAcC,QAAd,KAA2B;AAChDA,EAAAA,QAAQ,CAAC;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAAD,CAAR;AAEA,QAAMJ,KAAK,CACRK,GADG,CACC,gBADD,EACmBC,WAAW,CAACJ,KAAD,CAD9B,EAEHK,IAFG,CAEGC,GAAD,IAAS;AACbL,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAE,aADC;AAEPK,MAAAA,OAAO,EAAED,GAAG,CAACE;AAFN,KAAD,CAAR;AAID,GAPG,EAQHC,KARG,CAQIC,GAAD,IAAS;AACdT,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACD,GAVG,CAAN;AAWD,CAdD;;AAgBA,MAAME,WAAW,GAAIJ,KAAD,IAAW;AAC7B,QAAMW,KAAK,GAAGX,KAAK,CAACW,KAApB;AAEA,QAAMC,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AADI,GAAf,CAH6B,CAS7B;;AACA,MAAIF,KAAJ,EAAWC,MAAM,CAACC,OAAP,CAAe,cAAf,IAAiCF,KAAjC;AACXG,EAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AAEA,SAAOA,MAAP;AACD,CAdD;;AAgBA,eAAeb,QAAf","sourcesContent":["import axios from \"axios\";\n\nconst loadUser = () => async (state, dispatch) => {\n  dispatch({ type: \"USER_LOADING\" });\n\n  await axios\n    .get(\"/api/auth/user\", tokenConfig(state))\n    .then((res) => {\n      dispatch({\n        type: \"USER_LOADED\",\n        payload: res.data,\n      });\n    })\n    .catch((err) => {\n      dispatch({ type: \"AUTH_ERROR\" });\n    });\n};\n\nconst tokenConfig = (state) => {\n  const token = state.token;\n\n  const config = {\n    headers: {\n      \"Content-type\": \"application/json\",\n    },\n  };\n\n  // If token, add to headers\n  if (token) config.headers[\"x-auth-token\"] = token;\n  console.log(config);\n\n  return config;\n};\n\nexport default loadUser;\n"]},"metadata":{},"sourceType":"module"}