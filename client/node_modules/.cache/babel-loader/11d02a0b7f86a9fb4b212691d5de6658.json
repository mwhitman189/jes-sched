{"ast":null,"code":"import _objectSpread from \"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useReducer } from \"react\";\nconst initialState = {\n  token: localStorage.getItem(\"token\"),\n  isAuthenticated: null,\n  isLoading: false,\n  user: null\n};\n\nfunction useAuthReducer(key, defaultVal, reducer) {\n  const _useReducer = useReducer(reducer, defaultVal, () => {\n    let value;\n\n    try {\n      value = {\n        token: localStorage.getItem(\"token\"),\n        isAuthenticated: null,\n        isLoading: false,\n        user: null\n      };\n    } catch (e) {\n      value = defaultVal;\n    }\n  }),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1];\n\n  switch (action.type) {\n    case \"USER_LOADING\":\n      return _objectSpread({}, state, {\n        isLoading: true\n      });\n\n    case \"USER_LOADED\":\n      return _objectSpread({}, state, {\n        isAuthenticated: true,\n        isLoading: false,\n        user: action.payload\n      });\n\n    case \"LOGIN_SUCCESS\":\n    case \"REGISTER_SUCCESS\":\n      return _objectSpread({}, state, {}, action.payload, {\n        isAuthenticated: true,\n        isLoading: false\n      });\n\n    case \"AUTH_ERROR\":\n    case \"LOGIN_FAIL\":\n    case \"LOGOUT_SUCCESS\":\n    case \"REGISTER_FAIL\":\n      return _objectSpread({}, state, {\n        token: null,\n        user: null,\n        isAuthenticated: false,\n        isLoading: false\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/src/reducers/authReducer.js"],"names":["useReducer","initialState","token","localStorage","getItem","isAuthenticated","isLoading","user","useAuthReducer","key","defaultVal","reducer","value","e","state","dispatch","action","type","payload"],"mappings":";;AAAA,SAASA,UAAT,QAA2B,OAA3B;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADY;AAEnBC,EAAAA,eAAe,EAAE,IAFE;AAGnBC,EAAAA,SAAS,EAAE,KAHQ;AAInBC,EAAAA,IAAI,EAAE;AAJa,CAArB;;AAOA,SAASC,cAAT,CAAwBC,GAAxB,EAA6BC,UAA7B,EAAyCC,OAAzC,EAAkD;AAAA,sBACtBX,UAAU,CAACW,OAAD,EAAUD,UAAV,EAAsB,MAAM;AAC9D,QAAIE,KAAJ;;AACA,QAAI;AACFA,MAAAA,KAAK,GAAG;AACNV,QAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADD;AAENC,QAAAA,eAAe,EAAE,IAFX;AAGNC,QAAAA,SAAS,EAAE,KAHL;AAINC,QAAAA,IAAI,EAAE;AAJA,OAAR;AAMD,KAPD,CAOE,OAAOM,CAAP,EAAU;AACVD,MAAAA,KAAK,GAAGF,UAAR;AACD;AACF,GAZmC,CADY;AAAA;AAAA,QACzCI,KADyC;AAAA,QAClCC,QADkC;;AAchD,UAAQC,MAAM,CAACC,IAAf;AACE,SAAK,cAAL;AACE,+BACKH,KADL;AAEER,QAAAA,SAAS,EAAE;AAFb;;AAIF,SAAK,aAAL;AACE,+BACKQ,KADL;AAEET,QAAAA,eAAe,EAAE,IAFnB;AAGEC,QAAAA,SAAS,EAAE,KAHb;AAIEC,QAAAA,IAAI,EAAES,MAAM,CAACE;AAJf;;AAMF,SAAK,eAAL;AACA,SAAK,kBAAL;AACE,+BACKJ,KADL,MAEKE,MAAM,CAACE,OAFZ;AAGEb,QAAAA,eAAe,EAAE,IAHnB;AAIEC,QAAAA,SAAS,EAAE;AAJb;;AAMF,SAAK,YAAL;AACA,SAAK,YAAL;AACA,SAAK,gBAAL;AACA,SAAK,eAAL;AACE,+BACKQ,KADL;AAEEZ,QAAAA,KAAK,EAAE,IAFT;AAGEK,QAAAA,IAAI,EAAE,IAHR;AAIEF,QAAAA,eAAe,EAAE,KAJnB;AAKEC,QAAAA,SAAS,EAAE;AALb;;AAOF;AACE,aAAOQ,KAAP;AAjCJ;AAmCD","sourcesContent":["import { useReducer } from \"react\";\n\nconst initialState = {\n  token: localStorage.getItem(\"token\"),\n  isAuthenticated: null,\n  isLoading: false,\n  user: null\n};\n\nfunction useAuthReducer(key, defaultVal, reducer) {\n  const [state, dispatch] = useReducer(reducer, defaultVal, () => {\n    let value;\n    try {\n      value = {\n        token: localStorage.getItem(\"token\"),\n        isAuthenticated: null,\n        isLoading: false,\n        user: null\n      };\n    } catch (e) {\n      value = defaultVal;\n    }\n  });\n  switch (action.type) {\n    case \"USER_LOADING\":\n      return {\n        ...state,\n        isLoading: true\n      };\n    case \"USER_LOADED\":\n      return {\n        ...state,\n        isAuthenticated: true,\n        isLoading: false,\n        user: action.payload\n      };\n    case \"LOGIN_SUCCESS\":\n    case \"REGISTER_SUCCESS\":\n      return {\n        ...state,\n        ...action.payload,\n        isAuthenticated: true,\n        isLoading: false\n      };\n    case \"AUTH_ERROR\":\n    case \"LOGIN_FAIL\":\n    case \"LOGOUT_SUCCESS\":\n    case \"REGISTER_FAIL\":\n      return {\n        ...state,\n        token: null,\n        user: null,\n        isAuthenticated: false,\n        isLoading: false\n      };\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}