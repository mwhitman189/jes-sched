{"ast":null,"code":"import _objectSpread from \"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/miles/webdev/jes-sched/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { createPayPeriodData } from \"../helperFunctions\";\nimport { tokenConfig } from \"../reducers/loadUserReducer\";\nimport { UserContext } from \"../context/UserContext\";\nexport default (initialTeachers => {\n  const _useContext = useContext(UserContext),\n        user = _useContext.user;\n\n  const _useState = useState(initialTeachers),\n        _useState2 = _slicedToArray(_useState, 2),\n        teachers = _useState2[0],\n        setTeachers = _useState2[1];\n\n  const updateTeacher = async teacher => {\n    const idx = teachers.findIndex(t => t._id === teacher._id);\n    const updatedTeachers = [...teachers];\n\n    const updatedTeacher = _objectSpread({}, teacher, {\n      resourceTitle: teacher.resourceTitle,\n      name: teacher.name,\n      familyName: teacher.familyName,\n      email: teacher.email,\n      teachingMins: teacher.teachingMins,\n      holidayMins: teacher.holidayMins,\n      outsideDutyMins: teacher.outsideDutyMins,\n      otThreshold: teacher.otThreshold,\n      overThresholdOneMins: teacher.overThresholdOneMins,\n      overThresholdTwoMins: teacher.overThresholdTwoMins,\n      minsByDate: {\n        1: teacher.minsByDate[1],\n        2: teacher.minsByDate[2],\n        3: teacher.minsByDate[3],\n        4: teacher.minsByDate[4],\n        5: teacher.minsByDate[5],\n        6: teacher.minsByDate[6],\n        7: teacher.minsByDate[7],\n        8: teacher.minsByDate[8],\n        9: teacher.minsByDate[9],\n        10: teacher.minsByDate[10],\n        11: teacher.minsByDate[11],\n        12: teacher.minsByDate[12],\n        13: teacher.minsByDate[13],\n        14: teacher.minsByDate[14],\n        15: teacher.minsByDate[15],\n        16: teacher.minsByDate[16],\n        17: teacher.minsByDate[17],\n        18: teacher.minsByDate[18],\n        19: teacher.minsByDate[19],\n        20: teacher.minsByDate[20],\n        21: teacher.minsByDate[21],\n        22: teacher.minsByDate[22],\n        23: teacher.minsByDate[23],\n        24: teacher.minsByDate[24],\n        25: teacher.minsByDate[25],\n        26: teacher.minsByDate[26],\n        27: teacher.minsByDate[27],\n        28: teacher.minsByDate[28],\n        29: teacher.minsByDate[29],\n        30: teacher.minsByDate[30],\n        31: teacher.minsByDate[31]\n      }\n    });\n\n    updatedTeachers.splice(idx, 1, updatedTeacher);\n    setTeachers(updatedTeachers);\n    await axios.put(`/api/teachers/update/${teacher._id}`, updatedTeacher, tokenConfig(user)).then(res => console.log(res.data)).catch(err => console.log(err));\n  };\n\n  return {\n    teachers,\n    setTeachers,\n    getTeachers: async () => {\n      await axios.get(\"/api/teachers\", tokenConfig(user)).then(res => {\n        if (res.data.length > 0) {\n          setTeachers(res.data);\n        }\n      }).catch(err => console.log(err));\n    },\n    addTeacher: async newTeacher => {\n      await axios.post(\"/api/teachers/add\", newTeacher, tokenConfig(user)).then(res => console.log(res.data)).catch(err => console.log(err));\n      return setTeachers([...teachers, newTeacher]);\n    },\n    deleteTeacher: async teacher => {\n      await axios.delete(`/api/teachers/delete/${teacher._id}`, tokenConfig(user)).then(res => console.log(res.data)).catch(err => console.log(err));\n      return setTeachers(teachers.filter(t => t._id !== teacher._id));\n    },\n    addTeachingMins: (events, monthStart, monthEnd) => {\n      if (teachers.length > 0) {\n        teachers.forEach(teacher => {\n          const datesData = createPayPeriodData(events, teacher, monthStart, monthEnd);\n\n          for (let i = 1; i < 32; i++) {\n            if (teacher.minsByDate) {\n              teacher.minsByDate[i] = datesData[i] ? datesData[i] : 0;\n            }\n          } // teacher.minsByDate = createPayPeriodData(\n          //   events,\n          //   teacher,\n          //   monthStart,\n          //   monthEnd\n          // );\n\n\n          updateTeacher(teacher);\n        });\n      }\n    }\n  };\n});","map":{"version":3,"sources":["/home/miles/webdev/jes-sched/client/src/hooks/useTeachersState.js"],"names":["useState","useContext","axios","createPayPeriodData","tokenConfig","UserContext","initialTeachers","user","teachers","setTeachers","updateTeacher","teacher","idx","findIndex","t","_id","updatedTeachers","updatedTeacher","resourceTitle","name","familyName","email","teachingMins","holidayMins","outsideDutyMins","otThreshold","overThresholdOneMins","overThresholdTwoMins","minsByDate","splice","put","then","res","console","log","data","catch","err","getTeachers","get","length","addTeacher","newTeacher","post","deleteTeacher","delete","filter","addTeachingMins","events","monthStart","monthEnd","forEach","datesData","i"],"mappings":"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","sourcesContent":["import { useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { createPayPeriodData } from \"../helperFunctions\";\nimport { tokenConfig } from \"../reducers/loadUserReducer\";\nimport { UserContext } from \"../context/UserContext\";\n\nexport default (initialTeachers) => {\n  const { user } = useContext(UserContext);\n  const [teachers, setTeachers] = useState(initialTeachers);\n\n  const updateTeacher = async (teacher) => {\n    const idx = teachers.findIndex((t) => t._id === teacher._id);\n    const updatedTeachers = [...teachers];\n\n    const updatedTeacher = {\n      ...teacher,\n      resourceTitle: teacher.resourceTitle,\n      name: teacher.name,\n      familyName: teacher.familyName,\n      email: teacher.email,\n      teachingMins: teacher.teachingMins,\n      holidayMins: teacher.holidayMins,\n      outsideDutyMins: teacher.outsideDutyMins,\n      otThreshold: teacher.otThreshold,\n      overThresholdOneMins: teacher.overThresholdOneMins,\n      overThresholdTwoMins: teacher.overThresholdTwoMins,\n      minsByDate: {\n        1: teacher.minsByDate[1],\n        2: teacher.minsByDate[2],\n        3: teacher.minsByDate[3],\n        4: teacher.minsByDate[4],\n        5: teacher.minsByDate[5],\n        6: teacher.minsByDate[6],\n        7: teacher.minsByDate[7],\n        8: teacher.minsByDate[8],\n        9: teacher.minsByDate[9],\n        10: teacher.minsByDate[10],\n        11: teacher.minsByDate[11],\n        12: teacher.minsByDate[12],\n        13: teacher.minsByDate[13],\n        14: teacher.minsByDate[14],\n        15: teacher.minsByDate[15],\n        16: teacher.minsByDate[16],\n        17: teacher.minsByDate[17],\n        18: teacher.minsByDate[18],\n        19: teacher.minsByDate[19],\n        20: teacher.minsByDate[20],\n        21: teacher.minsByDate[21],\n        22: teacher.minsByDate[22],\n        23: teacher.minsByDate[23],\n        24: teacher.minsByDate[24],\n        25: teacher.minsByDate[25],\n        26: teacher.minsByDate[26],\n        27: teacher.minsByDate[27],\n        28: teacher.minsByDate[28],\n        29: teacher.minsByDate[29],\n        30: teacher.minsByDate[30],\n        31: teacher.minsByDate[31],\n      },\n    };\n    updatedTeachers.splice(idx, 1, updatedTeacher);\n\n    setTeachers(updatedTeachers);\n    await axios\n      .put(\n        `/api/teachers/update/${teacher._id}`,\n        updatedTeacher,\n        tokenConfig(user)\n      )\n      .then((res) => console.log(res.data))\n      .catch((err) => console.log(err));\n  };\n\n  return {\n    teachers,\n    setTeachers,\n    getTeachers: async () => {\n      await axios\n        .get(\"/api/teachers\", tokenConfig(user))\n        .then((res) => {\n          if (res.data.length > 0) {\n            setTeachers(res.data);\n          }\n        })\n        .catch((err) => console.log(err));\n    },\n    addTeacher: async (newTeacher) => {\n      await axios\n        .post(\"/api/teachers/add\", newTeacher, tokenConfig(user))\n        .then((res) => console.log(res.data))\n        .catch((err) => console.log(err));\n      return setTeachers([...teachers, newTeacher]);\n    },\n    deleteTeacher: async (teacher) => {\n      await axios\n        .delete(`/api/teachers/delete/${teacher._id}`, tokenConfig(user))\n        .then((res) => console.log(res.data))\n        .catch((err) => console.log(err));\n      return setTeachers(teachers.filter((t) => t._id !== teacher._id));\n    },\n    addTeachingMins: (events, monthStart, monthEnd) => {\n      if (teachers.length > 0) {\n        teachers.forEach((teacher) => {\n          const datesData = createPayPeriodData(\n            events,\n            teacher,\n            monthStart,\n            monthEnd\n          );\n          for (let i = 1; i < 32; i++) {\n            if (teacher.minsByDate) {\n              teacher.minsByDate[i] = datesData[i] ? datesData[i] : 0;\n            }\n          }\n          // teacher.minsByDate = createPayPeriodData(\n          //   events,\n          //   teacher,\n          //   monthStart,\n          //   monthEnd\n          // );\n          updateTeacher(teacher);\n        });\n      }\n    },\n  };\n};\n"]},"metadata":{},"sourceType":"module"}