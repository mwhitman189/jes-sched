(this["webpackJsonpjes-sched"]=this["webpackJsonpjes-sched"]||[]).push([[0],{215:function(e,t,a){e.exports=a(375)},220:function(e,t,a){},374:function(e,t,a){},375:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),s=(a(220),a(12)),l=a(54),i=a(44),u=a(60),d=a(61),m=a(67),h=a(62),p=a(69),f=a(73),g=a(182),v=a.n(g),b=a(16),E=a.n(b),y=(a(160),a(22)),O=a.n(y),T=a(38),w=a.n(T),j=a(11),M=a(325),N="http://localhost:5000",k=function(e){var t=new Date,a=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),t.getMonth()+2,0),r=new j.a({freq:j.a.WEEKLY,count:26,interval:1,dtstart:new Date(e.start)}).between(a,n);return r.shift(),r},C=function(e,t,a,n){var r={};return t.teachingMins=0,t.outsideDutyMins=0,t.holidayMins=0,t.overThresholdOneMins=0,t.overThresholdTwoMins=0,e.forEach((function(e){if(E()(e.start).isBetween(a,n,null,"[]")&&e.resourceId===t.resourceId){var o=e.start.getDate(),c=e.start.getDay(),s=0,l=0,i=0;if(M.isHoliday(e.start)||1===e.start.getDay())i=parseInt(e.duration),t.holidayMins+=i;else{var u=function(e,t,a,n,r){var o=E()(new Date(e).setHours(n,0,0)),c=o.diff(e,"minutes"),s=o.diff(t,"minutes"),l=E()(new Date(e).setHours(r,0,0)),i=-l.diff(t,"minutes"),u=-l.diff(e,"minutes");return c<=0&&i<=0?(0,{teachingMins:a,outsideDutyMins:0}):c>0&&s>0||i>0&&u>0?{teachingMins:0,outsideDutyMins:a}:c>0?{teachingMins:a-c,outsideDutyMins:c}:{teachingMins:a-i,outsideDutyMins:i}}(e.start,e.end,e.duration,12,21);s=u.teachingMins,t.teachingMins+=s,l=u.outsideDutyMins,t.outsideDutyMins+=l}t.teachingMins>=t.otThreshold+600?(t.overThresholdTwoMins+=t.teachingMins-(t.otThreshold+600),t.overThresholdOneMins+=600):t.teachingMins>=t.otThreshold&&(t.overThresholdOneMins+=t.teachingMins-t.otThreshold);var d={resourceId:t,date:o,day:c,teachingMins:s,outsideDutyMins:l,overThresholdOneMins:t.overThresholdOneMins,overThresholdTwoMins:t.overThresholdTwoMins,holidayMins:i,travelAllowance:0,travelExpenses:0};r[o]?(r[o].teachingMins+=d.teachingMins,r[o].outsideDutyMins+=d.outsideDutyMins,r[o].overThresholdOneMins+=d.overThresholdOneMins,r[o].overThresholdTwoMins+=d.overThresholdTwoMins,r[o].holidayMins+=d.holidayMins,r[o].travelAllowance+=d.travelAllowance,r[o].travelExpenses+=d.travelExpenses):r[o]=d}})),r},D=function(e,t,a){var n=new Date,r=new Date(n.getFullYear(),n.getMonth(),1),o=new Date(n.getFullYear(),n.getMonth()+1,0);t.length>0&&(t.forEach((function(e){e.teachingMins=0,e.outsideDutyMins=0,e.holidayMins=0,e.overThresholdOneMins=0,e.overThresholdTwoMins=0})),t.forEach((function(n){C(e,n,r,o),I(n,t,a)})))},x=function(e,t){return O.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.awrap(w.a.get("".concat(N,"/lessons/")).then((function(a){a.data.length>0&&(a.data.map((function(e){e.start=new Date(e.start),e.end=new Date(e.end)})),t([].concat(Object(l.a)(a.data),[e[0]])))})).catch((function(e){return console.log(e)})));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))},I=function(e,t,a){var n,r,o;return O.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=t.findIndex((function(t){return t._id===e._id})),r=Object(l.a)(t),o=Object(i.a)({},e,{resourceTitle:e.resourceTitle,name:e.name,familyName:e.familyName,teachingMins:e.teachingMins,holidayMins:e.holidayMins,outsideDutyMins:e.outsideDutyMins,otThreshold:e.otThreshold,overThresholdOneMins:e.overThresholdOneMins,overThresholdTwoMins:e.overThresholdTwoMins}),r.splice(n,1,o),a(r),c.next=7,O.a.awrap(w.a.put("".concat(N,"/teachers/update/").concat(e._id),o).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})));case 7:return c.abrupt("return",c.sent);case 8:case"end":return c.stop()}}))},S=function(e,t,a){var n;return O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.filter((function(e){return e._id!==t._id})),a(n),r.next=4,O.a.awrap(w.a.delete("".concat(N,"/lessons/delete/").concat(t._id)).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})));case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}))},L=function(e,t,a,n){var r,o;return O.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r=e.findIndex((function(e){return e._id===t._id})),(o=Object(l.a)(e)).splice(r,1,a),n(o),c.next=6,O.a.awrap(w.a.put("".concat(N,"/lessons/update/").concat(t._id),a).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})));case 6:return c.abrupt("return",c.sent);case 7:case"end":return c.stop()}}))},H=a(184),R=a.n(H),W=a(5),B=function e(t){var a=t.date,n=e.range(a);return r.a.createElement(R.a,Object.assign({},t,{range:n}))};B.range=function(e){e.setHours(0,0,0,0);var t=e.getDate();switch(e.getDay()){case 0:e.setDate(t+1);break;case 1:e.setDate(t);break;case 2:e.setDate(t-1);break;case 3:e.setDate(t-2);break;case 4:e.setDate(t-3);break;case 5:e.setDate(t-4);break;case 6:e.setDate(t-5)}for(var a=e,n=W.add(a,5,"day"),r=a,o=[];W.lte(r,n,"day");)o.push(r),r=W.add(r,1,"day");return o},B.navigate=function(e,t){switch(t){case f.b.PREVIOUS:return W.subtract(e,7,"day");case f.b.NEXT:return W.add(e,7,"day");default:return e}},B.title=function(e){return"".concat(e.toLocaleDateString())};var A,P=a(412),V=Object(P.a)({event:{display:"flex",flexDirection:"column",justifyContent:"space-between",fontSize:".6rem",padding:"2px",height:"100%",width:"100%"},innerGroup:{fontSize:".7rem",fontWeight:"600",display:"flex",justifyContent:"space-between",padding:"0"},title:{maxWidth:"85%",whiteSpace:"nowrap",overflow:"hidden"},room:{fontSize:".8rem",color:"#1b1c1c",paddingLeft:".1rem"}}),G=function(e){var t=e.event,a=V();return r.a.createElement("div",{className:a.event},r.a.createElement("div",{className:a.group},r.a.createElement("div",null,E()(t.start).format("LT")),r.a.createElement("div",{className:a.innerGroup},r.a.createElement("div",{className:a.title},t.title),r.a.createElement("span",{className:a.room},t.room))),r.a.createElement("div",null,E()(t.end).format("LT")))},F=Object(n.createContext)({}),q=F.Provider,z=(F.Consumer,F),Y=a(415),_=a(188),J=a.n(_),X=a(187),K=a.n(X),U=a(377),$=a(25),Q={toolbar:{display:"flex",justifyContent:"space-around",alignContent:"space-around",alignItems:"center",height:"40px",padding:0},btnGroup:{display:"inline-block",whiteSpace:"nowrap"},navBtn:(A={color:"#fff",background:"rgb(20,71,207)"},Object($.a)(A,"background","linear-gradient(0deg, rgba(20,71,207,1) 7%, rgba(49,119,254,1) 100%)"),Object($.a)(A,"border","none"),Object($.a)(A,"borderRadius","5px"),Object($.a)(A,"padding",".3rem .5rem"),Object($.a)(A,"marginRight",".5rem"),Object($.a)(A,"minWidth","4rem"),A),navIcon:{fontSize:"1.5rem"},todayLabel:{color:"rgba(68, 68, 68, .7)",marginRight:".5rem"},teacherListContainer:{maxWidth:"20%",overflow:"scroll"},teacherList:{display:"flex",justifyContent:"flex-start",listStyle:"none",fontWeight:600},listItem:{marginRight:"1rem",color:"green"},listItemYellow:{marginRight:"1rem",color:"#fcad03"},listItemRed:{marginRight:"1rem",color:"red"}},Z=function(e){var t,a,o=e.handleBtnClick,c=e.handlePayrollBtnClick;return Object(U.a)(Q)((a=t=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.context.teachers;return r.a.createElement("div",{className:t.toolbar},r.a.createElement("div",{className:t.btnGroup},r.a.createElement("button",{className:t.navBtn,type:"button",onClick:function(){return e.props.onView("week")}},"Week"),r.a.createElement("button",{className:t.navBtn,type:"button",onClick:function(){return e.props.onView("day")}},"Day")),r.a.createElement("div",{className:t.btnGroup},r.a.createElement(Y.a,{className:t.navBtn,type:"button",onClick:function(){return e.props.onNavigate("PREV")}},r.a.createElement(K.a,{className:t.navIcon,icon:this.props.isRTL?"chevron-right":"chevron-left"})),r.a.createElement("span",{className:t.todayLabel,onClick:function(){return e.props.onNavigate("TODAY")}},E()(this.props.date).format("dddd MM/DD").toLocaleString()),r.a.createElement(Y.a,{className:t.navBtn,type:"button",onClick:function(){return e.props.onNavigate("NEXT")}},r.a.createElement(J.a,{className:t.navIcon,icon:this.props.isRTL?"chevron-left":"chevron-right"}))),r.a.createElement("div",null,r.a.createElement("ul",{className:t.teacherList},a.map((function(e){return r.a.createElement("li",{className:e.overThresholdTwoMins>0?t.listItemRed:e.overThresholdOneMins>0?t.listItemYellow:t.listItem,key:e.resourceId},"".concat(e.name,": ").concat(e.teachingMins))})))),r.a.createElement("div",{className:t.btnGroup},r.a.createElement("button",{className:t.navBtn,onClick:o},"New Teacher")),r.a.createElement("div",{className:t.btnGroup},r.a.createElement("button",{className:t.navBtn,onClick:c},"Payroll")))}}]),t}(n.Component),t.contextType=z,a))};E.a.locale("jp",{week:{dow:1}});var ee=Object(f.c)(E.a),te=v()(f.a),ae=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.handleMove,a=e.handleSelect,n=e.handleDoubleClick,o=e.handleBtnClick,c=e.handlePayrollBtnClick,s=e.events,l=e.teachers,u=e.setEvents,d=new Date;d.setHours(9,0,0);var m=new Date;m.setHours(20,59,59);return r.a.createElement(te,{style:{width:"100vw",maxHeight:"100vh"},localizer:ee,views:{week:B,day:!0},defaultView:"week",events:s,onEventDrop:t,startAccessor:"start",endAccessor:"end",resources:l,resourceIdAccessor:"resourceId",resourceTitleAccessor:"resourceTitle",selectable:!0,onSelectEvent:function(e){var t=Object(i.a)({},e,{isNewEvent:!1});L(s,e,t,u)},onDoubleClickEvent:n,eventPropGetter:function(e){if(e.hide)return{style:{display:"none"}};var t;switch(e.type){case"pl":t="#e6ba1f";break;case"beg":t="#00fca5";break;case"el":t="#02bd7b";break;case"lint":t="#018256";break;case"hint":t="#0b8a5e";break;case"adv":t="#04593c";break;case"lb":t="#97dd1a";break;case"lg1":t="#ca161e";break;case"lg2":t="#fdc100";break;case"lg3":t="#0065bd";break;case"lg4":t="#00ae3e";break;case"lg5":t="#ff8d2a";break;case"lg6":t="#8f178e";break;case"gs":t="#670084";break;case"ct1":t="#d90000";break;case"ct2":t="#0076d0";break;case"ct3":t="#008935";break;case"prm":t="#7d190b";break;default:t="#7c9ae6"}var a={backgroundColor:t,color:"white",border:0,display:"block",boxShadow:""};return e.isNewEvent&&(a.boxShadow="0 0 4px 5px ".concat(t)),{style:a}},step:5,timeslots:12,min:d,max:m,onSelectSlot:a,components:{event:G,toolbar:Z({handleBtnClick:o,handlePayrollBtnClick:c})},resizableAccessor:function(){return!1}})}}]),t}(n.Component),ne=a(23),re=function(e){var t=Object(n.useState)(e),a=Object(s.a)(t,2),r=a[0],o=a[1];return[r,function(e){e.target?o(e.target.value):o(e)},function(){o("")}]};function oe(e,t,a,n){return e.every((function(e){return!se([e.start,e.end],[E()(new Date(a)),E()(E()(new Date(a)).add(n,"m").toDate())])||parseInt(e.room)!==parseInt(t)}))}function ce(e,t,a,n){return e.every((function(e){return!se([e.start,e.end],[E()(new Date(a)),E()(E()(new Date(a)).add(n,"m").toDate())])||parseInt(e.resourceId)!==parseInt(t)}))}function se(e,t){if(t[0].isBetween(e[0],e[1],null,"[]")||t[1].isBetween(e[0],e[1],null,"[]"))return!0}var le=a(423),ie=a(425),ue=a(440),de=a(424),me=a(420),he=a(421),pe=a(419),fe=a(416),ge=a(422),ve=a(441),be=[1,2,3,4,5],Ee=[{name:"Grapeseed",shortName:"GS",type:"gs"},{name:"Beginner",shortName:"Beg",type:"beg"},{name:"Elementary",shortName:"El",type:"el"},{name:"Low Intermediate",shortName:"L-Int",type:"lint"},{name:"High Intermediate",shortName:"H-Int",type:"hint"},{name:"Advanced",shortName:"Adv",type:"adv"},{name:"Bunny",shortName:"Bunny",type:"bny"},{name:"Let's Begin",shortName:"LB",type:"lb"},{name:"Let's Go 1",shortName:"LG1",type:"lg1"},{name:"Let's Go 2",shortName:"LG2",type:"lg2"},{name:"Let's Go 3",shortName:"LG3",type:"lg3"},{name:"Let's Go 4",shortName:"LG4",type:"lg4"},{name:"Let's Go 5",shortName:"LG5",type:"lg5"},{name:"Connect 1",shortName:"Conn 1",type:"ct1"},{name:"Connect 2",shortName:"Conn 2",type:"ct2"},{name:"Connect 3",shortName:"Conn 3",type:"ct3"},{name:"Private",shortName:"Pvt",type:"pvt"},{name:"Premium",shortName:"Prem",type:"prm"}],ye=Object(P.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function Oe(e){var t=ye(),a=e.addEvent,o=e.formType,c=e.setFormType,l=e.events,i=e.teachers,u=e.startTime,d=e.updateStartTime,m=e.event,h=e.setEvents,p=e.setSelectedEvent,f=e.selectedTeacher,g=e.isRecurring,v=e.toggleIsRecurring,b=u||m.start,y=re(m?m.title:""),O=Object(s.a)(y,3),T=O[0],w=O[1],j=O[2],M=re(m?m.duration:""),N=Object(s.a)(M,3),k=N[0],C=N[1],D=N[2],x=re(m?m.resourceId:f),I=Object(s.a)(x,3),H=I[0],R=I[1],W=I[2],B=re(m?m.room:""),A=Object(s.a)(B,3),P=A[0],V=A[1],G=A[2],F=re(m?m.type:""),q=Object(s.a)(F,3),z=q[0],Y=q[1],_=q[2],J=["required"],X=["Teacher Required"],K=["required"],U=["Room Required"];m||(J.push("teacherIsAvailable"),X.push("Teacher unavailable"),K.push("roomIsAvailable"),U.push("Room unavailable")),Object(n.useEffect)((function(){ne.ValidatorForm.addValidationRule("teacherIsAvailable",(function(e){return ce(l,e,u,k)})),ne.ValidatorForm.addValidationRule("roomIsAvailable",(function(e){return oe(l,e,u,k)}))}));var $=function(){return c("")},Q=function(){j(),D(),W(),G(),_()};return r.a.createElement(ue.a,{open:"event"===o,onClose:$,"aria-labelledby":"form-dialog-title"},r.a.createElement(ne.ValidatorForm,{onSubmit:m?function(e){e.preventDefault();var t=new Date(b),a={title:T,start:t,end:E()(t).add(k,"m").toDate(),room:P,duration:k,resourceId:parseInt(H),type:z,isRecurring:g};L(l,m,a,h),Q(),p(""),$()}:function(e){e.preventDefault();var t=new Date(b);a({title:T,start:t,end:E()(t).add(k,"m").toDate(),room:P,duration:k,resourceId:parseInt(f),type:z,recur:g}),Q(),p("")}},r.a.createElement(pe.a,{id:"form-dialog-title"},"New Lesson"),r.a.createElement(me.a,null,r.a.createElement(he.a,null,"Enter Lesson Info"),r.a.createElement(ge.a,{control:r.a.createElement(ve.a,{checked:g,onChange:function(){v(!g)},value:g}),label:"Weekly lesson"}),r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.TextValidator,{autoFocus:!0,margin:"dense",id:"title",label:"Lesson Name",type:"text",value:T,onChange:w,fullWidth:!0,validators:["required"],errorMessages:["Enter the Lesson Name"]})),r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.TextValidator,{autoFocus:!0,margin:"dense",id:"startTime",label:"Start Time",type:"text",value:b,onChange:d,fullWidth:!0,validators:["required"],errorMessages:["Enter the Start Time"]})),r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.TextValidator,{margin:"dense",id:"duration",label:"Lesson Duration",type:"text",pattern:"[0-9]*",value:k,onChange:C,fullWidth:!0,validators:["required"],errorMessages:["Enter the Duration"]})),r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.SelectValidator,{className:t.selectStyles,margin:"dense",label:"Teacher",InputLabelProps:{shrink:!0},fullWidth:!0,id:"resource",value:H,onChange:R,name:"resource",validators:J,errorMessages:X},r.a.createElement(le.a,{value:""}),i.map((function(e){return r.a.createElement(le.a,{key:"teacher-".concat(e.resourceId),value:e.resourceId},e.name)})))),r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.SelectValidator,{className:t.selectStyles,label:"Room",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,id:"room",value:P,onChange:V,name:"room",validators:K,errorMessages:U},r.a.createElement(le.a,{value:""}),be.map((function(e){return r.a.createElement(le.a,{key:"room-".concat(e),value:e},e)})))),r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.SelectValidator,{className:t.selectStyles,margin:"dense",label:"Lesson Type",InputLabelProps:{shrink:!0},fullWidth:!0,id:"type",value:z,onChange:Y,name:"type"},r.a.createElement(le.a,{value:""}),Ee.map((function(e){return r.a.createElement(le.a,{key:"type-".concat(e.shortName),value:e.type},e.name)}))))),r.a.createElement(de.a,null,r.a.createElement(ie.a,{onClick:function(){S(l,m,h),p(""),$()},color:"secondary"},"Delete Lesson"),r.a.createElement(ie.a,{onClick:function(){Q(),p(""),$()},color:"primary"},"Cancel"),r.a.createElement(ie.a,{type:"submit",color:"primary"},m?"Confirm Change":"Add Lesson"))))}var Te=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),a=Object(s.a)(t,2),r=a[0],o=a[1];return[r,function(){o(!r)}]},we=Object(P.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function je(e){var t=we(),a=e.formType,n=e.setFormType,o=e.addTeacher,c=e.teachers,l=re(""),i=Object(s.a)(l,2),u=i[0],d=i[1],m=re(""),h=Object(s.a)(m,2),p=h[0],f=h[1],g=re(""),v=Object(s.a)(g,2),b=v[0],E=v[1],y=re(""),O=Object(s.a)(y,2),T=O[0],w=O[1],j=re(""),M=Object(s.a)(j,2),N=M[0],k=M[1],C=Te(!1),D=Object(s.a)(C,2),x=D[0],I=D[1],S=function(){return n("")};return r.a.createElement(ue.a,{open:"teacher"===a,onClose:S,"aria-labelledby":"form-dialog-title"},r.a.createElement(ne.ValidatorForm,{onSubmit:function(e){e.preventDefault();var t=1;c&&c.forEach((function(e){e.resourceId>t?t=e.resourceId+1:t++})),o({resourceId:t,resourceTitle:u,name:u,familyName:p,teachingMins:0,otThreshold:parseInt(60*b),contractType:T,dependentsNum:N,isPartTime:x})}},r.a.createElement(pe.a,{id:"form-dialog-title"},"New Teacher"),r.a.createElement(me.a,null,r.a.createElement(he.a,null,"Enter Teacher Info"),r.a.createElement(ge.a,{control:r.a.createElement(ve.a,{checked:x,onChange:I,value:x}),label:"Part-Time Teacher"}),r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.TextValidator,{autoFocus:!0,margin:"dense",id:"givenName",label:"Given Name",type:"text",value:u,onChange:d,fullWidth:!0,validators:["required"],errorMessages:["Enter the Given Name"],required:!0})),r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.TextValidator,{margin:"dense",id:"lastName",label:"Family Name",type:"text",value:p,onChange:f,fullWidth:!0,validators:["required"],errorMessages:["Enter the Last Name"],required:!0})),r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.TextValidator,{margin:"dense",id:"contractType",label:"Contract Type",type:"text",value:T,onChange:w,fullWidth:!0,validators:["required"],errorMessages:["Select a contract type"],required:!0})),!x&&r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.TextValidator,{margin:"dense",id:"otThreshold",label:"Overtime threshold (hours)",type:"text",pattern:"[0-9]*",value:b,onChange:E,fullWidth:!0,validators:["required"],errorMessages:["Set first OT threshold"],required:!0})),!x&&r.a.createElement(fe.a,{className:t.formControl},r.a.createElement(ne.TextValidator,{margin:"dense",id:"dependentsNum",label:"Number of dependents",type:"text",pattern:"[0-9]*",value:N,onChange:k,fullWidth:!0,required:!0}))),r.a.createElement(de.a,null,r.a.createElement(ie.a,{onClick:S,color:"primary"},"Cancel"),r.a.createElement(ie.a,{type:"submit",color:"primary"},"Add Teacher"))))}var Me=a(197),Ne=a(3),ke=a(190),Ce=a.n(ke),De=a(192),xe=a.n(De),Ie=a(193),Se=a.n(Ie),Le=a(194),He=a.n(Le),Re=a(426),We=a(427),Be=a(442),Ae=a(428),Pe=a(191),Ve=a.n(Pe),Ge={success:Ce.a,warning:Ve.a,error:xe.a,info:Se.a},Fe=Object(P.a)((function(e){return{success:{backgroundColor:Re.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:We.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function qe(e){var t=Fe(),a=e.className,n=e.message,o=e.onClose,c=e.variant,s=Object(Me.a)(e,["className","message","onClose","variant"]),l=Ge[c];return r.a.createElement(Ae.a,Object.assign({className:Object(Ne.default)(t[c],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(l,{className:Object(Ne.default)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(Y.a,{key:"close","aria-label":"close",color:"inherit",onClick:o},r.a.createElement(He.a,{className:t.icon}))]},s))}var ze=Object(P.a)((function(e){return{margin:{margin:e.spacing(1)}}}));function Ye(e){ze();var t=e.isOpen,a=e.setIsOpen,n=e.msg,o=e.variant;return r.a.createElement("div",null,r.a.createElement(Be.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,autoHideDuration:6e3},r.a.createElement(qe,{onClose:function(){a(!1)},variant:o,message:n})))}var _e,Je=a(195),Xe=a.n(Je),Ke=a(429),Ue=a(433),$e=a(432),Qe=a(430),Ze=a(431),et=a(434),tt=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.rows,n=e.currentTeacher,o=function(){var e={totalTeachingHours:0,totalOutsideDutyHours:0,totalHolidayHours:0,totalTravelAllowance:0,totalTravelExpenses:0};return a.forEach((function(t){e.totalTeachingHours+=t.teachingMins/60,e.totalOutsideDutyHours+=t.outsideDutyMins/60,e.totalHolidayHours+=t.holidayMins/60,e.totalTravelAllowance+=t.travelAllowance,e.totalTravelExpenses+=t.travelExpenses})),e}();return r.a.createElement("div",{className:t.table},r.a.createElement(pe.a,{id:"payroll-sheet-dialog"},"Payroll for ",n),r.a.createElement(Ke.a,{className:t.table,size:"small","aria-label":"simple table"},r.a.createElement(Qe.a,null,r.a.createElement(Ze.a,null,r.a.createElement($e.a,null,"Date"),r.a.createElement($e.a,{align:"right"},"Month"),r.a.createElement($e.a,{align:"right"},"Teaching Mins"),r.a.createElement($e.a,{align:"right"},"Outside DH"),r.a.createElement($e.a,{align:"right"},"Holiday Work"),r.a.createElement($e.a,{align:"right"},"Travel Allowance"),r.a.createElement($e.a,{align:"right"},"Travel Expenses"))),r.a.createElement(Ue.a,null,a.map((function(e){return r.a.createElement(Ze.a,{key:e.date},r.a.createElement($e.a,{component:"th",scope:"row"},e.date),r.a.createElement($e.a,{align:"right"},e.month),r.a.createElement($e.a,{align:"right"},e.teachingMins),r.a.createElement($e.a,{align:"right"},e.outsideDutyMins),r.a.createElement($e.a,{align:"right"},e.holidayMins),r.a.createElement($e.a,{align:"right"},e.travelAllowance),r.a.createElement($e.a,{align:"right"},e.travelExpenses))}))),r.a.createElement(et.a,null,r.a.createElement(Ze.a,null,r.a.createElement($e.a,{size:"medium"},"Total Teaching Hours:"),r.a.createElement($e.a,{className:t.totals},o.totalTeachingHours)),r.a.createElement(Ze.a,null,r.a.createElement($e.a,{size:"medium"},"Over Threshold One Hours:"),r.a.createElement($e.a,{className:t.totals},"Placeholder")),r.a.createElement(Ze.a,null,r.a.createElement($e.a,{size:"medium"},"Over Threshold Two Hours:"),r.a.createElement($e.a,{className:t.totals},"Placeholder")),r.a.createElement(Ze.a,null,r.a.createElement($e.a,{size:"medium"},"Outside DH Hours:"),r.a.createElement($e.a,{className:t.totals},o.totalOutsideDutyHours)),r.a.createElement(Ze.a,null,r.a.createElement($e.a,{size:"medium"},"Holiday Work Hours:"),r.a.createElement($e.a,{className:t.totals},o.totalHolidayHours)))))}}]),t}(n.Component),at=a(437),nt=a(418),rt=a(380),ot=a(436),ct=a(438),st=a(196),lt=a.n(st),it=a(435),ut=Object(P.a)({avatar:{backgroundColor:it.a[100],color:it.a[600]},table:{padding:"1rem",maxWidth:"90vw"},btn:(_e={color:"#fff",background:"rgb(20,71,207)"},Object($.a)(_e,"background","linear-gradient(0deg, rgba(20,71,207,1) 7%, rgba(49,119,254,1) 100%)"),Object($.a)(_e,"border","none"),Object($.a)(_e,"borderRadius","5px"),Object($.a)(_e,"padding",".3rem .5rem"),Object($.a)(_e,"minWidth","4rem"),Object($.a)(_e,"margin","1rem auto"),_e),footerRows:{width:"100%"},totals:{color:"#21942a",fontWeight:"800"}});function dt(e,t,a,n,r,o,c){return{date:e,month:t,teachingMins:a,outsideDutyMins:n,holidayMins:r,travelAllowance:o,travelExpenses:c}}var mt=function(e){var t=Object(n.useRef)(),a=ut(),o=Object(n.useContext)(z).teachers,c=Object(n.useState)("teacherSelect"),l=Object(s.a)(c,2),i=l[0],u=l[1],d=Object(n.useState)([]),m=Object(s.a)(d,2),h=m[0],p=m[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),v=g[0],b=g[1],y=e.events,O=e.setFormType,T=new Date,w=new Date(T.getFullYear(),T.getMonth(),1),j=new Date(T.getFullYear(),T.getMonth()+1,0),M=E()(T).daysInMonth(),N=function(){u(""),O("")};return r.a.createElement("div",null,r.a.createElement(ue.a,{onClose:N,"aria-labelledby":"teacher-select-title",open:"teacherSelect"===i},r.a.createElement(pe.a,{id:"teacher-select-title"},"Payroll: Select a teacher"),r.a.createElement(nt.a,null,o.map((function(e){return r.a.createElement(rt.a,{button:!0,onClick:function(){return function(e){b(e.resourceId);for(var t=C(y,e,w,j),a=[],n=1;n<=M;n++){var r=void 0;r=t[n]?dt(n,T.getMonth("MMM"),t[n].teachingMins,t[n].outsideDutyMins,t[n].holidayMins,t[n].travelAllowance,t[n].travelExpenses):dt(n,T.getMonth("MMM"),0,0,0,0,0),a.push(r)}p(a),u("payrollSheet")}(e)},key:e.resourceId},r.a.createElement(ot.a,null,r.a.createElement(at.a,{className:a.avatar},r.a.createElement(lt.a,null))),r.a.createElement(ct.a,{primary:e.name}))})))),r.a.createElement(ue.a,{onClose:N,"aria-labelledby":"payroll-sheet-dialog",open:"payrollSheet"===i},r.a.createElement(tt,{classes:a,rows:h,currentTeacher:v,ref:t}),r.a.createElement(Xe.a,{trigger:function(){return r.a.createElement("button",{className:a.btn},"Print")},content:function(){return t.current}})))},ht=(a(372),a(373),function(){var e=Object(n.useContext)(z),t=e.teachers,a=e.setTeachers,o=Object(n.useState)(""),c=Object(s.a)(o,2),u=c[0],d=c[1],m=Object(n.useState)([{id:1,title:"Dummy Event to fix drag and drop bug",start:new Date,end:new Date,room:2,duration:0,resourceId:1,hide:!0}]),h=Object(s.a)(m,2),p=h[0],f=h[1],g=re(new Date),v=Object(s.a)(g,3),b=v[0],y=v[1],T=v[2],j=Object(n.useState)(""),C=Object(s.a)(j,2),I=C[0],S=C[1],H=Object(n.useState)(!1),R=Object(s.a)(H,2),W=R[0],B=R[1],A=Object(n.useState)(""),P=Object(s.a)(A,2),V=P[0],G=P[1],F=Object(n.useState)(""),q=Object(s.a)(F,2),Y=q[0],_=q[1],J=Te(!1),X=Object(s.a)(J,2),K=X[0],U=X[1];Object(n.useEffect)((function(){x(p,f),function(e,t,a){O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.awrap(w.a.get("".concat(N,"/teachers/")).then((function(e){e.data.length>0&&a(e.data)})).then(D(e,t,a)).catch((function(e){return console.log(e)})));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}))}(p,t,a),D(p,t,a)}),[]),Object(n.useEffect)((function(){D(p,t,a)}),[p,a]);var $=function(e){y(e.start),S(e),d("event")},Q=function(e){G(e),B(!0)};return r.a.createElement("div",null,"event"===u&&r.a.createElement(Oe,{formType:u,setFormType:d,addEvent:function(e){!function(e,t,a){var n;O.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=[],!0===t.recur&&k(t).map((function(e){var a=Object(i.a)({},t,{start:e,end:E()(e).add(t.duration,"m").toDate(),isNewEvent:!1});M.isHoliday(e)&&(a.isHoliday=!0),n.push(a)})),M.isHoliday(t.start)&&(t=Object(i.a)({},t,{isHoliday:!0})),t=Object(i.a)({},t,{isNewEvent:!0}),n.push(t),r.next=7,O.a.awrap(w.a.post("".concat(N,"/lessons/add"),n).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})));case 7:return r.abrupt("return",x(e,a));case 8:case"end":return r.stop()}}))}(p,e,f),d("")},events:p,teachers:t,startTime:b,updateStartTime:y,resetStartTime:T,event:I,setSelectedEvent:S,setEvents:f,selectedTeacher:Y,isRecurring:K,toggleIsRecurring:U}),"teacher"===u&&r.a.createElement(je,{formType:u,setFormType:d,addTeacher:function(e){!function(e,t,a){O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.awrap(w.a.post("".concat(N,"/teachers/add"),t).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})));case 2:return n.abrupt("return",a([].concat(Object(l.a)(e),[t])));case 3:case"end":return n.stop()}}))}(t,e,a),d("")},setTeachers:a,teachers:t}),"payroll"===u&&r.a.createElement(mt,{events:p,setFormType:d}),r.a.createElement(Ye,{isOpen:W,setIsOpen:B,variant:"error",msg:V,events:p}),r.a.createElement(ae,{handleMove:function(e){var t=e.event,a=e.resourceId,n=e.start,r=e.end,o=p.indexOf(t),c=[].concat(Object(l.a)(p.slice(0,o)),Object(l.a)(p.slice(o+1)));return oe(c,t.room,n,parseInt(t.duration))?ce(c,a,n,parseInt(t.duration))?(function(e){var t=e.event,a=e.resourceId,n=e.start,r=e.end,o=Object(i.a)({},t,{resourceId:a,start:n,end:r});$(t),L(p,t,o,f)}({event:t,resourceId:a,start:n,end:r}),0):(S(t),Q("Teacher Conflict. Please choose another teacher or time"),1):(S(t),Q("Room Conflict. Please choose another room or time"),1)},handleSelect:function(e){var t=e.start,a=e.resourceId;y(t),_(a),d("event")},handleDoubleClick:$,events:p,setEvents:f,teachers:t,handleBtnClick:function(){d("teacher")},handlePayrollBtnClick:function(){d("payroll")}}))});a(374);var pt=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(q,{value:{teachers:a,setTeachers:o}},r.a.createElement(ht,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(pt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[215,1,2]]]);
//# sourceMappingURL=main.1b446890.chunk.js.map